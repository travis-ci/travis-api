<section class="info-block">
  <h2 class="info-header">Requests</h2>

  <% if @requests.empty? %>
    <p><%= "No requests exist for this #{origin.class.to_s.downcase}." %></p>
  <% else %>
    <ul id="requests">
      <li class="inline-list request-item">
        <p class="info-label loading">Request</p>
        <p class="info-label build-name">Build</p>
        <p class="info-label">Message</p>
        <p class="info-labe">Created at</p>
        <p class="info-label">Result</p>
        <p class="info-label">Event Type</p>
        <p class="info-label">State</p>
      </li>
      <% @requests.each do |request| %>
        <li class="inline-list request-item state_<%= request.state %>">
          <p><%= link_to describe(request), request %></p>
          <p class="build-name">
            <% request.builds.each do |build| %>
              <%= link_to describe(build), build %>
            <% end %>
          </p>
          <p><%= request.message %></p>
          <p><%= request.created_at %></p>
          <p><%= request.result %></p>
          <p><%= request.event_type %></p>
          <p><%= request.state %></p>
        </li>
      <% end %>
    </ul>
  <% end %>
  <%= will_paginate @requests, param_name: 'page', params: {controller: controller_name, action: 'requests', id: params[:id], anchor: 'requests'}, 'data-remote': true %>
</section>
