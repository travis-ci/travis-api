<section class="info-block">
  <h2 class="info-header">Builds</h2>
  <% if builds.empty? %>
    <p>No builds exist for this repository.</p>
  <% else %>
    <ul>
      <li class="inline-list build-item">
        <p class="info-label build-name">Build</p>
        <p class="info-label build-branch">Branch</p>
        <p class="info-label build-type">Type</p>
        <p class="info-label build-state"> State</p>
        <p class="info-label build-duration">Duration</p>
        <p class="info-label build-reset"></p>
      </li>
      <% builds.each do |build| %>
        <li class="inline-list build-item state_<%= build.state %>">
          <p class="build-name"><%= link_to describe(build), build %></p>
          <p class="build-branch"><%= build.commit.branch %></p>
          <p class="build-type"><%= build.event_type %></p>
          <p class="build-state"><%= "#{build.state} at #{build.state_time}" %></p>
          <p class="build-duration"><%= format_short_duration(build.duration) %></p>
          <p class="build-reset">
          <% if build.not_finished? %>
              <%= link_to "Cancel", cancel_build_path(build), method: "post", class: "button cancel-build", remote: true, 'data-type': 'json' %>
            <% else %>
              <%= link_to "Restart", restart_build_path(build), method: "post", class: "button restart-build", remote: true, 'data-type': 'json' %>
            <% end %>
          </p>
        </li>
      <% end %>
    </ul>
  <% end %>
</section>
