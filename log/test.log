Connecting to database specified by database.yml
  [1m[36m (20.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (8.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateRepositories (20101126174706)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (19.3ms)[0m  [1mCREATE TABLE "repositories" ("id" serial primary key, "name" character varying(255), "url" character varying(255), "last_duration" integer, "last_built_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20101126174706')
  [1m[36m (8.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateBuilds (20101126174715)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (14.2ms)[0m  [1mCREATE TABLE "builds" ("id" serial primary key, "repository_id" integer, "number" integer, "status" integer, "started_at" timestamp, "finished_at" timestamp, "log" text DEFAULT '', "commit" character varying(255), "message" text, "committed_at" timestamp, "committer_name" character varying(255), "committer_email" character varying(255), "author_name" character varying(255), "author_email" character varying(255), "job_id" character varying(255), "agent" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20101126174715')
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
Migrating to DeviseCreateUsers (20110109130532)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (22.5ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying(255), "login" character varying(255), "email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (4.4ms)[0m  CREATE UNIQUE INDEX "index_users_on_login" ON "users" ("login")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110109130532')[0m
  [1m[35m (3.3ms)[0m  COMMIT
Migrating to RepositoriesAddUsername (20110116155100)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "username" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110116155100')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to CreateTokens (20110130102621)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (18.3ms)[0m  CREATE TABLE "tokens" ("id" serial primary key, "user_id" integer, "token" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110130102621')[0m
  [1m[35m (14.2ms)[0m  COMMIT
Migrating to AddBuildParentIdAndConfiguration (20110301071656)
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE "builds" ADD COLUMN "parent_id" integer
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "config" text[0m
  [1m[35m (32.2ms)[0m  ALTER TABLE "builds" ALTER COLUMN "number" TYPE character varying(255)
  [1m[36m (10.4ms)[0m  [1mCREATE INDEX "index_builds_on_repository_id" ON "builds" ("repository_id")[0m
  [1m[35m (5.4ms)[0m  CREATE INDEX "index_builds_on_parent_id" ON "builds" ("parent_id")
  [1m[36m (1.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110301071656')[0m
  [1m[35m (3.0ms)[0m  COMMIT
Migrating to RepositoriesDenormalizeLastBuildAttributes (20110316174721)
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_number" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_status" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_started_at" timestamp[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_finished_at" timestamp
  [1m[36mRepository Load (0.3ms)[0m  [1mSELECT "repositories".* FROM "repositories" [0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110316174721')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddOwnerNameAndOwnerEmail (20110321075539)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "owner_name" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "owner_email" character varying(255)
  [1m[36mRepository Load (0.2ms)[0m  [1mSELECT "repositories".* FROM "repositories" [0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" DROP "username"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110321075539')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to RepositoryStripOwnerNameFromName (20110321171101)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRepository Load (0.3ms)[0m  SELECT "repositories".* FROM "repositories" 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110321171101')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateHistoriesTable (20110411171936)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (19.1ms)[0m  CREATE TABLE "histories" ("id" serial primary key, "message" character varying(255), "username" character varying(255), "item" integer, "table" character varying(255), "month" smallint, "year" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (16.7ms)[0m  [1mCREATE INDEX "index_histories_on_item_and_table_and_month_and_year" ON "histories" ("item", "table", "month", "year")[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110411171936')
  [1m[36m (9.2ms)[0m  [1mCOMMIT[0m
Migrating to RenameHistoriesToRailsAdminHistories (20110411171937)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "histories" RENAME TO "rails_admin_histories"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "histories_id_seq" RENAME TO "rails_admin_histories_id_seq"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110411171937')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to AddAdminFlagToUser (20110411172518)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (23.5ms)[0m  ALTER TABLE "users" ADD COLUMN "is_admin" boolean DEFAULT 'f'
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110411172518')
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddRef (20110413101057)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "ref" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "branch" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110413101057')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to BuildsAddGithubPayload (20110414131100)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "github_payload" text
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110414131100')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddGithubIdToUsersTable (20110503150504)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD COLUMN "github_id" integer
  [1m[36m (6.7ms)[0m  [1mCREATE INDEX "index_users_on_github_id" ON "users" ("github_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110503150504')
  [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesChangeOwnerEmailType (20110523012243)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ALTER COLUMN "owner_email" TYPE text[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110523012243')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubOauthTokenToUser (20110611203537)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD COLUMN "github_oauth_token" character varying(255)[0m
  [1m[35m (10.7ms)[0m  CREATE INDEX "index_users_on_github_oauth_token" ON "users" ("github_oauth_token")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110611203537')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to AddCompareUrlToBuild (20110613210252)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "compare_url" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110613210252')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to BuildsRemoveJobId (20110615152003)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "builds" DROP "job_id"
  [1m[36m (1.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110615152003')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to BuildRemoveLastBuiltAt (20110616211744)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" DROP "last_built_at"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110616211744')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddMissingIndexes (20110617114728)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (4.9ms)[0m  CREATE INDEX "index_repositories_on_last_build_started_at" ON "repositories" ("last_build_started_at")
  [1m[36m (11.8ms)[0m  [1mCREATE INDEX "index_repositories_on_owner_name_and_name" ON "repositories" ("owner_name", "name")[0m
  [1m[35m (11.0ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_parent_id_and_started_at" ON "builds" ("repository_id", "parent_id", "started_at")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110617114728')[0m
  [1m[35m (8.1ms)[0m  COMMIT
Migrating to AddActiveToRepositories (20110619100906)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "is_active" boolean
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110619100906')[0m
  [1m[35m (2.8ms)[0m  COMMIT
Migrating to StoreTokenInBuild (20110729094426)
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "builds" ADD COLUMN "token" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110729094426')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateRequestsCommitsAndTasks (20110801161819)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "commit_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "request_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "state" character varying(255)
  [1m[36m (24.0ms)[0m  [1mCREATE TABLE "commits" ("id" serial primary key, "repository_id" integer, "commit" character varying(255), "ref" character varying(255), "branch" character varying(255), "message" text, "compare_url" character varying(255), "committed_at" timestamp, "committer_name" character varying(255), "committer_email" character varying(255), "author_name" character varying(255), "author_email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (19.0ms)[0m  CREATE TABLE "requests" ("id" serial primary key, "repository_id" integer, "commit_id" integer, "state" character varying(255), "source" character varying(255), "payload" text, "token" character varying(255), "config" text, "commit" character varying(255), "started_at" timestamp, "finished_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (16.4ms)[0m  [1mCREATE TABLE "tasks" ("id" serial primary key, "repository_id" integer, "commit_id" integer, "owner_id" integer, "owner_type" character varying(255), "queue" character varying(255), "type" character varying(255), "state" character varying(255), "number" character varying(255), "config" text, "status" integer, "log" text DEFAULT '', "job_id" character varying(255), "worker" character varying(255), "commit" character varying(255), "started_at" timestamp, "finished_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.6ms)[0m  UPDATE "commits" SET "id" = source."id", "repository_id" = source."repository_id", "created_at" = source."created_at", "updated_at" = source."updated_at", "commit" = source."commit", "ref" = source."ref", "branch" = source."branch", "message" = source."message", "compare_url" = source."compare_url", "committed_at" = source."committed_at", "committer_name" = source."committer_name", "committer_email" = source."committer_email", "author_name" = source."author_name", "author_email" = source."author_email" FROM (SELECT "id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email" FROM "builds" WHERE "builds".id IN (SELECT id FROM "commits")) AS source WHERE "commits".id = source.id
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "commits" ("id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email") SELECT "id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "commits")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "ref"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "branch"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "builds" DROP COLUMN "message"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "compare_url"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "builds" DROP COLUMN "committed_at"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "committer_name"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" DROP COLUMN "committer_email"
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "author_name"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "author_email"
  [1m[36m (0.6ms)[0m  [1mUPDATE "requests" SET "id" = source."id", "repository_id" = source."repository_id", "config" = source."config", "created_at" = source."created_at", "updated_at" = source."updated_at", "commit" = source."commit", "started_at" = source."started_at", "finished_at" = source."finished_at" FROM (SELECT "id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at" FROM "builds" WHERE "builds".id IN (SELECT id FROM "requests")) AS source WHERE "requests".id = source.id[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "requests" ("id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at") SELECT "id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "requests")
  [1m[36m (0.6ms)[0m  [1mUPDATE "requests" SET "id" = source."id", "payload" = source."github_payload", "token" = source."token" FROM (SELECT "id", "github_payload", "token" FROM "builds" WHERE "builds".id IN (SELECT id FROM "requests")) AS source WHERE "requests".id = source.id[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "requests" ("id", "payload", "token") SELECT "id", "github_payload" AS "payload", "token" AS "token" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "requests")
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "github_payload"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "token"
  [1m[36m (0.4ms)[0m  [1mUPDATE "requests" SET "state" = 'finished'[0m
  [1m[35m (0.3ms)[0m  UPDATE "requests" SET "source" = 'github'
  [1m[36m (3.2ms)[0m  [1mUPDATE "tasks" SET "id" = source."id", "number" = source."number", "status" = source."status", "started_at" = source."started_at", "finished_at" = source."finished_at", "commit" = source."commit", "config" = source."config", "log" = source."log" FROM (SELECT "id", "number", "status", "started_at", "finished_at", "commit", "config", "log" FROM "builds" WHERE "builds".id IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0) AS source WHERE "tasks".id = source.id[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "tasks" ("id", "number", "status", "started_at", "finished_at", "commit", "config", "log") SELECT "id", "number", "status", "started_at", "finished_at", "commit", "config", "log" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "log"[0m
  [1m[35m (0.4ms)[0m  UPDATE "tasks" SET "id" = source."id", "owner_id" = source."parent_id" FROM (SELECT "id", "parent_id" FROM "builds" WHERE "builds".id IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0) AS source WHERE "tasks".id = source.id
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "tasks" ("id", "owner_id") SELECT "id", "parent_id" AS "owner_id" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0[0m
  [1m[35m (0.3ms)[0m  UPDATE "tasks" SET "owner_type" = 'Build'
  [1m[36m (0.2ms)[0m  [1mUPDATE "tasks" SET "type" = 'Task::Test'[0m
  [1m[35m (0.2ms)[0m  UPDATE "tasks" SET "state" = 'finished'
  [1m[36m (5.2ms)[0m  [1mCREATE INDEX "index_commits_on_commit" ON "commits" ("commit")[0m
  [1m[35m (4.5ms)[0m  CREATE INDEX "index_builds_on_commit" ON "builds" ("commit")
  [1m[36m (6.9ms)[0m  [1mCREATE INDEX "index_requests_on_commit" ON "requests" ("commit")[0m
  [1m[35m (10.0ms)[0m  CREATE INDEX "index_tasks_on_commit" ON "tasks" ("commit")
  [1m[36m (0.9ms)[0m  [1mUPDATE requests SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = requests.commit LIMIT 1)[0m
  [1m[35m (0.3ms)[0m  UPDATE tasks SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = tasks.commit LIMIT 1)
  [1m[36m (0.2ms)[0m  [1mDELETE FROM builds WHERE parent_id IS NOT NULL[0m
  [1m[35m (1.8ms)[0m  UPDATE builds SET request_id = (SELECT requests.id FROM requests WHERE requests.commit = builds.commit LIMIT 1)
  [1m[36m (1.3ms)[0m  [1mUPDATE builds SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = builds.commit LIMIT 1)[0m
  [1m[35m (1.5ms)[0m  SELECT MAX("builds"."id") AS max_id FROM "builds" 
  [1m[36m (3.1ms)[0m  [1mCREATE SEQUENCE shared_builds_tasks_seq START WITH 1 CACHE 30[0m
  [1m[35m (68.4ms)[0m  ALTER TABLE builds ALTER COLUMN id TYPE BIGINT
  [1m[36m (1.0ms)[0m  [1mALTER TABLE builds ALTER COLUMN id SET DEFAULT nextval('shared_builds_tasks_seq')[0m
  [1m[35m (36.5ms)[0m  ALTER TABLE tasks ALTER COLUMN id TYPE BIGINT
  [1m[36m (0.3ms)[0m  [1mALTER TABLE tasks ALTER COLUMN id SET DEFAULT nextval('shared_builds_tasks_seq')[0m
  [1m[35m (0.2ms)[0m  SELECT max(id) FROM commits
  [1m[36m (0.3ms)[0m  [1mSELECT setval('commits_id_seq', 1)[0m
  [1m[35m (0.2ms)[0m  SELECT max(id) FROM requests
  [1m[36m (0.1ms)[0m  [1mSELECT setval('requests_id_seq', 1)[0m
  [1m[35m (0.2ms)[0m  SELECT max(id) FROM tasks
  [1m[36m (0.1ms)[0m  [1mSELECT setval('tasks_id_seq', 1)[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "builds" DROP "parent_id"
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" DROP "commit"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "requests" DROP "commit"
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "tasks" DROP "commit"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110801161819')
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
Migrating to RepositoryRenameIsActiveToActive (20110805030147)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" RENAME COLUMN "is_active" TO "active"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110805030147')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to TasksAddTags (20110819232908)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "tasks" ADD COLUMN "tags" text[0m
  [1m[35m (3.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110819232908')
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
Migrating to CacheOneNumberForSharedBuildsTasksSequence (20110911204538)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mALTER SEQUENCE shared_builds_tasks_seq CACHE 1 NO MAXVALUE NO CYCLE[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110911204538')
  [1m[36m (5.3ms)[0m  [1mCOMMIT[0m
Migrating to RenameTasksToJobs (20111107134436)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (5.3ms)[0m  [1mALTER TABLE "tasks" RENAME TO "jobs"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "tasks_id_seq" RENAME TO "jobs_id_seq"
  [1m[36m (0.3ms)[0m  [1mUPDATE jobs SET type = 'Job::Test' WHERE type = 'Task::Test'[0m
  [1m[35m (0.1ms)[0m  UPDATE jobs SET type = 'Job::Configure' WHERE type = 'Task::Configure'
  [1m[36m (2.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134436')[0m
  [1m[35m (3.1ms)[0m  COMMIT
Migrating to CreateArtifacts (20111107134437)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (11.3ms)[0m  CREATE TABLE "artifacts" ("id" serial primary key, "content" text, "job_id" integer, "type" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.9ms)[0m  [1mUPDATE "artifacts" SET "id" = source."id", "content" = source."log" FROM (SELECT "id", "log" FROM "jobs" WHERE "jobs".id IN (SELECT id FROM "artifacts")) AS source WHERE "artifacts".id = source.id[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "artifacts" ("id", "content") SELECT "id", "log" AS "content" FROM "jobs" WHERE "jobs".id NOT IN (SELECT id FROM "artifacts")
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" DROP COLUMN "log"[0m
  [1m[35m (0.1ms)[0m  UPDATE "artifacts" SET "type" = 'Artifact::Log'
  [1m[36m (0.1ms)[0m  [1mUPDATE artifacts SET job_id = id[0m
  [1m[35m (0.3ms)[0m  select setval('artifacts_id_seq', (select max(id) + 1 from artifacts));
  [1m[36m (7.2ms)[0m  [1mCREATE INDEX "index_artifacts_on_type_and_job_id" ON "artifacts" ("type", "job_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111107134437')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkers (20111107134438)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (17.8ms)[0m  [1mCREATE TABLE "workers" ("id" serial primary key, "name" character varying(255), "host" character varying(255), "state" character varying(255), "last_seen_at" timestamp) [0m
  [1m[35m (10.3ms)[0m  CREATE INDEX "index_workers_on_name_and_host" ON "workers" ("name", "host")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134438')[0m
  [1m[35m (8.7ms)[0m  COMMIT
Migrating to JobsAddRetries (20111107134439)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (12.9ms)[0m  ALTER TABLE "jobs" ADD COLUMN "retries" integer DEFAULT 0
  [1m[36m (1.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134439')[0m
  [1m[35m (3.5ms)[0m  COMMIT
Migrating to RemoveRailsAdmin (20111107134440)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  DROP TABLE "rails_admin_histories"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134440')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to AddIndexesToJobs (20111128235043)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (11.9ms)[0m  CREATE INDEX "index_jobs_on_queue_and_state" ON "jobs" ("queue", "state")
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111128235043')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to AddRepositoryIdIndexToJobs (20111129014329)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (4.3ms)[0m  CREATE INDEX "index_jobs_on_repository_id" ON "jobs" ("repository_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111129014329')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddOwnerAndTypeIndexToJobs (20111129022625)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (10.7ms)[0m  CREATE INDEX "index_jobs_on_type_and_owner_id_and_owner_type" ON "jobs" ("type", "owner_id", "owner_type")
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111129022625')[0m
  [1m[35m (9.1ms)[0m  COMMIT
Migrating to WorkersAddPayloadAndLastError (20111201113500)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "workers" ADD COLUMN "payload" text
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "last_error" text[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111201113500')
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddDescriptionAndLastLanguage (20111203002341)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "description" text[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_language" character varying(255)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "language" character varying(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111203002341')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddArchivedAt (20111203221720)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "archived_at" timestamp[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111203221720')
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Migrating to MimicProductionDb (20111207093700)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111207093700')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to BuildsAddDuration (20111212103859)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "duration" integer
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111212103859')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to RepositoriesAddLastBuildDuration (20111212112411)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_duration" integer
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111212112411')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to CreateSslKeys (20111214173922)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (22.5ms)[0m  CREATE TABLE "ssl_keys" ("id" serial primary key, "repository_id" integer, "public_key" text, "private_key" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (10.3ms)[0m  [1mCREATE INDEX "index_ssl_key_on_repository_id" ON "ssl_keys" ("repository_id")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111214173922')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Migrating to AddAllowFailureToJobs (20120114125404)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (50.5ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "allow_failure" boolean DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120114125404')
  [1m[36m (8.5ms)[0m  [1mCOMMIT[0m
Migrating to AddPullRequestFieldsToRequest (20120216133223)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "event_type" character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "requests" ADD COLUMN "comments_url" character varying(255)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "base_commit" character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "requests" ADD COLUMN "head_commit" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120216133223')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddGravatarIdToUsers (20120222082522)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "users" ADD COLUMN "gravatar_id" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120222082522')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to OrganizationsCreate (20120301131209)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (23.9ms)[0m  CREATE TABLE "organizations" ("id" serial primary key, "name" character varying(255), "login" character varying(255), "github_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120301131209')[0m
  [1m[35m (8.7ms)[0m  COMMIT
Migrating to JobsRenameOwnerToSource (20120304000502)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "jobs" RENAME COLUMN "owner_id" TO "source_id"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" RENAME COLUMN "owner_type" TO "source_type"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000502')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddOwner (20120304000503)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "owner_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "owner_type" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120304000503')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to BuildsAddOwner (20120304000504)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "owner_id" integer
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "owner_type" character varying(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000504')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to JobsAddOwner (20120304000505)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "owner_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "jobs" ADD COLUMN "owner_type" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120304000505')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to RequestsAddOwner (20120304000506)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "requests" ADD COLUMN "owner_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "owner_type" character varying(255)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000506')
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
Migrating to AddLocaleToUser (20120311234933)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD COLUMN "locale" character varying(255)[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120311234933')
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateMemberships (20120316123726)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (5.2ms)[0m  [1mCREATE TABLE "memberships" ("id" serial primary key, "organization_id" integer, "user_id" integer) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120316123726')
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddPrivate (20120319170001)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (23.5ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "private" boolean DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120319170001')
  [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateUrls (20120324104051)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (31.0ms)[0m  [1mCREATE TABLE "urls" ("id" serial primary key, "url" character varying(255), "code" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120324104051')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Migrating to CopyStatusToResult (20120505165100)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "result" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "jobs" ADD COLUMN "result" integer
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_result" integer[0m
  [1m[35m (0.3ms)[0m  UPDATE builds SET result = status;
  [1m[36m (0.3ms)[0m  [1mUPDATE jobs SET result = status;[0m
  [1m[35m (0.3ms)[0m  UPDATE repositories SET last_build_result = last_build_status;
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120505165100')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to RequestsAddIndexOnHeadCommit (20120511171900)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (7.4ms)[0m  CREATE INDEX "index_requests_on_head_commit" ON "requests" ("head_commit")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120511171900')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreatePermissions (20120521174400)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (5.2ms)[0m  CREATE TABLE "permissions" ("id" serial primary key, "user_id" integer, "repository_id" integer, "admin" boolean) 
  [1m[36m (4.3ms)[0m  [1mCREATE INDEX "index_permissions_on_user_id" ON "permissions" ("user_id")[0m
  [1m[35m (4.3ms)[0m  CREATE INDEX "index_permissions_on_repository_id" ON "permissions" ("repository_id")
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120521174400')[0m
  [1m[35m (2.8ms)[0m  COMMIT
Migrating to BuildsAddPreviousResult (20120527235800)
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "previous_result" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120527235800')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddSyncInfoToUser (20120713140816)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD COLUMN "in_sync" boolean
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "users" ADD COLUMN "synced_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120713140816')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to RenameInSyncToIsSyncing (20120713153215)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mALTER TABLE "users" RENAME COLUMN "in_sync" TO "is_syncing"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120713153215')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to AddQueueToWorkers (20120725005300)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "queue" character varying(255)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120725005300')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddJobsIndexOnStateOwnerTypeOwnerId (20120727151900)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (5.9ms)[0m  [1mCREATE INDEX "index_jobs_on_state_owner_type_owner_id" ON "jobs" ("state", "owner_id", "owner_type")[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120727151900')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to AddQueuedAtToJobs (20120731005301)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "queued_at" timestamp[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120731005301')
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Migrating to AddPushAndPullToPermissions (20120802001001)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (35.5ms)[0m  [1mALTER TABLE "permissions" ADD COLUMN "push" boolean DEFAULT 'f'[0m
  [1m[35m (36.5ms)[0m  ALTER TABLE "permissions" ADD COLUMN "pull" boolean DEFAULT 'f'
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "permissions" ALTER COLUMN "admin" SET DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120802001001')
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
Migrating to AddBuildsIndexOnRepositoryIdAndState (20120911160000)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mDROP INDEX "index_builds_on_repository_id"[0m
  [1m[35m (5.2ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_state" ON "builds" ("repository_id", "state")
  [1m[36m (1.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120911160000')[0m
  [1m[35m (8.2ms)[0m  COMMIT
Migrating to ArtifactsAddAggregatedAt (20120911230000)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "aggregated_at" timestamp
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120911230000')[0m
  [1m[35m (7.7ms)[0m  COMMIT
Migrating to AddArtifactParts (20120911230001)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (11.3ms)[0m  CREATE TABLE "artifact_parts" ("id" serial primary key, "artifact_id" integer, "content" character varying(255), "number" integer) 
  [1m[36m (11.9ms)[0m  [1mCREATE INDEX "index_artifact_parts_on_artifact_id_and_number" ON "artifact_parts" ("artifact_id", "number")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120911230001')
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddIndexOnFinishedAt (20120915012000)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (4.8ms)[0m  [1mCREATE INDEX "index_builds_on_finished_at" ON "builds" ("finished_at")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915012000')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to CommitsAddIndexOnBranch (20120915012001)
  [1m[35m (1.1ms)[0m  BEGIN
  [1m[36m (5.5ms)[0m  [1mCREATE INDEX "index_commits_on_branch" ON "commits" ("branch")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915012001')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to JobsAddIndexOnCreatedAt (20120915150000)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (4.7ms)[0m  [1mCREATE INDEX "index_jobs_on_created_at" ON "jobs" ("created_at")[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915150000')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateEvents (20121015002500)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (17.7ms)[0m  [1mCREATE TABLE "events" ("id" serial primary key, "source_id" integer, "source_type" character varying(255), "repository_id" integer, "event" character varying(255), "data" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121015002500')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to RequestsAddResultAndMessage (20121015002501)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "result" character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "requests" ADD COLUMN "message" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121015002501')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateBroadcasts (20121017040100)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (12.5ms)[0m  CREATE TABLE "broadcasts" ("id" serial primary key, "recipient_id" integer, "recipient_type" character varying(255), "kind" character varying(255), "message" character varying(255), "expired" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121017040100')[0m
  [1m[35m (8.1ms)[0m  COMMIT
Migrating to EventsChangeDataToText (20121017040200)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "events" ALTER COLUMN "data" TYPE text
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121017040200')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddEventTypeToBuilds (20121018201301)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "event_type" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018201301')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to UpdateEventTypeOnBuilds (20121018203728)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m   UPDATE builds
 SET event_type = requests.event_type
 FROM requests
 WHERE builds.request_id = requests.id

  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018203728')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to AddIndexOnRepositoryIdAndEventTypeToBuilds (20121018210156)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (10.5ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_event_type" ON "builds" ("repository_id", "event_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018210156')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to RepositoriesAddLastBuildState (20121125122700)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_state" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121125122700')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to BuildsAddPreviousState (20121125122701)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "previous_state" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121125122701')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to ArtifactPartsAddFinal (20121222125200)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "artifact_parts" ADD COLUMN "final" boolean
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifact_parts" ADD COLUMN "created_at" timestamp[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222125200')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsChangeContentToText (20121222125300)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (11.3ms)[0m  [1mALTER TABLE "artifact_parts" ALTER COLUMN "content" TYPE text[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222125300')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsAddIndexOnArtifactId (20121222140200)
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (4.2ms)[0m  [1mCREATE INDEX "index_artifact_parts_on_artifact_id" ON "artifact_parts" ("artifact_id")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222140200')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsRemoveIndexOnArtifactId (20121223162300)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mDROP INDEX "index_artifact_parts_on_artifact_id"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121223162300')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubScopesToUser (20130107165057)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "users" ADD COLUMN "github_scopes" text[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130107165057')
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Migrating to AddIndexOnLastSeenAtToWorkers (20130115125836)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (6.4ms)[0m  [1mCREATE INDEX "index_workers_on_last_seen_at" ON "workers" ("last_seen_at")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130115125836')
  [1m[36m (7.9ms)[0m  [1mCOMMIT[0m
Migrating to CacheFullNameInWorkers (20130115145728)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "full_name" character varying(255)[0m
  [1m[35m (10.3ms)[0m  CREATE INDEX "index_workers_on_full_name" ON "workers" ("full_name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130115145728')[0m
  [1m[35m (8.4ms)[0m  COMMIT
Migrating to ArtifactsAddArchivedAt (20130125002600)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "archived_at" timestamp
  [1m[36m (5.9ms)[0m  [1mCREATE INDEX "index_artifacts_on_archived_at" ON "artifacts" ("archived_at")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130125002600')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactsAddArchivingAndVerified (20130125171100)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifacts" ADD COLUMN "archiving" boolean[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "archive_verified" boolean
  [1m[36m (10.4ms)[0m  [1mCREATE INDEX "index_artifacts_on_archiving" ON "artifacts" ("archiving")[0m
  [1m[35m (11.1ms)[0m  CREATE INDEX "index_artifacts_on_archive_verified" ON "artifacts" ("archive_verified")
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130125171100')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateEmails (20130129142703)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (5.2ms)[0m  CREATE TABLE "emails" ("id" serial primary key, "user_id" integer, "email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (11.4ms)[0m  [1mCREATE INDEX "index_emails_on_user_id" ON "emails" ("user_id")[0m
  [1m[35m (10.9ms)[0m  CREATE INDEX "index_emails_on_email" ON "emails" ("email")
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130129142703')[0m
  [1m[35m (8.9ms)[0m  COMMIT
Migrating to CreateLogs (20130207030700)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (29.7ms)[0m  CREATE TABLE "logs" ("id" serial primary key, "job_id" integer, "content" text, "created_at" timestamp, "updated_at" timestamp, "aggregated_at" timestamp, "archiving" boolean, "archived_at" timestamp, "archive_verified" boolean) 
  [1m[36m (11.0ms)[0m  [1mCREATE INDEX "index_logs_on_job_id" ON "logs" ("job_id")[0m
  [1m[35m (11.4ms)[0m  CREATE INDEX "index_logs_on_archive_verified" ON "logs" ("archive_verified")
  [1m[36m (11.0ms)[0m  [1mCREATE INDEX "index_logs_on_archived_at" ON "logs" ("archived_at")[0m
  [1m[35m (10.7ms)[0m   CREATE FUNCTION insert_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 INSERT INTO logs VALUES (NEW.id, NEW.job_id, NEW.content, NEW.created_at, NEW.updated_at,
 NEW.aggregated_at, NEW.archiving, NEW.archived_at, NEW.archive_verified);
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION update_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 UPDATE logs
 SET job_id=NEW.job_id, content=NEW.content, created_at=NEW.created_at,
 updated_at=NEW.updated_at, aggregated_at=NEW.aggregated_at, archiving=NEW.archiving,
 archived_at=NEW.archived_at, archive_verified=NEW.archive_verified
 WHERE id = NEW.id;
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION delete_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 DELETE FROM logs WHERE id = OLD.id;
 RETURN OLD;
 END;
 $$;

 CREATE TRIGGER insert_log AFTER INSERT ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE insert_log();

 CREATE TRIGGER update_log AFTER UPDATE ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE update_log();

 CREATE TRIGGER delete_log AFTER DELETE ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE delete_log();

  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130207030700')[0m
  [1m[35m (9.7ms)[0m  COMMIT
Migrating to CreateLogParts (20130207030701)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (10.1ms)[0m  CREATE TABLE "log_parts" ("id" serial primary key, "log_id" integer, "content" text, "number" integer, "final" boolean, "created_at" timestamp) 
  [1m[36m (5.2ms)[0m  [1mCREATE INDEX "index_log_parts_on_log_id_and_number" ON "log_parts" ("log_id", "number")[0m
  [1m[35m (1.3ms)[0m   INSERT INTO log_parts
 SELECT id, artifact_id, content, number, final, created_at
 FROM artifact_parts
 WHERE artifact_parts.id NOT IN (SELECT id FROM log_parts)

  [1m[36m (1.1ms)[0m  [1m CREATE FUNCTION insert_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 INSERT INTO log_parts VALUES (NEW.id, NEW.artifact_id, NEW.content, NEW.number, NEW.final,
 NEW.created_at);
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION update_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 UPDATE logs
 SET log_id=NEW.artifact_id, content=NEW.content, number=NEW.number, created_at=NEW.created_at
 WHERE id = NEW.id;
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION delete_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 DELETE FROM log_parts WHERE id = OLD.id;
 RETURN OLD;
 END;
 $$;

 CREATE TRIGGER insert_log_part AFTER INSERT ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE insert_log_part();

 CREATE TRIGGER update_log_part AFTER INSERT ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE update_log_part();

 CREATE TRIGGER delete_log_part AFTER DELETE ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE delete_log_part();
[0m
  [1m[35m (0.2ms)[0m   INSERT INTO log_parts
 SELECT id, artifact_id, content, number, final, created_at
 FROM artifact_parts
 WHERE artifact_parts.id NOT IN (SELECT id FROM log_parts)

  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130207030701')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to AddReferenceOnLogPartsLogId (20130208124253)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.6ms)[0m  ALTER TABLE log_parts ADD CONSTRAINT log_parts_log_id_fk FOREIGN KEY (log_id) REFERENCES logs (id);
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208124253')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to RenameArtifacts (20130208135800)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "artifacts" RENAME TO "artifacts_backup"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifacts_id_seq" RENAME TO "artifacts_backup_id_seq"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "artifact_parts" RENAME TO "artifact_parts_backup"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifact_parts_id_seq" RENAME TO "artifact_parts_backup_id_seq"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130208135800')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to DropArtifacts (20130208135801)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mDROP TABLE "artifacts_backup"[0m
  [1m[35m (0.6ms)[0m  DROP TABLE "artifact_parts_backup"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208135801')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to AddNotNullConstraintOnLogPartsLogId (20130208215252)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE log_parts ALTER COLUMN log_id SET NOT NULL;
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208215252')[0m
  [1m[35m (3.2ms)[0m  COMMIT
Migrating to AddPullRequestTitleToBuilds (20130311211101)
  [1m[36m (1.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "builds" ADD COLUMN "pull_request_title" text
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130311211101')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to AddPullRequestNumberToBuilds (20130327100801)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "pull_request_number" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130327100801')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddIndexToBuildsRequestId (20130418101437)
  [1m[36m (7.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_request_id ON builds(request_id)[0m
  [1m[35m (15.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130418101437')
Migrating to AddIndexToJobsOnOwnerIdOwnerTypeAndState (20130418103306)
  [1m[36m (14.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_id_and_owner_type_and_state ON jobs(owner_id, owner_type, state)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130418103306')
Migrating to AddBranchToBuilds (20130504230850)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "branch" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130504230850')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddMoreIndexesToBuilds (20130505023259)
  [1m[36m (13.7ms)[0m  [1m CREATE INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type_and_state_and_branch
 ON builds(repository_id, event_type, state, branch);
[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130505023259')
Migrating to AddIndexOnBuildState (20130521115725)
  [1m[36m (18.8ms)[0m  [1m CREATE INDEX CONCURRENTLY index_builds_on_state
 ON builds(state);
[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521115725')
Migrating to UpdateFinishedJobs (20130521133050)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (3.0ms)[0m  UPDATE jobs SET state = 'passed' WHERE state = 'finished' AND result = 0 AND type = 'Job::Test'
  [1m[36m (0.3ms)[0m  [1mUPDATE jobs SET state = 'failed' WHERE state = 'finished' AND result = 1 AND type = 'Job::Test'[0m
  [1m[35m (0.3ms)[0m  UPDATE jobs SET state = 'errored' WHERE state = 'finished' AND result IS NULL AND type = 'Job::Test'
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM jobs WHERE state = 'finished' AND type = 'Job::Test'[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521133050')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Migrating to UpdateFinishedBuilds (20130521134224)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE builds SET state = 'passed' WHERE state = 'finished' AND result = 0[0m
  [1m[35m (0.3ms)[0m  UPDATE builds SET state = 'failed' WHERE state = 'finished' AND result = 1
  [1m[36m (0.2ms)[0m  [1mUPDATE builds SET state = 'errored' WHERE state = 'finished' AND result IS NULL[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM builds WHERE state = 'finished'
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130521134224')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to RemoveUnusedBuildColumns (20130521134800)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" DROP "result"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP "status"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP "previous_result"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP "agent"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "builds" DROP "language"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP "archived_at"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521134800')
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Migrating to RemoveUnusedJobColumns (20130521141357)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "jobs" DROP "status"[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "jobs" DROP "job_id"
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "jobs" DROP "retries"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521141357')
  [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubIdToUsers (20130629122945)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "github_id" integer[0m
  [1m[35m (9.8ms)[0m  CREATE INDEX "index_repositories_on_github_id" ON "repositories" ("github_id")
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629122945')[0m
  [1m[35m (8.2ms)[0m  COMMIT
Migrating to AddDefaultBranchToRepositories (20130629133531)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE "repositories" ADD COLUMN "default_branch" character varying(255)
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629133531')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddGithubLanguageToRepositories (20130629174449)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "github_language" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629174449')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddPurgedAtToLogs (20130701123456)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "logs" ADD COLUMN "purged_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130701123456')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to RemoveUnusedRepositoryColumns (20130702123456)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" DROP "last_duration"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" DROP "last_build_status"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" DROP "last_build_result"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" DROP "last_build_language"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130702123456')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddUniqueIndexOnUsersGithubIdAndRemoveUniqueIndexOnUsersLogin (20130702144325)
  [1m[35m (8.5ms)[0m  DROP INDEX index_users_on_login
  [1m[36m (19.8ms)[0m  [1mCREATE INDEX CONCURRENTLY index_users_on_login ON users(login)[0m
  [1m[35m (2.2ms)[0m  DROP INDEX index_users_on_github_id
  [1m[36m (6.4ms)[0m  [1mCREATE UNIQUE INDEX CONCURRENTLY index_users_on_github_id ON users(github_id)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130702144325')
Migrating to AddExtraColumnsToOrganizations (20130705123456)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "organizations" ADD COLUMN "avatar_url" character varying(255)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "organizations" ADD COLUMN "location" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "organizations" ADD COLUMN "email" character varying(255)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "organizations" ADD COLUMN "company" character varying(255)[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "organizations" ADD COLUMN "homepage" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130705123456')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddIndexOnGithubIdToOrganizations (20130707164854)
  [1m[36m (6.2ms)[0m  [1mCREATE UNIQUE INDEX CONCURRENTLY index_organizations_on_github_id ON organizations(github_id)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130707164854')
Migrating to CreateAnnotations (20130709185200)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (9.8ms)[0m  CREATE TABLE "annotations" ("id" serial primary key, "job_id" integer NOT NULL, "url" character varying(255), "description" text NOT NULL, "image_url" character varying(255), "image_alt" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130709185200')[0m
  [1m[35m (3.2ms)[0m  COMMIT
Migrating to CreateAnnotationProviders (20130709233500)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (11.9ms)[0m  CREATE TABLE "annotation_providers" ("id" serial primary key, "name" character varying(255), "api_username" character varying(255), "api_key" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130709233500')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to AddAnnotationProviderIdToAnnotations (20130710000745)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "annotations" ADD COLUMN "annotation_provider_id" integer NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130710000745')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddCanceledAtToJobsAndBuilds (20130726101124)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "canceled_at" timestamp
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "canceled_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130726101124')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to AddIndexOnRepositoryGithubId (20130901183019)
  [1m[35m (2.3ms)[0m  DROP INDEX index_repositories_on_github_id
  [1m[36m (14.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_github_id ON repositories(github_id)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130901183019')
Migrating to AddCachedMatrixIdsToBuilds (20130909203321)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE builds ADD COLUMN cached_matrix_ids integer[]
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130909203321')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateIndexOnBuildsIdDescAndRepositoryIdAndEventType (20130910184823)
  [1m[36m (6.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_id_repository_id_and_event_type_desc ON builds (id DESC, repository_id, event_type);[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130910184823')
Migrating to AddUniqueIndexOnRepositoryGithubId (20130916101056)
  [1m[36m (3.3ms)[0m  [1mDROP INDEX index_repositories_on_github_id[0m
  [1m[35m (19.3ms)[0m  CREATE UNIQUE INDEX CONCURRENTLY index_repositories_on_github_id ON repositories(github_id)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130916101056')[0m
Migrating to AddSettingsToRepositories (20130920135744)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "settings" json[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130920135744')
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Migrating to RemoveWorkersTableAndIndexes (20131104101056)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mDROP TABLE "workers"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131104101056')
  [1m[36m (4.8ms)[0m  [1mCOMMIT[0m
Migrating to RemoveEventsTable (20131109101056)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (3.5ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131109101056')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to RemoveAnnotationImageInfo (20140120225125)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "annotations" DROP "image_url"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "annotations" DROP "image_alt"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140120225125')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddStatusToAnnotations (20140121003026)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "annotations" ADD COLUMN "status" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140121003026')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddIndicesToRequests (20140204220926)
  [1m[36m (13.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_requests_on_repository_id ON requests(repository_id)[0m
  [1m[35m (9.4ms)[0m  CREATE INDEX CONCURRENTLY index_requests_on_commit_id ON requests(commit_id)
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140204220926')[0m
Migrating to AddIndicesToMemberships (20140210003014)
  [1m[35m (6.2ms)[0m  CREATE INDEX CONCURRENTLY index_memberships_on_user_id ON memberships(user_id)
  [1m[36m (2.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140210003014')[0m
Migrating to RemoveUnusedIndices (20140210012509)
  [1m[35m (2.4ms)[0m  DROP INDEX CONCURRENTLY index_commits_on_commit
  [1m[36m (4.9ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_state[0m
  [1m[35m (2.4ms)[0m  DROP INDEX CONCURRENTLY index_commits_on_branch
  [1m[36m (2.5ms)[0m  [1mDROP INDEX CONCURRENTLY index_users_on_github_oauth_token[0m
  [1m[35m (2.4ms)[0m  DROP INDEX CONCURRENTLY index_builds_on_finished_at
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_queue_and_state[0m
  [1m[35m (2.2ms)[0m  DROP INDEX CONCURRENTLY index_jobs_on_created_at
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140210012509')[0m
Migrating to AddRemovedInfoToLogs (20140612131826)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "logs" ADD COLUMN "removed_at" timestamp[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "logs" ADD COLUMN "removed_by" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140612131826')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddEducationFieldToUser (20140827121945)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD COLUMN "education" boolean
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140827121945')[0m
  [1m[35m (3.3ms)[0m  COMMIT
Migrating to JobsAddReceivedAt (20150121135400)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "jobs" ADD COLUMN "received_at" timestamp
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150121135400')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to BuildsAddReceivedAt (20150121135401)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "received_at" timestamp
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150121135401')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddIndexOnRepositoryIdToCommits (20150204144312)
  [1m[36m (0.1ms)[0m  [1mDROP INDEX IF EXISTS index_commits_on_repository_id[0m
  [1m[35m (12.9ms)[0m  CREATE INDEX CONCURRENTLY index_commits_on_repository_id ON commits(repository_id)
  [1m[36m (2.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150204144312')[0m
Migrating to IndexRequestsOnCreatedAt (20150210170900)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_requests_on_created_at
  [1m[36m (9.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_requests_on_created_at ON requests(created_at)[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150210170900')
Migrating to CreateBranches (20150223125700)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (5.1ms)[0m  CREATE TABLE "branches" ("id" serial primary key, "repository_id" integer NOT NULL, "last_build_id" integer, "name" character varying(255) NOT NULL, "exists_on_github" boolean DEFAULT 't' NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (18.7ms)[0m  [1mCREATE UNIQUE INDEX "index_branches_on_repository_id_and_name" ON "branches" ("repository_id", "name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150223125700')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddNextBuildNumberToRepository (20150311020321)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "next_build_number" integer[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150311020321')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddActiveIndexToRepository (20150316020321)
  [1m[35m (0.1ms)[0m  DROP INDEX IF EXISTS index_repositories_on_active
  [1m[36m (12.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_active ON repositories(active)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150316020321')
Migrating to AddOwnerTypeAndOwnerIdIndexesToBuilds (20150316080321)
  [1m[36m (0.2ms)[0m  [1mDROP INDEX IF EXISTS index_builds_on_owner_type[0m
  [1m[35m (0.5ms)[0m  DROP INDEX IF EXISTS index_builds_on_owner_id
  [1m[36m (13.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_owner_type ON builds(owner_type)[0m
  [1m[35m (7.1ms)[0m  CREATE INDEX CONCURRENTLY index_builds_on_owner_id ON builds(owner_id)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150316080321')[0m
Migrating to AddOwnerTypeAndOwnerIdIndexesToRepositories (20150316100321)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_repositories_on_owner_type
  [1m[36m (0.1ms)[0m  [1mDROP INDEX IF EXISTS index_repositories_on_owner_id[0m
  [1m[35m (14.2ms)[0m  CREATE INDEX CONCURRENTLY index_repositories_on_owner_type ON repositories(owner_type)
  [1m[36m (6.2ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_owner_id ON repositories(owner_id)[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150316100321')
Migrating to AddSlugIndexToRepositories (20150317004600)
  [1m[36m (27.8ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS pg_trgm[0m
  [1m[35m (2.5ms)[0m  CREATE INDEX CONCURRENTLY index_repositories_on_slug ON repositories USING gin((owner_name || '/' || name) gin_trgm_ops)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150317004600')[0m
Migrating to AddTokenIndexToTokens (20150317020321)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_tokens_on_token
  [1m[36m (14.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_tokens_on_token ON tokens(token)[0m
  [1m[35m (2.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150317020321')
Migrating to AddLoginIndexToOrganizations (20150317080321)
  [1m[36m (0.9ms)[0m  [1mDROP INDEX IF EXISTS index_organizations_on_login[0m
  [1m[35m (13.0ms)[0m  CREATE INDEX CONCURRENTLY index_organizations_on_login ON organizations(login)
  [1m[36m (8.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150317080321')[0m
Migrating to AddLowerCaseIndices (20150414001337)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_organizations_on_lower_login
  [1m[36m (13.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_organizations_on_lower_login ON organizations USING btree(lower(login))[0m
  [1m[35m (0.1ms)[0m  DROP INDEX IF EXISTS index_users_on_lower_login
  [1m[36m (12.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_users_on_lower_login ON users USING btree(lower(login))[0m
  [1m[35m (0.7ms)[0m  DROP INDEX IF EXISTS index_repositories_on_lower_name
  [1m[36m (9.0ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_lower_name ON repositories USING btree(lower(name))[0m
  [1m[35m (0.7ms)[0m  DROP INDEX IF EXISTS index_repositories_on_lower_owner_name
  [1m[36m (7.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_lower_owner_name ON repositories USING btree(lower(owner_name))[0m
  [1m[35m (4.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150414001337')
Migrating to RepositoriesAddIndexOwnerName (20150528101600)
  [1m[36m (12.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_owner_name ON repositories(owner_name)[0m
  [1m[35m (8.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101600')
Migrating to RepositoriesAddIndexName (20150528101601)
  [1m[36m (6.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_name ON repositories(name)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101601')
Migrating to RepositoriesDropIndexOwnerNameName (20150528101602)
  [1m[36m (2.2ms)[0m  [1mDROP INDEX CONCURRENTLY index_repositories_on_owner_name_and_name[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101602')
Migrating to BuildsAddIndexEventType (20150528101603)
  [1m[36m (14.5ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_event_type ON builds (event_type)[0m
  [1m[35m (2.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101603')
Migrating to BuildsAddIndexRepositoryId (20150528101604)
  [1m[36m (19.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_repository_id ON builds (repository_id)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101604')
Migrating to BuildsAddIndexState (20150528101605)
  [1m[36m (14.9ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_state ON builds (state)[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101605')
Migrating to BuildsAddIndexBranch (20150528101607)
  [1m[36m (6.8ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_branch ON builds (branch)[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101607')
Migrating to BuildsDropIndexRepositoryIdAndState (20150528101608)
  [1m[36m (3.5ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_state[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101608')
Migrating to BuildsDropIndexRepositoryIdAndEventType (20150528101609)
  [1m[36m (5.6ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type[0m
  [1m[35m (2.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101609')
Migrating to BuildsDropIndexIdRepositoryIdAndEventTypeDesc (20150528101610)
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_id_repository_id_and_event_type_desc[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101610')
Migrating to BuildsDropIndexRepositoryIdAndEventTypeAndStateAndBranch (20150528101611)
  [1m[36m (3.4ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type_and_state_and_bran[0m
  [1m[35m (2.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101611')
Migrating to JobsAddIndexOwnerId (20150610143500)
  [1m[36m (8.0ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_id ON jobs (owner_id)[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143500')
Migrating to JobsAddIndexOwnerType (20150610143501)
  [1m[36m (7.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_type ON jobs (owner_type)[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143501')
Migrating to JobsAddIndexSourceId (20150610143502)
  [1m[36m (7.2ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_source_id ON jobs (source_id)[0m
  [1m[35m (2.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143502')
Migrating to JobsAddIndexSourceType (20150610143503)
  [1m[36m (7.0ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_source_type ON jobs (source_type)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143503')
Migrating to JobsAddIndexType (20150610143504)
  [1m[36m (6.8ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_type ON jobs (type)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143504')
Migrating to JobsDropIndexOwnerIdAndOwnerTypeAndState (20150610143505)
  [1m[36m (3.6ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_owner_id_and_owner_type_and_state[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143505')
Migrating to JobsDropIndexStateOwnerTypeOwnerId (20150610143506)
  [1m[36m (3.9ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_state_owner_type_owner_id[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143506')
Migrating to JobsDropIndexTypeAndSourceIdAndSourceType (20150610143507)
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_type_and_owner_id_and_owner_type[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143507')
Migrating to JobsAddIndexState (20150610143508)
  [1m[36m (19.2ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_state ON jobs (state)[0m
  [1m[35m (7.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143508')
Migrating to JobsAddIndexQueue (20150610143509)
  [1m[36m (12.8ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_queue ON jobs (queue)[0m
  [1m[35m (3.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143509')
Migrating to TokensAddIndexUserId (20150610143510)
  [1m[36m (8.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_tokens_on_user_id ON tokens (user_id)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143510')
Migrating to ReposAddInvalidatedAt (20150629231300)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "invalidated_at" timestamp
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150629231300')[0m
  [1m[35m (2.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateRepositories (20101126174706)
Migrating to CreateBuilds (20101126174715)
Migrating to DeviseCreateUsers (20110109130532)
Migrating to RepositoriesAddUsername (20110116155100)
Migrating to CreateTokens (20110130102621)
Migrating to AddBuildParentIdAndConfiguration (20110301071656)
Migrating to RepositoriesDenormalizeLastBuildAttributes (20110316174721)
Migrating to RepositoriesAddOwnerNameAndOwnerEmail (20110321075539)
Migrating to RepositoryStripOwnerNameFromName (20110321171101)
Migrating to CreateHistoriesTable (20110411171936)
Migrating to RenameHistoriesToRailsAdminHistories (20110411171937)
Migrating to AddAdminFlagToUser (20110411172518)
Migrating to BuildsAddRef (20110413101057)
Migrating to BuildsAddGithubPayload (20110414131100)
Migrating to AddGithubIdToUsersTable (20110503150504)
Migrating to RepositoriesChangeOwnerEmailType (20110523012243)
Migrating to AddGithubOauthTokenToUser (20110611203537)
Migrating to AddCompareUrlToBuild (20110613210252)
Migrating to BuildsRemoveJobId (20110615152003)
Migrating to BuildRemoveLastBuiltAt (20110616211744)
Migrating to AddMissingIndexes (20110617114728)
Migrating to AddActiveToRepositories (20110619100906)
Migrating to StoreTokenInBuild (20110729094426)
Migrating to CreateRequestsCommitsAndTasks (20110801161819)
Migrating to RepositoryRenameIsActiveToActive (20110805030147)
Migrating to TasksAddTags (20110819232908)
Migrating to CacheOneNumberForSharedBuildsTasksSequence (20110911204538)
Migrating to RenameTasksToJobs (20111107134436)
Migrating to CreateArtifacts (20111107134437)
Migrating to CreateWorkers (20111107134438)
Migrating to JobsAddRetries (20111107134439)
Migrating to RemoveRailsAdmin (20111107134440)
Migrating to AddIndexesToJobs (20111128235043)
Migrating to AddRepositoryIdIndexToJobs (20111129014329)
Migrating to AddOwnerAndTypeIndexToJobs (20111129022625)
Migrating to WorkersAddPayloadAndLastError (20111201113500)
Migrating to RepositoriesAddDescriptionAndLastLanguage (20111203002341)
Migrating to BuildsAddArchivedAt (20111203221720)
Migrating to MimicProductionDb (20111207093700)
Migrating to BuildsAddDuration (20111212103859)
Migrating to RepositoriesAddLastBuildDuration (20111212112411)
Migrating to CreateSslKeys (20111214173922)
Migrating to AddAllowFailureToJobs (20120114125404)
Migrating to AddPullRequestFieldsToRequest (20120216133223)
Migrating to AddGravatarIdToUsers (20120222082522)
Migrating to OrganizationsCreate (20120301131209)
Migrating to JobsRenameOwnerToSource (20120304000502)
Migrating to RepositoriesAddOwner (20120304000503)
Migrating to BuildsAddOwner (20120304000504)
Migrating to JobsAddOwner (20120304000505)
Migrating to RequestsAddOwner (20120304000506)
Migrating to AddLocaleToUser (20120311234933)
Migrating to CreateMemberships (20120316123726)
Migrating to RepositoriesAddPrivate (20120319170001)
Migrating to CreateUrls (20120324104051)
Migrating to CopyStatusToResult (20120505165100)
Migrating to RequestsAddIndexOnHeadCommit (20120511171900)
Migrating to CreatePermissions (20120521174400)
Migrating to BuildsAddPreviousResult (20120527235800)
Migrating to AddSyncInfoToUser (20120713140816)
Migrating to RenameInSyncToIsSyncing (20120713153215)
Migrating to AddQueueToWorkers (20120725005300)
Migrating to AddJobsIndexOnStateOwnerTypeOwnerId (20120727151900)
Migrating to AddQueuedAtToJobs (20120731005301)
Migrating to AddPushAndPullToPermissions (20120802001001)
Migrating to AddBuildsIndexOnRepositoryIdAndState (20120911160000)
Migrating to ArtifactsAddAggregatedAt (20120911230000)
Migrating to AddArtifactParts (20120911230001)
Migrating to BuildsAddIndexOnFinishedAt (20120915012000)
Migrating to CommitsAddIndexOnBranch (20120915012001)
Migrating to JobsAddIndexOnCreatedAt (20120915150000)
Migrating to CreateEvents (20121015002500)
Migrating to RequestsAddResultAndMessage (20121015002501)
Migrating to CreateBroadcasts (20121017040100)
Migrating to EventsChangeDataToText (20121017040200)
Migrating to AddEventTypeToBuilds (20121018201301)
Migrating to UpdateEventTypeOnBuilds (20121018203728)
Migrating to AddIndexOnRepositoryIdAndEventTypeToBuilds (20121018210156)
Migrating to RepositoriesAddLastBuildState (20121125122700)
Migrating to BuildsAddPreviousState (20121125122701)
Migrating to ArtifactPartsAddFinal (20121222125200)
Migrating to ArtifactPartsChangeContentToText (20121222125300)
Migrating to ArtifactPartsAddIndexOnArtifactId (20121222140200)
Migrating to ArtifactPartsRemoveIndexOnArtifactId (20121223162300)
Migrating to AddGithubScopesToUser (20130107165057)
Migrating to AddIndexOnLastSeenAtToWorkers (20130115125836)
Migrating to CacheFullNameInWorkers (20130115145728)
Migrating to ArtifactsAddArchivedAt (20130125002600)
Migrating to ArtifactsAddArchivingAndVerified (20130125171100)
Migrating to CreateEmails (20130129142703)
Migrating to CreateLogs (20130207030700)
Migrating to CreateLogParts (20130207030701)
Migrating to AddReferenceOnLogPartsLogId (20130208124253)
Migrating to RenameArtifacts (20130208135800)
Migrating to DropArtifacts (20130208135801)
Migrating to AddNotNullConstraintOnLogPartsLogId (20130208215252)
Migrating to AddPullRequestTitleToBuilds (20130311211101)
Migrating to AddPullRequestNumberToBuilds (20130327100801)
Migrating to AddIndexToBuildsRequestId (20130418101437)
Migrating to AddIndexToJobsOnOwnerIdOwnerTypeAndState (20130418103306)
Migrating to AddBranchToBuilds (20130504230850)
Migrating to AddMoreIndexesToBuilds (20130505023259)
Migrating to AddIndexOnBuildState (20130521115725)
Migrating to UpdateFinishedJobs (20130521133050)
Migrating to UpdateFinishedBuilds (20130521134224)
Migrating to RemoveUnusedBuildColumns (20130521134800)
Migrating to RemoveUnusedJobColumns (20130521141357)
Migrating to AddGithubIdToUsers (20130629122945)
Migrating to AddDefaultBranchToRepositories (20130629133531)
Migrating to AddGithubLanguageToRepositories (20130629174449)
Migrating to AddPurgedAtToLogs (20130701123456)
Migrating to RemoveUnusedRepositoryColumns (20130702123456)
Migrating to AddUniqueIndexOnUsersGithubIdAndRemoveUniqueIndexOnUsersLogin (20130702144325)
Migrating to AddExtraColumnsToOrganizations (20130705123456)
Migrating to AddIndexOnGithubIdToOrganizations (20130707164854)
Migrating to CreateAnnotations (20130709185200)
Migrating to CreateAnnotationProviders (20130709233500)
Migrating to AddAnnotationProviderIdToAnnotations (20130710000745)
Migrating to AddCanceledAtToJobsAndBuilds (20130726101124)
Migrating to AddIndexOnRepositoryGithubId (20130901183019)
Migrating to AddCachedMatrixIdsToBuilds (20130909203321)
Migrating to CreateIndexOnBuildsIdDescAndRepositoryIdAndEventType (20130910184823)
Migrating to AddUniqueIndexOnRepositoryGithubId (20130916101056)
Migrating to AddSettingsToRepositories (20130920135744)
Migrating to RemoveWorkersTableAndIndexes (20131104101056)
Migrating to RemoveEventsTable (20131109101056)
Migrating to RemoveAnnotationImageInfo (20140120225125)
Migrating to AddStatusToAnnotations (20140121003026)
Migrating to AddIndicesToRequests (20140204220926)
Migrating to AddIndicesToMemberships (20140210003014)
Migrating to RemoveUnusedIndices (20140210012509)
Migrating to AddRemovedInfoToLogs (20140612131826)
Migrating to AddEducationFieldToUser (20140827121945)
Migrating to JobsAddReceivedAt (20150121135400)
Migrating to BuildsAddReceivedAt (20150121135401)
Migrating to AddIndexOnRepositoryIdToCommits (20150204144312)
Migrating to IndexRequestsOnCreatedAt (20150210170900)
Migrating to CreateBranches (20150223125700)
Migrating to AddNextBuildNumberToRepository (20150311020321)
Migrating to AddActiveIndexToRepository (20150316020321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToBuilds (20150316080321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToRepositories (20150316100321)
Migrating to AddSlugIndexToRepositories (20150317004600)
Migrating to AddTokenIndexToTokens (20150317020321)
Migrating to AddLoginIndexToOrganizations (20150317080321)
Migrating to AddLowerCaseIndices (20150414001337)
Migrating to RepositoriesAddIndexOwnerName (20150528101600)
Migrating to RepositoriesAddIndexName (20150528101601)
Migrating to RepositoriesDropIndexOwnerNameName (20150528101602)
Migrating to BuildsAddIndexEventType (20150528101603)
Migrating to BuildsAddIndexRepositoryId (20150528101604)
Migrating to BuildsAddIndexState (20150528101605)
Migrating to BuildsAddIndexBranch (20150528101607)
Migrating to BuildsDropIndexRepositoryIdAndState (20150528101608)
Migrating to BuildsDropIndexRepositoryIdAndEventType (20150528101609)
Migrating to BuildsDropIndexIdRepositoryIdAndEventTypeDesc (20150528101610)
Migrating to BuildsDropIndexRepositoryIdAndEventTypeAndStateAndBranch (20150528101611)
Migrating to JobsAddIndexOwnerId (20150610143500)
Migrating to JobsAddIndexOwnerType (20150610143501)
Migrating to JobsAddIndexSourceId (20150610143502)
Migrating to JobsAddIndexSourceType (20150610143503)
Migrating to JobsAddIndexType (20150610143504)
Migrating to JobsDropIndexOwnerIdAndOwnerTypeAndState (20150610143505)
Migrating to JobsDropIndexStateOwnerTypeOwnerId (20150610143506)
Migrating to JobsDropIndexTypeAndSourceIdAndSourceType (20150610143507)
Migrating to JobsAddIndexState (20150610143508)
Migrating to JobsAddIndexQueue (20150610143509)
Migrating to TokensAddIndexUserId (20150610143510)
Migrating to ReposAddInvalidatedAt (20150629231300)
  [1m[35m (0.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateRepositories (20101126174706)
Migrating to CreateBuilds (20101126174715)
Migrating to DeviseCreateUsers (20110109130532)
Migrating to RepositoriesAddUsername (20110116155100)
Migrating to CreateTokens (20110130102621)
Migrating to AddBuildParentIdAndConfiguration (20110301071656)
Migrating to RepositoriesDenormalizeLastBuildAttributes (20110316174721)
Migrating to RepositoriesAddOwnerNameAndOwnerEmail (20110321075539)
Migrating to RepositoryStripOwnerNameFromName (20110321171101)
Migrating to CreateHistoriesTable (20110411171936)
Migrating to RenameHistoriesToRailsAdminHistories (20110411171937)
Migrating to AddAdminFlagToUser (20110411172518)
Migrating to BuildsAddRef (20110413101057)
Migrating to BuildsAddGithubPayload (20110414131100)
Migrating to AddGithubIdToUsersTable (20110503150504)
Migrating to RepositoriesChangeOwnerEmailType (20110523012243)
Migrating to AddGithubOauthTokenToUser (20110611203537)
Migrating to AddCompareUrlToBuild (20110613210252)
Migrating to BuildsRemoveJobId (20110615152003)
Migrating to BuildRemoveLastBuiltAt (20110616211744)
Migrating to AddMissingIndexes (20110617114728)
Migrating to AddActiveToRepositories (20110619100906)
Migrating to StoreTokenInBuild (20110729094426)
Migrating to CreateRequestsCommitsAndTasks (20110801161819)
Migrating to RepositoryRenameIsActiveToActive (20110805030147)
Migrating to TasksAddTags (20110819232908)
Migrating to CacheOneNumberForSharedBuildsTasksSequence (20110911204538)
Migrating to RenameTasksToJobs (20111107134436)
Migrating to CreateArtifacts (20111107134437)
Migrating to CreateWorkers (20111107134438)
Migrating to JobsAddRetries (20111107134439)
Migrating to RemoveRailsAdmin (20111107134440)
Migrating to AddIndexesToJobs (20111128235043)
Migrating to AddRepositoryIdIndexToJobs (20111129014329)
Migrating to AddOwnerAndTypeIndexToJobs (20111129022625)
Migrating to WorkersAddPayloadAndLastError (20111201113500)
Migrating to RepositoriesAddDescriptionAndLastLanguage (20111203002341)
Migrating to BuildsAddArchivedAt (20111203221720)
Migrating to MimicProductionDb (20111207093700)
Migrating to BuildsAddDuration (20111212103859)
Migrating to RepositoriesAddLastBuildDuration (20111212112411)
Migrating to CreateSslKeys (20111214173922)
Migrating to AddAllowFailureToJobs (20120114125404)
Migrating to AddPullRequestFieldsToRequest (20120216133223)
Migrating to AddGravatarIdToUsers (20120222082522)
Migrating to OrganizationsCreate (20120301131209)
Migrating to JobsRenameOwnerToSource (20120304000502)
Migrating to RepositoriesAddOwner (20120304000503)
Migrating to BuildsAddOwner (20120304000504)
Migrating to JobsAddOwner (20120304000505)
Migrating to RequestsAddOwner (20120304000506)
Migrating to AddLocaleToUser (20120311234933)
Migrating to CreateMemberships (20120316123726)
Migrating to RepositoriesAddPrivate (20120319170001)
Migrating to CreateUrls (20120324104051)
Migrating to CopyStatusToResult (20120505165100)
Migrating to RequestsAddIndexOnHeadCommit (20120511171900)
Migrating to CreatePermissions (20120521174400)
Migrating to BuildsAddPreviousResult (20120527235800)
Migrating to AddSyncInfoToUser (20120713140816)
Migrating to RenameInSyncToIsSyncing (20120713153215)
Migrating to AddQueueToWorkers (20120725005300)
Migrating to AddJobsIndexOnStateOwnerTypeOwnerId (20120727151900)
Migrating to AddQueuedAtToJobs (20120731005301)
Migrating to AddPushAndPullToPermissions (20120802001001)
Migrating to AddBuildsIndexOnRepositoryIdAndState (20120911160000)
Migrating to ArtifactsAddAggregatedAt (20120911230000)
Migrating to AddArtifactParts (20120911230001)
Migrating to BuildsAddIndexOnFinishedAt (20120915012000)
Migrating to CommitsAddIndexOnBranch (20120915012001)
Migrating to JobsAddIndexOnCreatedAt (20120915150000)
Migrating to CreateEvents (20121015002500)
Migrating to RequestsAddResultAndMessage (20121015002501)
Migrating to CreateBroadcasts (20121017040100)
Migrating to EventsChangeDataToText (20121017040200)
Migrating to AddEventTypeToBuilds (20121018201301)
Migrating to UpdateEventTypeOnBuilds (20121018203728)
Migrating to AddIndexOnRepositoryIdAndEventTypeToBuilds (20121018210156)
Migrating to RepositoriesAddLastBuildState (20121125122700)
Migrating to BuildsAddPreviousState (20121125122701)
Migrating to ArtifactPartsAddFinal (20121222125200)
Migrating to ArtifactPartsChangeContentToText (20121222125300)
Migrating to ArtifactPartsAddIndexOnArtifactId (20121222140200)
Migrating to ArtifactPartsRemoveIndexOnArtifactId (20121223162300)
Migrating to AddGithubScopesToUser (20130107165057)
Migrating to AddIndexOnLastSeenAtToWorkers (20130115125836)
Migrating to CacheFullNameInWorkers (20130115145728)
Migrating to ArtifactsAddArchivedAt (20130125002600)
Migrating to ArtifactsAddArchivingAndVerified (20130125171100)
Migrating to CreateEmails (20130129142703)
Migrating to CreateLogs (20130207030700)
Migrating to CreateLogParts (20130207030701)
Migrating to AddReferenceOnLogPartsLogId (20130208124253)
Migrating to RenameArtifacts (20130208135800)
Migrating to DropArtifacts (20130208135801)
Migrating to AddNotNullConstraintOnLogPartsLogId (20130208215252)
Migrating to AddPullRequestTitleToBuilds (20130311211101)
Migrating to AddPullRequestNumberToBuilds (20130327100801)
Migrating to AddIndexToBuildsRequestId (20130418101437)
Migrating to AddIndexToJobsOnOwnerIdOwnerTypeAndState (20130418103306)
Migrating to AddBranchToBuilds (20130504230850)
Migrating to AddMoreIndexesToBuilds (20130505023259)
Migrating to AddIndexOnBuildState (20130521115725)
Migrating to UpdateFinishedJobs (20130521133050)
Migrating to UpdateFinishedBuilds (20130521134224)
Migrating to RemoveUnusedBuildColumns (20130521134800)
Migrating to RemoveUnusedJobColumns (20130521141357)
Migrating to AddGithubIdToUsers (20130629122945)
Migrating to AddDefaultBranchToRepositories (20130629133531)
Migrating to AddGithubLanguageToRepositories (20130629174449)
Migrating to AddPurgedAtToLogs (20130701123456)
Migrating to RemoveUnusedRepositoryColumns (20130702123456)
Migrating to AddUniqueIndexOnUsersGithubIdAndRemoveUniqueIndexOnUsersLogin (20130702144325)
Migrating to AddExtraColumnsToOrganizations (20130705123456)
Migrating to AddIndexOnGithubIdToOrganizations (20130707164854)
Migrating to CreateAnnotations (20130709185200)
Migrating to CreateAnnotationProviders (20130709233500)
Migrating to AddAnnotationProviderIdToAnnotations (20130710000745)
Migrating to AddCanceledAtToJobsAndBuilds (20130726101124)
Migrating to AddIndexOnRepositoryGithubId (20130901183019)
Migrating to AddCachedMatrixIdsToBuilds (20130909203321)
Migrating to CreateIndexOnBuildsIdDescAndRepositoryIdAndEventType (20130910184823)
Migrating to AddUniqueIndexOnRepositoryGithubId (20130916101056)
Migrating to AddSettingsToRepositories (20130920135744)
Migrating to RemoveWorkersTableAndIndexes (20131104101056)
Migrating to RemoveEventsTable (20131109101056)
Migrating to RemoveAnnotationImageInfo (20140120225125)
Migrating to AddStatusToAnnotations (20140121003026)
Migrating to AddIndicesToRequests (20140204220926)
Migrating to AddIndicesToMemberships (20140210003014)
Migrating to RemoveUnusedIndices (20140210012509)
Migrating to AddRemovedInfoToLogs (20140612131826)
Migrating to AddEducationFieldToUser (20140827121945)
Migrating to JobsAddReceivedAt (20150121135400)
Migrating to BuildsAddReceivedAt (20150121135401)
Migrating to AddIndexOnRepositoryIdToCommits (20150204144312)
Migrating to IndexRequestsOnCreatedAt (20150210170900)
Migrating to CreateBranches (20150223125700)
Migrating to AddNextBuildNumberToRepository (20150311020321)
Migrating to AddActiveIndexToRepository (20150316020321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToBuilds (20150316080321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToRepositories (20150316100321)
Migrating to AddSlugIndexToRepositories (20150317004600)
Migrating to AddTokenIndexToTokens (20150317020321)
Migrating to AddLoginIndexToOrganizations (20150317080321)
Migrating to AddLowerCaseIndices (20150414001337)
Migrating to RepositoriesAddIndexOwnerName (20150528101600)
Migrating to RepositoriesAddIndexName (20150528101601)
Migrating to RepositoriesDropIndexOwnerNameName (20150528101602)
Migrating to BuildsAddIndexEventType (20150528101603)
Migrating to BuildsAddIndexRepositoryId (20150528101604)
Migrating to BuildsAddIndexState (20150528101605)
Migrating to BuildsAddIndexBranch (20150528101607)
Migrating to BuildsDropIndexRepositoryIdAndState (20150528101608)
Migrating to BuildsDropIndexRepositoryIdAndEventType (20150528101609)
Migrating to BuildsDropIndexIdRepositoryIdAndEventTypeDesc (20150528101610)
Migrating to BuildsDropIndexRepositoryIdAndEventTypeAndStateAndBranch (20150528101611)
Migrating to JobsAddIndexOwnerId (20150610143500)
Migrating to JobsAddIndexOwnerType (20150610143501)
Migrating to JobsAddIndexSourceId (20150610143502)
Migrating to JobsAddIndexSourceType (20150610143503)
Migrating to JobsAddIndexType (20150610143504)
Migrating to JobsDropIndexOwnerIdAndOwnerTypeAndState (20150610143505)
Migrating to JobsDropIndexStateOwnerTypeOwnerId (20150610143506)
Migrating to JobsDropIndexTypeAndSourceIdAndSourceType (20150610143507)
Migrating to JobsAddIndexState (20150610143508)
Migrating to JobsAddIndexQueue (20150610143509)
Migrating to TokensAddIndexUserId (20150610143510)
Migrating to ReposAddInvalidatedAt (20150629231300)
  [1m[35m (0.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateRepositories (20101126174706)
Migrating to CreateBuilds (20101126174715)
Migrating to DeviseCreateUsers (20110109130532)
Migrating to RepositoriesAddUsername (20110116155100)
Migrating to CreateTokens (20110130102621)
Migrating to AddBuildParentIdAndConfiguration (20110301071656)
Migrating to RepositoriesDenormalizeLastBuildAttributes (20110316174721)
Migrating to RepositoriesAddOwnerNameAndOwnerEmail (20110321075539)
Migrating to RepositoryStripOwnerNameFromName (20110321171101)
Migrating to CreateHistoriesTable (20110411171936)
Migrating to RenameHistoriesToRailsAdminHistories (20110411171937)
Migrating to AddAdminFlagToUser (20110411172518)
Migrating to BuildsAddRef (20110413101057)
Migrating to BuildsAddGithubPayload (20110414131100)
Migrating to AddGithubIdToUsersTable (20110503150504)
Migrating to RepositoriesChangeOwnerEmailType (20110523012243)
Migrating to AddGithubOauthTokenToUser (20110611203537)
Migrating to AddCompareUrlToBuild (20110613210252)
Migrating to BuildsRemoveJobId (20110615152003)
Migrating to BuildRemoveLastBuiltAt (20110616211744)
Migrating to AddMissingIndexes (20110617114728)
Migrating to AddActiveToRepositories (20110619100906)
Migrating to StoreTokenInBuild (20110729094426)
Migrating to CreateRequestsCommitsAndTasks (20110801161819)
Migrating to RepositoryRenameIsActiveToActive (20110805030147)
Migrating to TasksAddTags (20110819232908)
Migrating to CacheOneNumberForSharedBuildsTasksSequence (20110911204538)
Migrating to RenameTasksToJobs (20111107134436)
Migrating to CreateArtifacts (20111107134437)
Migrating to CreateWorkers (20111107134438)
Migrating to JobsAddRetries (20111107134439)
Migrating to RemoveRailsAdmin (20111107134440)
Migrating to AddIndexesToJobs (20111128235043)
Migrating to AddRepositoryIdIndexToJobs (20111129014329)
Migrating to AddOwnerAndTypeIndexToJobs (20111129022625)
Migrating to WorkersAddPayloadAndLastError (20111201113500)
Migrating to RepositoriesAddDescriptionAndLastLanguage (20111203002341)
Migrating to BuildsAddArchivedAt (20111203221720)
Migrating to MimicProductionDb (20111207093700)
Migrating to BuildsAddDuration (20111212103859)
Migrating to RepositoriesAddLastBuildDuration (20111212112411)
Migrating to CreateSslKeys (20111214173922)
Migrating to AddAllowFailureToJobs (20120114125404)
Migrating to AddPullRequestFieldsToRequest (20120216133223)
Migrating to AddGravatarIdToUsers (20120222082522)
Migrating to OrganizationsCreate (20120301131209)
Migrating to JobsRenameOwnerToSource (20120304000502)
Migrating to RepositoriesAddOwner (20120304000503)
Migrating to BuildsAddOwner (20120304000504)
Migrating to JobsAddOwner (20120304000505)
Migrating to RequestsAddOwner (20120304000506)
Migrating to AddLocaleToUser (20120311234933)
Migrating to CreateMemberships (20120316123726)
Migrating to RepositoriesAddPrivate (20120319170001)
Migrating to CreateUrls (20120324104051)
Migrating to CopyStatusToResult (20120505165100)
Migrating to RequestsAddIndexOnHeadCommit (20120511171900)
Migrating to CreatePermissions (20120521174400)
Migrating to BuildsAddPreviousResult (20120527235800)
Migrating to AddSyncInfoToUser (20120713140816)
Migrating to RenameInSyncToIsSyncing (20120713153215)
Migrating to AddQueueToWorkers (20120725005300)
Migrating to AddJobsIndexOnStateOwnerTypeOwnerId (20120727151900)
Migrating to AddQueuedAtToJobs (20120731005301)
Migrating to AddPushAndPullToPermissions (20120802001001)
Migrating to AddBuildsIndexOnRepositoryIdAndState (20120911160000)
Migrating to ArtifactsAddAggregatedAt (20120911230000)
Migrating to AddArtifactParts (20120911230001)
Migrating to BuildsAddIndexOnFinishedAt (20120915012000)
Migrating to CommitsAddIndexOnBranch (20120915012001)
Migrating to JobsAddIndexOnCreatedAt (20120915150000)
Migrating to CreateEvents (20121015002500)
Migrating to RequestsAddResultAndMessage (20121015002501)
Migrating to CreateBroadcasts (20121017040100)
Migrating to EventsChangeDataToText (20121017040200)
Migrating to AddEventTypeToBuilds (20121018201301)
Migrating to UpdateEventTypeOnBuilds (20121018203728)
Migrating to AddIndexOnRepositoryIdAndEventTypeToBuilds (20121018210156)
Migrating to RepositoriesAddLastBuildState (20121125122700)
Migrating to BuildsAddPreviousState (20121125122701)
Migrating to ArtifactPartsAddFinal (20121222125200)
Migrating to ArtifactPartsChangeContentToText (20121222125300)
Migrating to ArtifactPartsAddIndexOnArtifactId (20121222140200)
Migrating to ArtifactPartsRemoveIndexOnArtifactId (20121223162300)
Migrating to AddGithubScopesToUser (20130107165057)
Migrating to AddIndexOnLastSeenAtToWorkers (20130115125836)
Migrating to CacheFullNameInWorkers (20130115145728)
Migrating to ArtifactsAddArchivedAt (20130125002600)
Migrating to ArtifactsAddArchivingAndVerified (20130125171100)
Migrating to CreateEmails (20130129142703)
Migrating to CreateLogs (20130207030700)
Migrating to CreateLogParts (20130207030701)
Migrating to AddReferenceOnLogPartsLogId (20130208124253)
Migrating to RenameArtifacts (20130208135800)
Migrating to DropArtifacts (20130208135801)
Migrating to AddNotNullConstraintOnLogPartsLogId (20130208215252)
Migrating to AddPullRequestTitleToBuilds (20130311211101)
Migrating to AddPullRequestNumberToBuilds (20130327100801)
Migrating to AddIndexToBuildsRequestId (20130418101437)
Migrating to AddIndexToJobsOnOwnerIdOwnerTypeAndState (20130418103306)
Migrating to AddBranchToBuilds (20130504230850)
Migrating to AddMoreIndexesToBuilds (20130505023259)
Migrating to AddIndexOnBuildState (20130521115725)
Migrating to UpdateFinishedJobs (20130521133050)
Migrating to UpdateFinishedBuilds (20130521134224)
Migrating to RemoveUnusedBuildColumns (20130521134800)
Migrating to RemoveUnusedJobColumns (20130521141357)
Migrating to AddGithubIdToUsers (20130629122945)
Migrating to AddDefaultBranchToRepositories (20130629133531)
Migrating to AddGithubLanguageToRepositories (20130629174449)
Migrating to AddPurgedAtToLogs (20130701123456)
Migrating to RemoveUnusedRepositoryColumns (20130702123456)
Migrating to AddUniqueIndexOnUsersGithubIdAndRemoveUniqueIndexOnUsersLogin (20130702144325)
Migrating to AddExtraColumnsToOrganizations (20130705123456)
Migrating to AddIndexOnGithubIdToOrganizations (20130707164854)
Migrating to CreateAnnotations (20130709185200)
Migrating to CreateAnnotationProviders (20130709233500)
Migrating to AddAnnotationProviderIdToAnnotations (20130710000745)
Migrating to AddCanceledAtToJobsAndBuilds (20130726101124)
Migrating to AddIndexOnRepositoryGithubId (20130901183019)
Migrating to AddCachedMatrixIdsToBuilds (20130909203321)
Migrating to CreateIndexOnBuildsIdDescAndRepositoryIdAndEventType (20130910184823)
Migrating to AddUniqueIndexOnRepositoryGithubId (20130916101056)
Migrating to AddSettingsToRepositories (20130920135744)
Migrating to RemoveWorkersTableAndIndexes (20131104101056)
Migrating to RemoveEventsTable (20131109101056)
Migrating to RemoveAnnotationImageInfo (20140120225125)
Migrating to AddStatusToAnnotations (20140121003026)
Migrating to AddIndicesToRequests (20140204220926)
Migrating to AddIndicesToMemberships (20140210003014)
Migrating to RemoveUnusedIndices (20140210012509)
Migrating to AddRemovedInfoToLogs (20140612131826)
Migrating to AddEducationFieldToUser (20140827121945)
Migrating to JobsAddReceivedAt (20150121135400)
Migrating to BuildsAddReceivedAt (20150121135401)
Migrating to AddIndexOnRepositoryIdToCommits (20150204144312)
Migrating to IndexRequestsOnCreatedAt (20150210170900)
Migrating to CreateBranches (20150223125700)
Migrating to AddNextBuildNumberToRepository (20150311020321)
Migrating to AddActiveIndexToRepository (20150316020321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToBuilds (20150316080321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToRepositories (20150316100321)
Migrating to AddSlugIndexToRepositories (20150317004600)
Migrating to AddTokenIndexToTokens (20150317020321)
Migrating to AddLoginIndexToOrganizations (20150317080321)
Migrating to AddLowerCaseIndices (20150414001337)
Migrating to RepositoriesAddIndexOwnerName (20150528101600)
Migrating to RepositoriesAddIndexName (20150528101601)
Migrating to RepositoriesDropIndexOwnerNameName (20150528101602)
Migrating to BuildsAddIndexEventType (20150528101603)
Migrating to BuildsAddIndexRepositoryId (20150528101604)
Migrating to BuildsAddIndexState (20150528101605)
Migrating to BuildsAddIndexBranch (20150528101607)
Migrating to BuildsDropIndexRepositoryIdAndState (20150528101608)
Migrating to BuildsDropIndexRepositoryIdAndEventType (20150528101609)
Migrating to BuildsDropIndexIdRepositoryIdAndEventTypeDesc (20150528101610)
Migrating to BuildsDropIndexRepositoryIdAndEventTypeAndStateAndBranch (20150528101611)
Migrating to JobsAddIndexOwnerId (20150610143500)
Migrating to JobsAddIndexOwnerType (20150610143501)
Migrating to JobsAddIndexSourceId (20150610143502)
Migrating to JobsAddIndexSourceType (20150610143503)
Migrating to JobsAddIndexType (20150610143504)
Migrating to JobsDropIndexOwnerIdAndOwnerTypeAndState (20150610143505)
Migrating to JobsDropIndexStateOwnerTypeOwnerId (20150610143506)
Migrating to JobsDropIndexTypeAndSourceIdAndSourceType (20150610143507)
Migrating to JobsAddIndexState (20150610143508)
Migrating to JobsAddIndexQueue (20150610143509)
Migrating to TokensAddIndexUserId (20150610143510)
Migrating to ReposAddInvalidatedAt (20150629231300)
  [1m[35m (0.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateRepositories (20101126174706)
Migrating to CreateBuilds (20101126174715)
Migrating to DeviseCreateUsers (20110109130532)
Migrating to RepositoriesAddUsername (20110116155100)
Migrating to CreateTokens (20110130102621)
Migrating to AddBuildParentIdAndConfiguration (20110301071656)
Migrating to RepositoriesDenormalizeLastBuildAttributes (20110316174721)
Migrating to RepositoriesAddOwnerNameAndOwnerEmail (20110321075539)
Migrating to RepositoryStripOwnerNameFromName (20110321171101)
Migrating to CreateHistoriesTable (20110411171936)
Migrating to RenameHistoriesToRailsAdminHistories (20110411171937)
Migrating to AddAdminFlagToUser (20110411172518)
Migrating to BuildsAddRef (20110413101057)
Migrating to BuildsAddGithubPayload (20110414131100)
Migrating to AddGithubIdToUsersTable (20110503150504)
Migrating to RepositoriesChangeOwnerEmailType (20110523012243)
Migrating to AddGithubOauthTokenToUser (20110611203537)
Migrating to AddCompareUrlToBuild (20110613210252)
Migrating to BuildsRemoveJobId (20110615152003)
Migrating to BuildRemoveLastBuiltAt (20110616211744)
Migrating to AddMissingIndexes (20110617114728)
Migrating to AddActiveToRepositories (20110619100906)
Migrating to StoreTokenInBuild (20110729094426)
Migrating to CreateRequestsCommitsAndTasks (20110801161819)
Migrating to RepositoryRenameIsActiveToActive (20110805030147)
Migrating to TasksAddTags (20110819232908)
Migrating to CacheOneNumberForSharedBuildsTasksSequence (20110911204538)
Migrating to RenameTasksToJobs (20111107134436)
Migrating to CreateArtifacts (20111107134437)
Migrating to CreateWorkers (20111107134438)
Migrating to JobsAddRetries (20111107134439)
Migrating to RemoveRailsAdmin (20111107134440)
Migrating to AddIndexesToJobs (20111128235043)
Migrating to AddRepositoryIdIndexToJobs (20111129014329)
Migrating to AddOwnerAndTypeIndexToJobs (20111129022625)
Migrating to WorkersAddPayloadAndLastError (20111201113500)
Migrating to RepositoriesAddDescriptionAndLastLanguage (20111203002341)
Migrating to BuildsAddArchivedAt (20111203221720)
Migrating to MimicProductionDb (20111207093700)
Migrating to BuildsAddDuration (20111212103859)
Migrating to RepositoriesAddLastBuildDuration (20111212112411)
Migrating to CreateSslKeys (20111214173922)
Migrating to AddAllowFailureToJobs (20120114125404)
Migrating to AddPullRequestFieldsToRequest (20120216133223)
Migrating to AddGravatarIdToUsers (20120222082522)
Migrating to OrganizationsCreate (20120301131209)
Migrating to JobsRenameOwnerToSource (20120304000502)
Migrating to RepositoriesAddOwner (20120304000503)
Migrating to BuildsAddOwner (20120304000504)
Migrating to JobsAddOwner (20120304000505)
Migrating to RequestsAddOwner (20120304000506)
Migrating to AddLocaleToUser (20120311234933)
Migrating to CreateMemberships (20120316123726)
Migrating to RepositoriesAddPrivate (20120319170001)
Migrating to CreateUrls (20120324104051)
Migrating to CopyStatusToResult (20120505165100)
Migrating to RequestsAddIndexOnHeadCommit (20120511171900)
Migrating to CreatePermissions (20120521174400)
Migrating to BuildsAddPreviousResult (20120527235800)
Migrating to AddSyncInfoToUser (20120713140816)
Migrating to RenameInSyncToIsSyncing (20120713153215)
Migrating to AddQueueToWorkers (20120725005300)
Migrating to AddJobsIndexOnStateOwnerTypeOwnerId (20120727151900)
Migrating to AddQueuedAtToJobs (20120731005301)
Migrating to AddPushAndPullToPermissions (20120802001001)
Migrating to AddBuildsIndexOnRepositoryIdAndState (20120911160000)
Migrating to ArtifactsAddAggregatedAt (20120911230000)
Migrating to AddArtifactParts (20120911230001)
Migrating to BuildsAddIndexOnFinishedAt (20120915012000)
Migrating to CommitsAddIndexOnBranch (20120915012001)
Migrating to JobsAddIndexOnCreatedAt (20120915150000)
Migrating to CreateEvents (20121015002500)
Migrating to RequestsAddResultAndMessage (20121015002501)
Migrating to CreateBroadcasts (20121017040100)
Migrating to EventsChangeDataToText (20121017040200)
Migrating to AddEventTypeToBuilds (20121018201301)
Migrating to UpdateEventTypeOnBuilds (20121018203728)
Migrating to AddIndexOnRepositoryIdAndEventTypeToBuilds (20121018210156)
Migrating to RepositoriesAddLastBuildState (20121125122700)
Migrating to BuildsAddPreviousState (20121125122701)
Migrating to ArtifactPartsAddFinal (20121222125200)
Migrating to ArtifactPartsChangeContentToText (20121222125300)
Migrating to ArtifactPartsAddIndexOnArtifactId (20121222140200)
Migrating to ArtifactPartsRemoveIndexOnArtifactId (20121223162300)
Migrating to AddGithubScopesToUser (20130107165057)
Migrating to AddIndexOnLastSeenAtToWorkers (20130115125836)
Migrating to CacheFullNameInWorkers (20130115145728)
Migrating to ArtifactsAddArchivedAt (20130125002600)
Migrating to ArtifactsAddArchivingAndVerified (20130125171100)
Migrating to CreateEmails (20130129142703)
Migrating to CreateLogs (20130207030700)
Migrating to CreateLogParts (20130207030701)
Migrating to AddReferenceOnLogPartsLogId (20130208124253)
Migrating to RenameArtifacts (20130208135800)
Migrating to DropArtifacts (20130208135801)
Migrating to AddNotNullConstraintOnLogPartsLogId (20130208215252)
Migrating to AddPullRequestTitleToBuilds (20130311211101)
Migrating to AddPullRequestNumberToBuilds (20130327100801)
Migrating to AddIndexToBuildsRequestId (20130418101437)
Migrating to AddIndexToJobsOnOwnerIdOwnerTypeAndState (20130418103306)
Migrating to AddBranchToBuilds (20130504230850)
Migrating to AddMoreIndexesToBuilds (20130505023259)
Migrating to AddIndexOnBuildState (20130521115725)
Migrating to UpdateFinishedJobs (20130521133050)
Migrating to UpdateFinishedBuilds (20130521134224)
Migrating to RemoveUnusedBuildColumns (20130521134800)
Migrating to RemoveUnusedJobColumns (20130521141357)
Migrating to AddGithubIdToUsers (20130629122945)
Migrating to AddDefaultBranchToRepositories (20130629133531)
Migrating to AddGithubLanguageToRepositories (20130629174449)
Migrating to AddPurgedAtToLogs (20130701123456)
Migrating to RemoveUnusedRepositoryColumns (20130702123456)
Migrating to AddUniqueIndexOnUsersGithubIdAndRemoveUniqueIndexOnUsersLogin (20130702144325)
Migrating to AddExtraColumnsToOrganizations (20130705123456)
Migrating to AddIndexOnGithubIdToOrganizations (20130707164854)
Migrating to CreateAnnotations (20130709185200)
Migrating to CreateAnnotationProviders (20130709233500)
Migrating to AddAnnotationProviderIdToAnnotations (20130710000745)
Migrating to AddCanceledAtToJobsAndBuilds (20130726101124)
Migrating to AddIndexOnRepositoryGithubId (20130901183019)
Migrating to AddCachedMatrixIdsToBuilds (20130909203321)
Migrating to CreateIndexOnBuildsIdDescAndRepositoryIdAndEventType (20130910184823)
Migrating to AddUniqueIndexOnRepositoryGithubId (20130916101056)
Migrating to AddSettingsToRepositories (20130920135744)
Migrating to RemoveWorkersTableAndIndexes (20131104101056)
Migrating to RemoveEventsTable (20131109101056)
Migrating to RemoveAnnotationImageInfo (20140120225125)
Migrating to AddStatusToAnnotations (20140121003026)
Migrating to AddIndicesToRequests (20140204220926)
Migrating to AddIndicesToMemberships (20140210003014)
Migrating to RemoveUnusedIndices (20140210012509)
Migrating to AddRemovedInfoToLogs (20140612131826)
Migrating to AddEducationFieldToUser (20140827121945)
Migrating to JobsAddReceivedAt (20150121135400)
Migrating to BuildsAddReceivedAt (20150121135401)
Migrating to AddIndexOnRepositoryIdToCommits (20150204144312)
Migrating to IndexRequestsOnCreatedAt (20150210170900)
Migrating to CreateBranches (20150223125700)
Migrating to AddNextBuildNumberToRepository (20150311020321)
Migrating to AddActiveIndexToRepository (20150316020321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToBuilds (20150316080321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToRepositories (20150316100321)
Migrating to AddSlugIndexToRepositories (20150317004600)
Migrating to AddTokenIndexToTokens (20150317020321)
Migrating to AddLoginIndexToOrganizations (20150317080321)
Migrating to AddLowerCaseIndices (20150414001337)
Migrating to RepositoriesAddIndexOwnerName (20150528101600)
Migrating to RepositoriesAddIndexName (20150528101601)
Migrating to RepositoriesDropIndexOwnerNameName (20150528101602)
Migrating to BuildsAddIndexEventType (20150528101603)
Migrating to BuildsAddIndexRepositoryId (20150528101604)
Migrating to BuildsAddIndexState (20150528101605)
Migrating to BuildsAddIndexBranch (20150528101607)
Migrating to BuildsDropIndexRepositoryIdAndState (20150528101608)
Migrating to BuildsDropIndexRepositoryIdAndEventType (20150528101609)
Migrating to BuildsDropIndexIdRepositoryIdAndEventTypeDesc (20150528101610)
Migrating to BuildsDropIndexRepositoryIdAndEventTypeAndStateAndBranch (20150528101611)
Migrating to JobsAddIndexOwnerId (20150610143500)
Migrating to JobsAddIndexOwnerType (20150610143501)
Migrating to JobsAddIndexSourceId (20150610143502)
Migrating to JobsAddIndexSourceType (20150610143503)
Migrating to JobsAddIndexType (20150610143504)
Migrating to JobsDropIndexOwnerIdAndOwnerTypeAndState (20150610143505)
Migrating to JobsDropIndexStateOwnerTypeOwnerId (20150610143506)
Migrating to JobsDropIndexTypeAndSourceIdAndSourceType (20150610143507)
Migrating to JobsAddIndexState (20150610143508)
Migrating to JobsAddIndexQueue (20150610143509)
Migrating to TokensAddIndexUserId (20150610143510)
Migrating to ReposAddInvalidatedAt (20150629231300)
  [1m[35m (0.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
  [1m[36m (2.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateRepositories (20101126174706)
Migrating to CreateBuilds (20101126174715)
Migrating to DeviseCreateUsers (20110109130532)
Migrating to RepositoriesAddUsername (20110116155100)
Migrating to CreateTokens (20110130102621)
Migrating to AddBuildParentIdAndConfiguration (20110301071656)
Migrating to RepositoriesDenormalizeLastBuildAttributes (20110316174721)
Migrating to RepositoriesAddOwnerNameAndOwnerEmail (20110321075539)
Migrating to RepositoryStripOwnerNameFromName (20110321171101)
Migrating to CreateHistoriesTable (20110411171936)
Migrating to RenameHistoriesToRailsAdminHistories (20110411171937)
Migrating to AddAdminFlagToUser (20110411172518)
Migrating to BuildsAddRef (20110413101057)
Migrating to BuildsAddGithubPayload (20110414131100)
Migrating to AddGithubIdToUsersTable (20110503150504)
Migrating to RepositoriesChangeOwnerEmailType (20110523012243)
Migrating to AddGithubOauthTokenToUser (20110611203537)
Migrating to AddCompareUrlToBuild (20110613210252)
Migrating to BuildsRemoveJobId (20110615152003)
Migrating to BuildRemoveLastBuiltAt (20110616211744)
Migrating to AddMissingIndexes (20110617114728)
Migrating to AddActiveToRepositories (20110619100906)
Migrating to StoreTokenInBuild (20110729094426)
Migrating to CreateRequestsCommitsAndTasks (20110801161819)
Migrating to RepositoryRenameIsActiveToActive (20110805030147)
Migrating to TasksAddTags (20110819232908)
Migrating to CacheOneNumberForSharedBuildsTasksSequence (20110911204538)
Migrating to RenameTasksToJobs (20111107134436)
Migrating to CreateArtifacts (20111107134437)
Migrating to CreateWorkers (20111107134438)
Migrating to JobsAddRetries (20111107134439)
Migrating to RemoveRailsAdmin (20111107134440)
Migrating to AddIndexesToJobs (20111128235043)
Migrating to AddRepositoryIdIndexToJobs (20111129014329)
Migrating to AddOwnerAndTypeIndexToJobs (20111129022625)
Migrating to WorkersAddPayloadAndLastError (20111201113500)
Migrating to RepositoriesAddDescriptionAndLastLanguage (20111203002341)
Migrating to BuildsAddArchivedAt (20111203221720)
Migrating to MimicProductionDb (20111207093700)
Migrating to BuildsAddDuration (20111212103859)
Migrating to RepositoriesAddLastBuildDuration (20111212112411)
Migrating to CreateSslKeys (20111214173922)
Migrating to AddAllowFailureToJobs (20120114125404)
Migrating to AddPullRequestFieldsToRequest (20120216133223)
Migrating to AddGravatarIdToUsers (20120222082522)
Migrating to OrganizationsCreate (20120301131209)
Migrating to JobsRenameOwnerToSource (20120304000502)
Migrating to RepositoriesAddOwner (20120304000503)
Migrating to BuildsAddOwner (20120304000504)
Migrating to JobsAddOwner (20120304000505)
Migrating to RequestsAddOwner (20120304000506)
Migrating to AddLocaleToUser (20120311234933)
Migrating to CreateMemberships (20120316123726)
Migrating to RepositoriesAddPrivate (20120319170001)
Migrating to CreateUrls (20120324104051)
Migrating to CopyStatusToResult (20120505165100)
Migrating to RequestsAddIndexOnHeadCommit (20120511171900)
Migrating to CreatePermissions (20120521174400)
Migrating to BuildsAddPreviousResult (20120527235800)
Migrating to AddSyncInfoToUser (20120713140816)
Migrating to RenameInSyncToIsSyncing (20120713153215)
Migrating to AddQueueToWorkers (20120725005300)
Migrating to AddJobsIndexOnStateOwnerTypeOwnerId (20120727151900)
Migrating to AddQueuedAtToJobs (20120731005301)
Migrating to AddPushAndPullToPermissions (20120802001001)
Migrating to AddBuildsIndexOnRepositoryIdAndState (20120911160000)
Migrating to ArtifactsAddAggregatedAt (20120911230000)
Migrating to AddArtifactParts (20120911230001)
Migrating to BuildsAddIndexOnFinishedAt (20120915012000)
Migrating to CommitsAddIndexOnBranch (20120915012001)
Migrating to JobsAddIndexOnCreatedAt (20120915150000)
Migrating to CreateEvents (20121015002500)
Migrating to RequestsAddResultAndMessage (20121015002501)
Migrating to CreateBroadcasts (20121017040100)
Migrating to EventsChangeDataToText (20121017040200)
Migrating to AddEventTypeToBuilds (20121018201301)
Migrating to UpdateEventTypeOnBuilds (20121018203728)
Migrating to AddIndexOnRepositoryIdAndEventTypeToBuilds (20121018210156)
Migrating to RepositoriesAddLastBuildState (20121125122700)
Migrating to BuildsAddPreviousState (20121125122701)
Migrating to ArtifactPartsAddFinal (20121222125200)
Migrating to ArtifactPartsChangeContentToText (20121222125300)
Migrating to ArtifactPartsAddIndexOnArtifactId (20121222140200)
Migrating to ArtifactPartsRemoveIndexOnArtifactId (20121223162300)
Migrating to AddGithubScopesToUser (20130107165057)
Migrating to AddIndexOnLastSeenAtToWorkers (20130115125836)
Migrating to CacheFullNameInWorkers (20130115145728)
Migrating to ArtifactsAddArchivedAt (20130125002600)
Migrating to ArtifactsAddArchivingAndVerified (20130125171100)
Migrating to CreateEmails (20130129142703)
Migrating to CreateLogs (20130207030700)
Migrating to CreateLogParts (20130207030701)
Migrating to AddReferenceOnLogPartsLogId (20130208124253)
Migrating to RenameArtifacts (20130208135800)
Migrating to DropArtifacts (20130208135801)
Migrating to AddNotNullConstraintOnLogPartsLogId (20130208215252)
Migrating to AddPullRequestTitleToBuilds (20130311211101)
Migrating to AddPullRequestNumberToBuilds (20130327100801)
Migrating to AddIndexToBuildsRequestId (20130418101437)
Migrating to AddIndexToJobsOnOwnerIdOwnerTypeAndState (20130418103306)
Migrating to AddBranchToBuilds (20130504230850)
Migrating to AddMoreIndexesToBuilds (20130505023259)
Migrating to AddIndexOnBuildState (20130521115725)
Migrating to UpdateFinishedJobs (20130521133050)
Migrating to UpdateFinishedBuilds (20130521134224)
Migrating to RemoveUnusedBuildColumns (20130521134800)
Migrating to RemoveUnusedJobColumns (20130521141357)
Migrating to AddGithubIdToUsers (20130629122945)
Migrating to AddDefaultBranchToRepositories (20130629133531)
Migrating to AddGithubLanguageToRepositories (20130629174449)
Migrating to AddPurgedAtToLogs (20130701123456)
Migrating to RemoveUnusedRepositoryColumns (20130702123456)
Migrating to AddUniqueIndexOnUsersGithubIdAndRemoveUniqueIndexOnUsersLogin (20130702144325)
Migrating to AddExtraColumnsToOrganizations (20130705123456)
Migrating to AddIndexOnGithubIdToOrganizations (20130707164854)
Migrating to CreateAnnotations (20130709185200)
Migrating to CreateAnnotationProviders (20130709233500)
Migrating to AddAnnotationProviderIdToAnnotations (20130710000745)
Migrating to AddCanceledAtToJobsAndBuilds (20130726101124)
Migrating to AddIndexOnRepositoryGithubId (20130901183019)
Migrating to AddCachedMatrixIdsToBuilds (20130909203321)
Migrating to CreateIndexOnBuildsIdDescAndRepositoryIdAndEventType (20130910184823)
Migrating to AddUniqueIndexOnRepositoryGithubId (20130916101056)
Migrating to AddSettingsToRepositories (20130920135744)
Migrating to RemoveWorkersTableAndIndexes (20131104101056)
Migrating to RemoveEventsTable (20131109101056)
Migrating to RemoveAnnotationImageInfo (20140120225125)
Migrating to AddStatusToAnnotations (20140121003026)
Migrating to AddIndicesToRequests (20140204220926)
Migrating to AddIndicesToMemberships (20140210003014)
Migrating to RemoveUnusedIndices (20140210012509)
Migrating to AddRemovedInfoToLogs (20140612131826)
Migrating to AddEducationFieldToUser (20140827121945)
Migrating to JobsAddReceivedAt (20150121135400)
Migrating to BuildsAddReceivedAt (20150121135401)
Migrating to AddIndexOnRepositoryIdToCommits (20150204144312)
Migrating to IndexRequestsOnCreatedAt (20150210170900)
Migrating to CreateBranches (20150223125700)
Migrating to AddNextBuildNumberToRepository (20150311020321)
Migrating to AddActiveIndexToRepository (20150316020321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToBuilds (20150316080321)
Migrating to AddOwnerTypeAndOwnerIdIndexesToRepositories (20150316100321)
Migrating to AddSlugIndexToRepositories (20150317004600)
Migrating to AddTokenIndexToTokens (20150317020321)
Migrating to AddLoginIndexToOrganizations (20150317080321)
Migrating to AddLowerCaseIndices (20150414001337)
Migrating to RepositoriesAddIndexOwnerName (20150528101600)
Migrating to RepositoriesAddIndexName (20150528101601)
Migrating to RepositoriesDropIndexOwnerNameName (20150528101602)
Migrating to BuildsAddIndexEventType (20150528101603)
Migrating to BuildsAddIndexRepositoryId (20150528101604)
Migrating to BuildsAddIndexState (20150528101605)
Migrating to BuildsAddIndexBranch (20150528101607)
Migrating to BuildsDropIndexRepositoryIdAndState (20150528101608)
Migrating to BuildsDropIndexRepositoryIdAndEventType (20150528101609)
Migrating to BuildsDropIndexIdRepositoryIdAndEventTypeDesc (20150528101610)
Migrating to BuildsDropIndexRepositoryIdAndEventTypeAndStateAndBranch (20150528101611)
Migrating to JobsAddIndexOwnerId (20150610143500)
Migrating to JobsAddIndexOwnerType (20150610143501)
Migrating to JobsAddIndexSourceId (20150610143502)
Migrating to JobsAddIndexSourceType (20150610143503)
Migrating to JobsAddIndexType (20150610143504)
Migrating to JobsDropIndexOwnerIdAndOwnerTypeAndState (20150610143505)
Migrating to JobsDropIndexStateOwnerTypeOwnerId (20150610143506)
Migrating to JobsDropIndexTypeAndSourceIdAndSourceType (20150610143507)
Migrating to JobsAddIndexState (20150610143508)
Migrating to JobsAddIndexQueue (20150610143509)
Migrating to TokensAddIndexUserId (20150610143510)
Migrating to ReposAddInvalidatedAt (20150629231300)
Migrating to BroadcastsAddCategory (20150923131400)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "broadcasts" ADD COLUMN "category" character varying(255)[0m
PG::DuplicateColumn: ERROR:  column "category" of relation "broadcasts" already exists
: ALTER TABLE "broadcasts" ADD COLUMN "category" character varying(255)
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (11.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (13.5ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateRepositories (20101126174706)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (18.1ms)[0m  [1mCREATE TABLE "repositories" ("id" serial primary key, "name" character varying(255), "url" character varying(255), "last_duration" integer, "last_built_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20101126174706')
  [1m[36m (9.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateBuilds (20101126174715)
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36m (12.8ms)[0m  [1mCREATE TABLE "builds" ("id" serial primary key, "repository_id" integer, "number" integer, "status" integer, "started_at" timestamp, "finished_at" timestamp, "log" text DEFAULT '', "commit" character varying(255), "message" text, "committed_at" timestamp, "committer_name" character varying(255), "committer_email" character varying(255), "author_name" character varying(255), "author_email" character varying(255), "job_id" character varying(255), "agent" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20101126174715')
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
Migrating to DeviseCreateUsers (20110109130532)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (10.1ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying(255), "login" character varying(255), "email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (4.7ms)[0m  CREATE UNIQUE INDEX "index_users_on_login" ON "users" ("login")
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110109130532')[0m
  [1m[35m (3.4ms)[0m  COMMIT
Migrating to RepositoriesAddUsername (20110116155100)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "username" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110116155100')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateTokens (20110130102621)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (5.7ms)[0m  CREATE TABLE "tokens" ("id" serial primary key, "user_id" integer, "token" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110130102621')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to AddBuildParentIdAndConfiguration (20110301071656)
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "builds" ADD COLUMN "parent_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "config" text[0m
  [1m[35m (23.8ms)[0m  ALTER TABLE "builds" ALTER COLUMN "number" TYPE character varying(255)
  [1m[36m (5.1ms)[0m  [1mCREATE INDEX "index_builds_on_repository_id" ON "builds" ("repository_id")[0m
  [1m[35m (5.0ms)[0m  CREATE INDEX "index_builds_on_parent_id" ON "builds" ("parent_id")
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110301071656')[0m
  [1m[35m (2.8ms)[0m  COMMIT
Migrating to RepositoriesDenormalizeLastBuildAttributes (20110316174721)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_number" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_status" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_started_at" timestamp[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_finished_at" timestamp
  [1m[36mRepository Load (0.3ms)[0m  [1mSELECT "repositories".* FROM "repositories" [0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110316174721')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddOwnerNameAndOwnerEmail (20110321075539)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "owner_name" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "owner_email" character varying(255)
  [1m[36mRepository Load (0.3ms)[0m  [1mSELECT "repositories".* FROM "repositories" [0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" DROP "username"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110321075539')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to RepositoryStripOwnerNameFromName (20110321171101)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mRepository Load (0.4ms)[0m  SELECT "repositories".* FROM "repositories" 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110321171101')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to CreateHistoriesTable (20110411171936)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (11.8ms)[0m  CREATE TABLE "histories" ("id" serial primary key, "message" character varying(255), "username" character varying(255), "item" integer, "table" character varying(255), "month" smallint, "year" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (4.9ms)[0m  [1mCREATE INDEX "index_histories_on_item_and_table_and_month_and_year" ON "histories" ("item", "table", "month", "year")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110411171936')
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
Migrating to RenameHistoriesToRailsAdminHistories (20110411171937)
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "histories" RENAME TO "rails_admin_histories"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "histories_id_seq" RENAME TO "rails_admin_histories_id_seq"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110411171937')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddAdminFlagToUser (20110411172518)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (38.7ms)[0m  ALTER TABLE "users" ADD COLUMN "is_admin" boolean DEFAULT 'f'
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110411172518')
  [1m[36m (4.5ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddRef (20110413101057)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "ref" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "branch" character varying(255)
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110413101057')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to BuildsAddGithubPayload (20110414131100)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "github_payload" text
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110414131100')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddGithubIdToUsersTable (20110503150504)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD COLUMN "github_id" integer
  [1m[36m (4.3ms)[0m  [1mCREATE INDEX "index_users_on_github_id" ON "users" ("github_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110503150504')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesChangeOwnerEmailType (20110523012243)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ALTER COLUMN "owner_email" TYPE text[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110523012243')
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubOauthTokenToUser (20110611203537)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "users" ADD COLUMN "github_oauth_token" character varying(255)[0m
  [1m[35m (5.8ms)[0m  CREATE INDEX "index_users_on_github_oauth_token" ON "users" ("github_oauth_token")
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110611203537')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to AddCompareUrlToBuild (20110613210252)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "compare_url" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110613210252')[0m
  [1m[35m (14.8ms)[0m  COMMIT
Migrating to BuildsRemoveJobId (20110615152003)
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" DROP "job_id"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110615152003')[0m
  [1m[35m (8.8ms)[0m  COMMIT
Migrating to BuildRemoveLastBuiltAt (20110616211744)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" DROP "last_built_at"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110616211744')[0m
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to AddMissingIndexes (20110617114728)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (11.7ms)[0m  CREATE INDEX "index_repositories_on_last_build_started_at" ON "repositories" ("last_build_started_at")
  [1m[36m (5.4ms)[0m  [1mCREATE INDEX "index_repositories_on_owner_name_and_name" ON "repositories" ("owner_name", "name")[0m
  [1m[35m (5.0ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_parent_id_and_started_at" ON "builds" ("repository_id", "parent_id", "started_at")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110617114728')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to AddActiveToRepositories (20110619100906)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "is_active" boolean
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110619100906')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to StoreTokenInBuild (20110729094426)
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "token" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110729094426')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to CreateRequestsCommitsAndTasks (20110801161819)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "commit_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "request_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "state" character varying(255)
  [1m[36m (17.4ms)[0m  [1mCREATE TABLE "commits" ("id" serial primary key, "repository_id" integer, "commit" character varying(255), "ref" character varying(255), "branch" character varying(255), "message" text, "compare_url" character varying(255), "committed_at" timestamp, "committer_name" character varying(255), "committer_email" character varying(255), "author_name" character varying(255), "author_email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (13.0ms)[0m  CREATE TABLE "requests" ("id" serial primary key, "repository_id" integer, "commit_id" integer, "state" character varying(255), "source" character varying(255), "payload" text, "token" character varying(255), "config" text, "commit" character varying(255), "started_at" timestamp, "finished_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (16.4ms)[0m  [1mCREATE TABLE "tasks" ("id" serial primary key, "repository_id" integer, "commit_id" integer, "owner_id" integer, "owner_type" character varying(255), "queue" character varying(255), "type" character varying(255), "state" character varying(255), "number" character varying(255), "config" text, "status" integer, "log" text DEFAULT '', "job_id" character varying(255), "worker" character varying(255), "commit" character varying(255), "started_at" timestamp, "finished_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.8ms)[0m  UPDATE "commits" SET "id" = source."id", "repository_id" = source."repository_id", "created_at" = source."created_at", "updated_at" = source."updated_at", "commit" = source."commit", "ref" = source."ref", "branch" = source."branch", "message" = source."message", "compare_url" = source."compare_url", "committed_at" = source."committed_at", "committer_name" = source."committer_name", "committer_email" = source."committer_email", "author_name" = source."author_name", "author_email" = source."author_email" FROM (SELECT "id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email" FROM "builds" WHERE "builds".id IN (SELECT id FROM "commits")) AS source WHERE "commits".id = source.id
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "commits" ("id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email") SELECT "id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "commits")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "ref"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "branch"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "builds" DROP COLUMN "message"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "compare_url"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "builds" DROP COLUMN "committed_at"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "committer_name"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "committer_email"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "author_name"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "builds" DROP COLUMN "author_email"
  [1m[36m (0.5ms)[0m  [1mUPDATE "requests" SET "id" = source."id", "repository_id" = source."repository_id", "config" = source."config", "created_at" = source."created_at", "updated_at" = source."updated_at", "commit" = source."commit", "started_at" = source."started_at", "finished_at" = source."finished_at" FROM (SELECT "id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at" FROM "builds" WHERE "builds".id IN (SELECT id FROM "requests")) AS source WHERE "requests".id = source.id[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "requests" ("id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at") SELECT "id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "requests")
  [1m[36m (0.3ms)[0m  [1mUPDATE "requests" SET "id" = source."id", "payload" = source."github_payload", "token" = source."token" FROM (SELECT "id", "github_payload", "token" FROM "builds" WHERE "builds".id IN (SELECT id FROM "requests")) AS source WHERE "requests".id = source.id[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "requests" ("id", "payload", "token") SELECT "id", "github_payload" AS "payload", "token" AS "token" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "requests")
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "github_payload"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "builds" DROP COLUMN "token"
  [1m[36m (0.2ms)[0m  [1mUPDATE "requests" SET "state" = 'finished'[0m
  [1m[35m (0.1ms)[0m  UPDATE "requests" SET "source" = 'github'
  [1m[36m (0.6ms)[0m  [1mUPDATE "tasks" SET "id" = source."id", "number" = source."number", "status" = source."status", "started_at" = source."started_at", "finished_at" = source."finished_at", "commit" = source."commit", "config" = source."config", "log" = source."log" FROM (SELECT "id", "number", "status", "started_at", "finished_at", "commit", "config", "log" FROM "builds" WHERE "builds".id IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0) AS source WHERE "tasks".id = source.id[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "tasks" ("id", "number", "status", "started_at", "finished_at", "commit", "config", "log") SELECT "id", "number", "status", "started_at", "finished_at", "commit", "config", "log" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "log"[0m
  [1m[35m (0.4ms)[0m  UPDATE "tasks" SET "id" = source."id", "owner_id" = source."parent_id" FROM (SELECT "id", "parent_id" FROM "builds" WHERE "builds".id IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0) AS source WHERE "tasks".id = source.id
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "tasks" ("id", "owner_id") SELECT "id", "parent_id" AS "owner_id" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0[0m
  [1m[35m (0.2ms)[0m  UPDATE "tasks" SET "owner_type" = 'Build'
  [1m[36m (0.2ms)[0m  [1mUPDATE "tasks" SET "type" = 'Task::Test'[0m
  [1m[35m (0.2ms)[0m  UPDATE "tasks" SET "state" = 'finished'
  [1m[36m (12.6ms)[0m  [1mCREATE INDEX "index_commits_on_commit" ON "commits" ("commit")[0m
  [1m[35m (4.6ms)[0m  CREATE INDEX "index_builds_on_commit" ON "builds" ("commit")
  [1m[36m (4.8ms)[0m  [1mCREATE INDEX "index_requests_on_commit" ON "requests" ("commit")[0m
  [1m[35m (4.4ms)[0m  CREATE INDEX "index_tasks_on_commit" ON "tasks" ("commit")
  [1m[36m (0.5ms)[0m  [1mUPDATE requests SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = requests.commit LIMIT 1)[0m
  [1m[35m (2.3ms)[0m  UPDATE tasks SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = tasks.commit LIMIT 1)
  [1m[36m (0.4ms)[0m  [1mDELETE FROM builds WHERE parent_id IS NOT NULL[0m
  [1m[35m (1.5ms)[0m  UPDATE builds SET request_id = (SELECT requests.id FROM requests WHERE requests.commit = builds.commit LIMIT 1)
  [1m[36m (0.3ms)[0m  [1mUPDATE builds SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = builds.commit LIMIT 1)[0m
  [1m[35m (1.0ms)[0m  SELECT MAX("builds"."id") AS max_id FROM "builds" 
  [1m[36m (0.5ms)[0m  [1mCREATE SEQUENCE shared_builds_tasks_seq START WITH 1 CACHE 30[0m
  [1m[35m (57.4ms)[0m  ALTER TABLE builds ALTER COLUMN id TYPE BIGINT
  [1m[36m (0.3ms)[0m  [1mALTER TABLE builds ALTER COLUMN id SET DEFAULT nextval('shared_builds_tasks_seq')[0m
  [1m[35m (35.5ms)[0m  ALTER TABLE tasks ALTER COLUMN id TYPE BIGINT
  [1m[36m (0.3ms)[0m  [1mALTER TABLE tasks ALTER COLUMN id SET DEFAULT nextval('shared_builds_tasks_seq')[0m
  [1m[35m (0.3ms)[0m  SELECT max(id) FROM commits
  [1m[36m (0.2ms)[0m  [1mSELECT setval('commits_id_seq', 1)[0m
  [1m[35m (1.8ms)[0m  SELECT max(id) FROM requests
  [1m[36m (0.5ms)[0m  [1mSELECT setval('requests_id_seq', 1)[0m
  [1m[35m (0.6ms)[0m  SELECT max(id) FROM tasks
  [1m[36m (0.4ms)[0m  [1mSELECT setval('tasks_id_seq', 1)[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "builds" DROP "parent_id"
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "builds" DROP "commit"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "requests" DROP "commit"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "tasks" DROP "commit"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110801161819')
  [1m[36m (4.5ms)[0m  [1mCOMMIT[0m
Migrating to RepositoryRenameIsActiveToActive (20110805030147)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" RENAME COLUMN "is_active" TO "active"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110805030147')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to TasksAddTags (20110819232908)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "tasks" ADD COLUMN "tags" text[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110819232908')
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
Migrating to CacheOneNumberForSharedBuildsTasksSequence (20110911204538)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER SEQUENCE shared_builds_tasks_seq CACHE 1 NO MAXVALUE NO CYCLE[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110911204538')
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
Migrating to RenameTasksToJobs (20111107134436)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "tasks" RENAME TO "jobs"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "tasks_id_seq" RENAME TO "jobs_id_seq"
  [1m[36m (0.3ms)[0m  [1mUPDATE jobs SET type = 'Job::Test' WHERE type = 'Task::Test'[0m
  [1m[35m (0.2ms)[0m  UPDATE jobs SET type = 'Job::Configure' WHERE type = 'Task::Configure'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134436')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateArtifacts (20111107134437)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (17.6ms)[0m  CREATE TABLE "artifacts" ("id" serial primary key, "content" text, "job_id" integer, "type" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.6ms)[0m  [1mUPDATE "artifacts" SET "id" = source."id", "content" = source."log" FROM (SELECT "id", "log" FROM "jobs" WHERE "jobs".id IN (SELECT id FROM "artifacts")) AS source WHERE "artifacts".id = source.id[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "artifacts" ("id", "content") SELECT "id", "log" AS "content" FROM "jobs" WHERE "jobs".id NOT IN (SELECT id FROM "artifacts")
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "jobs" DROP COLUMN "log"[0m
  [1m[35m (0.2ms)[0m  UPDATE "artifacts" SET "type" = 'Artifact::Log'
  [1m[36m (0.1ms)[0m  [1mUPDATE artifacts SET job_id = id[0m
  [1m[35m (0.3ms)[0m  select setval('artifacts_id_seq', (select max(id) + 1 from artifacts));
  [1m[36m (10.0ms)[0m  [1mCREATE INDEX "index_artifacts_on_type_and_job_id" ON "artifacts" ("type", "job_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111107134437')
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkers (20111107134438)
  [1m[35m (1.2ms)[0m  BEGIN
  [1m[36m (29.1ms)[0m  [1mCREATE TABLE "workers" ("id" serial primary key, "name" character varying(255), "host" character varying(255), "state" character varying(255), "last_seen_at" timestamp) [0m
  [1m[35m (6.2ms)[0m  CREATE INDEX "index_workers_on_name_and_host" ON "workers" ("name", "host")
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134438')[0m
  [1m[35m (9.3ms)[0m  COMMIT
Migrating to JobsAddRetries (20111107134439)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (11.1ms)[0m  ALTER TABLE "jobs" ADD COLUMN "retries" integer DEFAULT 0
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134439')[0m
  [1m[35m (4.1ms)[0m  COMMIT
Migrating to RemoveRailsAdmin (20111107134440)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (2.0ms)[0m  DROP TABLE "rails_admin_histories"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134440')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddIndexesToJobs (20111128235043)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (4.7ms)[0m  CREATE INDEX "index_jobs_on_queue_and_state" ON "jobs" ("queue", "state")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111128235043')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to AddRepositoryIdIndexToJobs (20111129014329)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (5.9ms)[0m  CREATE INDEX "index_jobs_on_repository_id" ON "jobs" ("repository_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111129014329')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to AddOwnerAndTypeIndexToJobs (20111129022625)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (4.3ms)[0m  CREATE INDEX "index_jobs_on_type_and_owner_id_and_owner_type" ON "jobs" ("type", "owner_id", "owner_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111129022625')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to WorkersAddPayloadAndLastError (20111201113500)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "workers" ADD COLUMN "payload" text
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "last_error" text[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111201113500')
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddDescriptionAndLastLanguage (20111203002341)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "description" text[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_language" character varying(255)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "language" character varying(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111203002341')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddArchivedAt (20111203221720)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "archived_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111203221720')
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
Migrating to MimicProductionDb (20111207093700)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111207093700')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to BuildsAddDuration (20111212103859)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "duration" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111212103859')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to RepositoriesAddLastBuildDuration (20111212112411)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_duration" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111212112411')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateSslKeys (20111214173922)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (16.9ms)[0m  CREATE TABLE "ssl_keys" ("id" serial primary key, "repository_id" integer, "public_key" text, "private_key" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (11.5ms)[0m  [1mCREATE INDEX "index_ssl_key_on_repository_id" ON "ssl_keys" ("repository_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111214173922')
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Migrating to AddAllowFailureToJobs (20120114125404)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (39.7ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "allow_failure" boolean DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120114125404')
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
Migrating to AddPullRequestFieldsToRequest (20120216133223)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "event_type" character varying(255)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "requests" ADD COLUMN "comments_url" character varying(255)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "base_commit" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "requests" ADD COLUMN "head_commit" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120216133223')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to AddGravatarIdToUsers (20120222082522)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD COLUMN "gravatar_id" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120222082522')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to OrganizationsCreate (20120301131209)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (22.6ms)[0m  CREATE TABLE "organizations" ("id" serial primary key, "name" character varying(255), "login" character varying(255), "github_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120301131209')[0m
  [1m[35m (7.9ms)[0m  COMMIT
Migrating to JobsRenameOwnerToSource (20120304000502)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "jobs" RENAME COLUMN "owner_id" TO "source_id"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" RENAME COLUMN "owner_type" TO "source_type"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000502')
  [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddOwner (20120304000503)
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "owner_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "owner_type" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120304000503')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to BuildsAddOwner (20120304000504)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "builds" ADD COLUMN "owner_id" integer
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "owner_type" character varying(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000504')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to JobsAddOwner (20120304000505)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "owner_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "jobs" ADD COLUMN "owner_type" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120304000505')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to RequestsAddOwner (20120304000506)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "requests" ADD COLUMN "owner_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "owner_type" character varying(255)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000506')
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
Migrating to AddLocaleToUser (20120311234933)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "users" ADD COLUMN "locale" character varying(255)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120311234933')
  [1m[36m (8.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateMemberships (20120316123726)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (11.5ms)[0m  [1mCREATE TABLE "memberships" ("id" serial primary key, "organization_id" integer, "user_id" integer) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120316123726')
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddPrivate (20120319170001)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (44.4ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "private" boolean DEFAULT 'f'[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120319170001')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateUrls (20120324104051)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (17.6ms)[0m  [1mCREATE TABLE "urls" ("id" serial primary key, "url" character varying(255), "code" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120324104051')
  [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
Migrating to CopyStatusToResult (20120505165100)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "result" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "jobs" ADD COLUMN "result" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_result" integer[0m
  [1m[35m (0.3ms)[0m  UPDATE builds SET result = status;
  [1m[36m (0.3ms)[0m  [1mUPDATE jobs SET result = status;[0m
  [1m[35m (0.3ms)[0m  UPDATE repositories SET last_build_result = last_build_status;
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120505165100')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to RequestsAddIndexOnHeadCommit (20120511171900)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (12.6ms)[0m  CREATE INDEX "index_requests_on_head_commit" ON "requests" ("head_commit")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120511171900')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to CreatePermissions (20120521174400)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (7.2ms)[0m  CREATE TABLE "permissions" ("id" serial primary key, "user_id" integer, "repository_id" integer, "admin" boolean) 
  [1m[36m (10.5ms)[0m  [1mCREATE INDEX "index_permissions_on_user_id" ON "permissions" ("user_id")[0m
  [1m[35m (12.2ms)[0m  CREATE INDEX "index_permissions_on_repository_id" ON "permissions" ("repository_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120521174400')[0m
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to BuildsAddPreviousResult (20120527235800)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "previous_result" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120527235800')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to AddSyncInfoToUser (20120713140816)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD COLUMN "in_sync" boolean
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "users" ADD COLUMN "synced_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120713140816')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to RenameInSyncToIsSyncing (20120713153215)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "users" RENAME COLUMN "in_sync" TO "is_syncing"[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120713153215')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to AddQueueToWorkers (20120725005300)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "queue" character varying(255)[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120725005300')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to AddJobsIndexOnStateOwnerTypeOwnerId (20120727151900)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (23.2ms)[0m  [1mCREATE INDEX "index_jobs_on_state_owner_type_owner_id" ON "jobs" ("state", "owner_id", "owner_type")[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120727151900')
  [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
Migrating to AddQueuedAtToJobs (20120731005301)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "queued_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120731005301')
  [1m[36m (14.7ms)[0m  [1mCOMMIT[0m
Migrating to AddPushAndPullToPermissions (20120802001001)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (34.2ms)[0m  [1mALTER TABLE "permissions" ADD COLUMN "push" boolean DEFAULT 'f'[0m
  [1m[35m (31.7ms)[0m  ALTER TABLE "permissions" ADD COLUMN "pull" boolean DEFAULT 'f'
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "permissions" ALTER COLUMN "admin" SET DEFAULT 'f'[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120802001001')
  [1m[36m (11.5ms)[0m  [1mCOMMIT[0m
Migrating to AddBuildsIndexOnRepositoryIdAndState (20120911160000)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mDROP INDEX "index_builds_on_repository_id"[0m
  [1m[35m (10.6ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_state" ON "builds" ("repository_id", "state")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120911160000')[0m
  [1m[35m (9.5ms)[0m  COMMIT
Migrating to ArtifactsAddAggregatedAt (20120911230000)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "aggregated_at" timestamp
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120911230000')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to AddArtifactParts (20120911230001)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "artifact_parts" ("id" serial primary key, "artifact_id" integer, "content" character varying(255), "number" integer) 
  [1m[36m (10.3ms)[0m  [1mCREATE INDEX "index_artifact_parts_on_artifact_id_and_number" ON "artifact_parts" ("artifact_id", "number")[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120911230001')
  [1m[36m (9.9ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddIndexOnFinishedAt (20120915012000)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (10.2ms)[0m  [1mCREATE INDEX "index_builds_on_finished_at" ON "builds" ("finished_at")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915012000')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to CommitsAddIndexOnBranch (20120915012001)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (5.9ms)[0m  [1mCREATE INDEX "index_commits_on_branch" ON "commits" ("branch")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915012001')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Migrating to JobsAddIndexOnCreatedAt (20120915150000)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (9.7ms)[0m  [1mCREATE INDEX "index_jobs_on_created_at" ON "jobs" ("created_at")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915150000')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateEvents (20121015002500)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (25.0ms)[0m  [1mCREATE TABLE "events" ("id" serial primary key, "source_id" integer, "source_type" character varying(255), "repository_id" integer, "event" character varying(255), "data" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121015002500')
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
Migrating to RequestsAddResultAndMessage (20121015002501)
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "result" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "requests" ADD COLUMN "message" character varying(255)
  [1m[36m (1.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121015002501')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to CreateBroadcasts (20121017040100)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (9.9ms)[0m  CREATE TABLE "broadcasts" ("id" serial primary key, "recipient_id" integer, "recipient_type" character varying(255), "kind" character varying(255), "message" character varying(255), "expired" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121017040100')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to EventsChangeDataToText (20121017040200)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "events" ALTER COLUMN "data" TYPE text
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121017040200')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to AddEventTypeToBuilds (20121018201301)
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "event_type" character varying(255)
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018201301')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to UpdateEventTypeOnBuilds (20121018203728)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (2.3ms)[0m   UPDATE builds
 SET event_type = requests.event_type
 FROM requests
 WHERE builds.request_id = requests.id

  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018203728')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddIndexOnRepositoryIdAndEventTypeToBuilds (20121018210156)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (11.0ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_event_type" ON "builds" ("repository_id", "event_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018210156')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to RepositoriesAddLastBuildState (20121125122700)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_state" character varying(255)
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121125122700')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to BuildsAddPreviousState (20121125122701)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "builds" ADD COLUMN "previous_state" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121125122701')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to ArtifactPartsAddFinal (20121222125200)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "artifact_parts" ADD COLUMN "final" boolean
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifact_parts" ADD COLUMN "created_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222125200')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsChangeContentToText (20121222125300)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (5.7ms)[0m  [1mALTER TABLE "artifact_parts" ALTER COLUMN "content" TYPE text[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222125300')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsAddIndexOnArtifactId (20121222140200)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (4.3ms)[0m  [1mCREATE INDEX "index_artifact_parts_on_artifact_id" ON "artifact_parts" ("artifact_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222140200')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsRemoveIndexOnArtifactId (20121223162300)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mDROP INDEX "index_artifact_parts_on_artifact_id"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121223162300')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubScopesToUser (20130107165057)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD COLUMN "github_scopes" text[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130107165057')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddIndexOnLastSeenAtToWorkers (20130115125836)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (5.9ms)[0m  [1mCREATE INDEX "index_workers_on_last_seen_at" ON "workers" ("last_seen_at")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130115125836')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to CacheFullNameInWorkers (20130115145728)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "full_name" character varying(255)[0m
  [1m[35m (4.2ms)[0m  CREATE INDEX "index_workers_on_full_name" ON "workers" ("full_name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130115145728')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to ArtifactsAddArchivedAt (20130125002600)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "archived_at" timestamp
  [1m[36m (4.3ms)[0m  [1mCREATE INDEX "index_artifacts_on_archived_at" ON "artifacts" ("archived_at")[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130125002600')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactsAddArchivingAndVerified (20130125171100)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifacts" ADD COLUMN "archiving" boolean[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "archive_verified" boolean
  [1m[36m (5.6ms)[0m  [1mCREATE INDEX "index_artifacts_on_archiving" ON "artifacts" ("archiving")[0m
  [1m[35m (11.0ms)[0m  CREATE INDEX "index_artifacts_on_archive_verified" ON "artifacts" ("archive_verified")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130125171100')[0m
  [1m[35m (2.9ms)[0m  COMMIT
Migrating to CreateEmails (20130129142703)
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (13.7ms)[0m  CREATE TABLE "emails" ("id" serial primary key, "user_id" integer, "email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (4.9ms)[0m  [1mCREATE INDEX "index_emails_on_user_id" ON "emails" ("user_id")[0m
  [1m[35m (4.3ms)[0m  CREATE INDEX "index_emails_on_email" ON "emails" ("email")
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130129142703')[0m
  [1m[35m (8.7ms)[0m  COMMIT
Migrating to CreateLogs (20130207030700)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (16.8ms)[0m  CREATE TABLE "logs" ("id" serial primary key, "job_id" integer, "content" text, "created_at" timestamp, "updated_at" timestamp, "aggregated_at" timestamp, "archiving" boolean, "archived_at" timestamp, "archive_verified" boolean) 
  [1m[36m (6.2ms)[0m  [1mCREATE INDEX "index_logs_on_job_id" ON "logs" ("job_id")[0m
  [1m[35m (7.5ms)[0m  CREATE INDEX "index_logs_on_archive_verified" ON "logs" ("archive_verified")
  [1m[36m (4.3ms)[0m  [1mCREATE INDEX "index_logs_on_archived_at" ON "logs" ("archived_at")[0m
  [1m[35m (3.2ms)[0m   CREATE FUNCTION insert_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 INSERT INTO logs VALUES (NEW.id, NEW.job_id, NEW.content, NEW.created_at, NEW.updated_at,
 NEW.aggregated_at, NEW.archiving, NEW.archived_at, NEW.archive_verified);
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION update_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 UPDATE logs
 SET job_id=NEW.job_id, content=NEW.content, created_at=NEW.created_at,
 updated_at=NEW.updated_at, aggregated_at=NEW.aggregated_at, archiving=NEW.archiving,
 archived_at=NEW.archived_at, archive_verified=NEW.archive_verified
 WHERE id = NEW.id;
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION delete_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 DELETE FROM logs WHERE id = OLD.id;
 RETURN OLD;
 END;
 $$;

 CREATE TRIGGER insert_log AFTER INSERT ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE insert_log();

 CREATE TRIGGER update_log AFTER UPDATE ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE update_log();

 CREATE TRIGGER delete_log AFTER DELETE ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE delete_log();

  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130207030700')[0m
  [1m[35m (3.0ms)[0m  COMMIT
Migrating to CreateLogParts (20130207030701)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (24.0ms)[0m  CREATE TABLE "log_parts" ("id" serial primary key, "log_id" integer, "content" text, "number" integer, "final" boolean, "created_at" timestamp) 
  [1m[36m (4.2ms)[0m  [1mCREATE INDEX "index_log_parts_on_log_id_and_number" ON "log_parts" ("log_id", "number")[0m
  [1m[35m (0.4ms)[0m   INSERT INTO log_parts
 SELECT id, artifact_id, content, number, final, created_at
 FROM artifact_parts
 WHERE artifact_parts.id NOT IN (SELECT id FROM log_parts)

  [1m[36m (0.7ms)[0m  [1m CREATE FUNCTION insert_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 INSERT INTO log_parts VALUES (NEW.id, NEW.artifact_id, NEW.content, NEW.number, NEW.final,
 NEW.created_at);
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION update_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 UPDATE logs
 SET log_id=NEW.artifact_id, content=NEW.content, number=NEW.number, created_at=NEW.created_at
 WHERE id = NEW.id;
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION delete_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 DELETE FROM log_parts WHERE id = OLD.id;
 RETURN OLD;
 END;
 $$;

 CREATE TRIGGER insert_log_part AFTER INSERT ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE insert_log_part();

 CREATE TRIGGER update_log_part AFTER INSERT ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE update_log_part();

 CREATE TRIGGER delete_log_part AFTER DELETE ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE delete_log_part();
[0m
  [1m[35m (0.2ms)[0m   INSERT INTO log_parts
 SELECT id, artifact_id, content, number, final, created_at
 FROM artifact_parts
 WHERE artifact_parts.id NOT IN (SELECT id FROM log_parts)

  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130207030701')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to AddReferenceOnLogPartsLogId (20130208124253)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (3.8ms)[0m  ALTER TABLE log_parts ADD CONSTRAINT log_parts_log_id_fk FOREIGN KEY (log_id) REFERENCES logs (id);
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208124253')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to RenameArtifacts (20130208135800)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "artifacts" RENAME TO "artifacts_backup"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifacts_id_seq" RENAME TO "artifacts_backup_id_seq"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "artifact_parts" RENAME TO "artifact_parts_backup"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifact_parts_id_seq" RENAME TO "artifact_parts_backup_id_seq"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130208135800')
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
Migrating to DropArtifacts (20130208135801)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mDROP TABLE "artifacts_backup"[0m
  [1m[35m (0.7ms)[0m  DROP TABLE "artifact_parts_backup"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208135801')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to AddNotNullConstraintOnLogPartsLogId (20130208215252)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE log_parts ALTER COLUMN log_id SET NOT NULL;
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208215252')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddPullRequestTitleToBuilds (20130311211101)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.7ms)[0m  ALTER TABLE "builds" ADD COLUMN "pull_request_title" text
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130311211101')[0m
  [1m[35m (8.7ms)[0m  COMMIT
Migrating to AddPullRequestNumberToBuilds (20130327100801)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "pull_request_number" integer
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130327100801')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddIndexToBuildsRequestId (20130418101437)
  [1m[36m (6.8ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_request_id ON builds(request_id)[0m
  [1m[35m (2.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130418101437')
Migrating to AddIndexToJobsOnOwnerIdOwnerTypeAndState (20130418103306)
  [1m[36m (24.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_id_and_owner_type_and_state ON jobs(owner_id, owner_type, state)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130418103306')
Migrating to AddBranchToBuilds (20130504230850)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "branch" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130504230850')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddMoreIndexesToBuilds (20130505023259)
  [1m[36m (15.0ms)[0m  [1m CREATE INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type_and_state_and_branch
 ON builds(repository_id, event_type, state, branch);
[0m
  [1m[35m (2.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130505023259')
Migrating to AddIndexOnBuildState (20130521115725)
  [1m[36m (6.4ms)[0m  [1m CREATE INDEX CONCURRENTLY index_builds_on_state
 ON builds(state);
[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521115725')
Migrating to UpdateFinishedJobs (20130521133050)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE jobs SET state = 'passed' WHERE state = 'finished' AND result = 0 AND type = 'Job::Test'
  [1m[36m (0.2ms)[0m  [1mUPDATE jobs SET state = 'failed' WHERE state = 'finished' AND result = 1 AND type = 'Job::Test'[0m
  [1m[35m (0.2ms)[0m  UPDATE jobs SET state = 'errored' WHERE state = 'finished' AND result IS NULL AND type = 'Job::Test'
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM jobs WHERE state = 'finished' AND type = 'Job::Test'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521133050')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to UpdateFinishedBuilds (20130521134224)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.5ms)[0m  [1mUPDATE builds SET state = 'passed' WHERE state = 'finished' AND result = 0[0m
  [1m[35m (0.6ms)[0m  UPDATE builds SET state = 'failed' WHERE state = 'finished' AND result = 1
  [1m[36m (0.4ms)[0m  [1mUPDATE builds SET state = 'errored' WHERE state = 'finished' AND result IS NULL[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM builds WHERE state = 'finished'
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130521134224')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to RemoveUnusedBuildColumns (20130521134800)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "builds" DROP "result"
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" DROP "status"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" DROP "previous_result"
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" DROP "agent"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP "language"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP "archived_at"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521134800')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to RemoveUnusedJobColumns (20130521141357)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "jobs" DROP "status"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "jobs" DROP "job_id"
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "jobs" DROP "retries"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521141357')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubIdToUsers (20130629122945)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "github_id" integer[0m
  [1m[35m (5.2ms)[0m  CREATE INDEX "index_repositories_on_github_id" ON "repositories" ("github_id")
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629122945')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddDefaultBranchToRepositories (20130629133531)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "default_branch" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629133531')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddGithubLanguageToRepositories (20130629174449)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "github_language" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629174449')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddPurgedAtToLogs (20130701123456)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "logs" ADD COLUMN "purged_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130701123456')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to RemoveUnusedRepositoryColumns (20130702123456)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" DROP "last_duration"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "repositories" DROP "last_build_status"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "repositories" DROP "last_build_result"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "repositories" DROP "last_build_language"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130702123456')
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
Migrating to AddUniqueIndexOnUsersGithubIdAndRemoveUniqueIndexOnUsersLogin (20130702144325)
  [1m[35m (9.1ms)[0m  DROP INDEX index_users_on_login
  [1m[36m (6.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_users_on_login ON users(login)[0m
  [1m[35m (2.2ms)[0m  DROP INDEX index_users_on_github_id
  [1m[36m (20.3ms)[0m  [1mCREATE UNIQUE INDEX CONCURRENTLY index_users_on_github_id ON users(github_id)[0m
  [1m[35m (8.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130702144325')
Migrating to AddExtraColumnsToOrganizations (20130705123456)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "organizations" ADD COLUMN "avatar_url" character varying(255)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "organizations" ADD COLUMN "location" character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "organizations" ADD COLUMN "email" character varying(255)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "organizations" ADD COLUMN "company" character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "organizations" ADD COLUMN "homepage" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130705123456')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddIndexOnGithubIdToOrganizations (20130707164854)
  [1m[36m (19.8ms)[0m  [1mCREATE UNIQUE INDEX CONCURRENTLY index_organizations_on_github_id ON organizations(github_id)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130707164854')
Migrating to CreateAnnotations (20130709185200)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (22.9ms)[0m  CREATE TABLE "annotations" ("id" serial primary key, "job_id" integer NOT NULL, "url" character varying(255), "description" text NOT NULL, "image_url" character varying(255), "image_alt" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130709185200')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to CreateAnnotationProviders (20130709233500)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (9.4ms)[0m  CREATE TABLE "annotation_providers" ("id" serial primary key, "name" character varying(255), "api_username" character varying(255), "api_key" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130709233500')[0m
  [1m[35m (9.0ms)[0m  COMMIT
Migrating to AddAnnotationProviderIdToAnnotations (20130710000745)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "annotations" ADD COLUMN "annotation_provider_id" integer NOT NULL
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130710000745')[0m
  [1m[35m (8.6ms)[0m  COMMIT
Migrating to AddCanceledAtToJobsAndBuilds (20130726101124)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "canceled_at" timestamp
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "canceled_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130726101124')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddIndexOnRepositoryGithubId (20130901183019)
  [1m[35m (2.4ms)[0m  DROP INDEX index_repositories_on_github_id
  [1m[36m (6.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_github_id ON repositories(github_id)[0m
  [1m[35m (2.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130901183019')
Migrating to AddCachedMatrixIdsToBuilds (20130909203321)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE builds ADD COLUMN cached_matrix_ids integer[]
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130909203321')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to CreateIndexOnBuildsIdDescAndRepositoryIdAndEventType (20130910184823)
  [1m[36m (7.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_id_repository_id_and_event_type_desc ON builds (id DESC, repository_id, event_type);[0m
  [1m[35m (8.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130910184823')
Migrating to AddUniqueIndexOnRepositoryGithubId (20130916101056)
  [1m[36m (9.7ms)[0m  [1mDROP INDEX index_repositories_on_github_id[0m
  [1m[35m (8.8ms)[0m  CREATE UNIQUE INDEX CONCURRENTLY index_repositories_on_github_id ON repositories(github_id)
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130916101056')[0m
Migrating to AddSettingsToRepositories (20130920135744)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "settings" json[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130920135744')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to RemoveWorkersTableAndIndexes (20131104101056)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mDROP TABLE "workers"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131104101056')
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Migrating to RemoveEventsTable (20131109101056)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131109101056')
  [1m[36m (3.4ms)[0m  [1mCOMMIT[0m
Migrating to RemoveAnnotationImageInfo (20140120225125)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "annotations" DROP "image_url"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "annotations" DROP "image_alt"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140120225125')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddStatusToAnnotations (20140121003026)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "annotations" ADD COLUMN "status" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140121003026')[0m
  [1m[35m (8.2ms)[0m  COMMIT
Migrating to AddIndicesToRequests (20140204220926)
  [1m[36m (21.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_requests_on_repository_id ON requests(repository_id)[0m
  [1m[35m (11.7ms)[0m  CREATE INDEX CONCURRENTLY index_requests_on_commit_id ON requests(commit_id)
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140204220926')[0m
Migrating to AddIndicesToMemberships (20140210003014)
  [1m[35m (12.7ms)[0m  CREATE INDEX CONCURRENTLY index_memberships_on_user_id ON memberships(user_id)
  [1m[36m (2.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140210003014')[0m
Migrating to RemoveUnusedIndices (20140210012509)
  [1m[35m (2.4ms)[0m  DROP INDEX CONCURRENTLY index_commits_on_commit
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_state[0m
  [1m[35m (2.4ms)[0m  DROP INDEX CONCURRENTLY index_commits_on_branch
  [1m[36m (2.4ms)[0m  [1mDROP INDEX CONCURRENTLY index_users_on_github_oauth_token[0m
  [1m[35m (2.3ms)[0m  DROP INDEX CONCURRENTLY index_builds_on_finished_at
  [1m[36m (2.2ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_queue_and_state[0m
  [1m[35m (4.0ms)[0m  DROP INDEX CONCURRENTLY index_jobs_on_created_at
  [1m[36m (2.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140210012509')[0m
Migrating to AddRemovedInfoToLogs (20140612131826)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "logs" ADD COLUMN "removed_at" timestamp[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "logs" ADD COLUMN "removed_by" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140612131826')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddEducationFieldToUser (20140827121945)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD COLUMN "education" boolean
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140827121945')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to JobsAddReceivedAt (20150121135400)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "jobs" ADD COLUMN "received_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150121135400')[0m
  [1m[35m (17.2ms)[0m  COMMIT
Migrating to BuildsAddReceivedAt (20150121135401)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "builds" ADD COLUMN "received_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150121135401')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddIndexOnRepositoryIdToCommits (20150204144312)
  [1m[36m (0.2ms)[0m  [1mDROP INDEX IF EXISTS index_commits_on_repository_id[0m
  [1m[35m (6.3ms)[0m  CREATE INDEX CONCURRENTLY index_commits_on_repository_id ON commits(repository_id)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150204144312')[0m
Migrating to IndexRequestsOnCreatedAt (20150210170900)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_requests_on_created_at
  [1m[36m (7.5ms)[0m  [1mCREATE INDEX CONCURRENTLY index_requests_on_created_at ON requests(created_at)[0m
  [1m[35m (2.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150210170900')
Migrating to CreateBranches (20150223125700)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (20.4ms)[0m  CREATE TABLE "branches" ("id" serial primary key, "repository_id" integer NOT NULL, "last_build_id" integer, "name" character varying(255) NOT NULL, "exists_on_github" boolean DEFAULT 't' NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (6.5ms)[0m  [1mCREATE UNIQUE INDEX "index_branches_on_repository_id_and_name" ON "branches" ("repository_id", "name")[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150223125700')
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
Migrating to AddNextBuildNumberToRepository (20150311020321)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "next_build_number" integer[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150311020321')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddActiveIndexToRepository (20150316020321)
  [1m[35m (0.1ms)[0m  DROP INDEX IF EXISTS index_repositories_on_active
  [1m[36m (6.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_active ON repositories(active)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150316020321')
Migrating to AddOwnerTypeAndOwnerIdIndexesToBuilds (20150316080321)
  [1m[36m (0.2ms)[0m  [1mDROP INDEX IF EXISTS index_builds_on_owner_type[0m
  [1m[35m (0.1ms)[0m  DROP INDEX IF EXISTS index_builds_on_owner_id
  [1m[36m (9.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_owner_type ON builds(owner_type)[0m
  [1m[35m (14.4ms)[0m  CREATE INDEX CONCURRENTLY index_builds_on_owner_id ON builds(owner_id)
  [1m[36m (2.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150316080321')[0m
Migrating to AddOwnerTypeAndOwnerIdIndexesToRepositories (20150316100321)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_repositories_on_owner_type
  [1m[36m (0.1ms)[0m  [1mDROP INDEX IF EXISTS index_repositories_on_owner_id[0m
  [1m[35m (7.2ms)[0m  CREATE INDEX CONCURRENTLY index_repositories_on_owner_type ON repositories(owner_type)
  [1m[36m (9.9ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_owner_id ON repositories(owner_id)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150316100321')
Migrating to AddSlugIndexToRepositories (20150317004600)
  [1m[36m (15.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS pg_trgm[0m
  [1m[35m (7.5ms)[0m  CREATE INDEX CONCURRENTLY index_repositories_on_slug ON repositories USING gin((owner_name || '/' || name) gin_trgm_ops)
  [1m[36m (2.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150317004600')[0m
Migrating to AddTokenIndexToTokens (20150317020321)
  [1m[35m (0.1ms)[0m  DROP INDEX IF EXISTS index_tokens_on_token
  [1m[36m (12.5ms)[0m  [1mCREATE INDEX CONCURRENTLY index_tokens_on_token ON tokens(token)[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150317020321')
Migrating to AddLoginIndexToOrganizations (20150317080321)
  [1m[36m (0.2ms)[0m  [1mDROP INDEX IF EXISTS index_organizations_on_login[0m
  [1m[35m (15.1ms)[0m  CREATE INDEX CONCURRENTLY index_organizations_on_login ON organizations(login)
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150317080321')[0m
Migrating to AddLowerCaseIndices (20150414001337)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_organizations_on_lower_login
  [1m[36m (6.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_organizations_on_lower_login ON organizations USING btree(lower(login))[0m
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_users_on_lower_login
  [1m[36m (6.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_users_on_lower_login ON users USING btree(lower(login))[0m
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_repositories_on_lower_name
  [1m[36m (14.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_lower_name ON repositories USING btree(lower(name))[0m
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_repositories_on_lower_owner_name
  [1m[36m (12.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_lower_owner_name ON repositories USING btree(lower(owner_name))[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150414001337')
Migrating to RepositoriesAddIndexOwnerName (20150528101600)
  [1m[36m (7.9ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_owner_name ON repositories(owner_name)[0m
  [1m[35m (2.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101600')
Migrating to RepositoriesAddIndexName (20150528101601)
  [1m[36m (14.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_name ON repositories(name)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101601')
Migrating to RepositoriesDropIndexOwnerNameName (20150528101602)
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_repositories_on_owner_name_and_name[0m
  [1m[35m (2.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101602')
Migrating to BuildsAddIndexEventType (20150528101603)
  [1m[36m (14.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_event_type ON builds (event_type)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101603')
Migrating to BuildsAddIndexRepositoryId (20150528101604)
  [1m[36m (20.5ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_repository_id ON builds (repository_id)[0m
  [1m[35m (2.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101604')
Migrating to BuildsAddIndexState (20150528101605)
  [1m[36m (6.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_state ON builds (state)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101605')
Migrating to BuildsAddIndexBranch (20150528101607)
  [1m[36m (6.9ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_branch ON builds (branch)[0m
  [1m[35m (3.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101607')
Migrating to BuildsDropIndexRepositoryIdAndState (20150528101608)
  [1m[36m (3.6ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_state[0m
  [1m[35m (2.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101608')
Migrating to BuildsDropIndexRepositoryIdAndEventType (20150528101609)
  [1m[36m (2.4ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type[0m
  [1m[35m (7.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101609')
Migrating to BuildsDropIndexIdRepositoryIdAndEventTypeDesc (20150528101610)
  [1m[36m (11.2ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_id_repository_id_and_event_type_desc[0m
  [1m[35m (2.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101610')
Migrating to BuildsDropIndexRepositoryIdAndEventTypeAndStateAndBranch (20150528101611)
  [1m[36m (4.2ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type_and_state_and_bran[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101611')
Migrating to JobsAddIndexOwnerId (20150610143500)
  [1m[36m (25.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_id ON jobs (owner_id)[0m
  [1m[35m (13.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143500')
Migrating to JobsAddIndexOwnerType (20150610143501)
  [1m[36m (13.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_type ON jobs (owner_type)[0m
  [1m[35m (2.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143501')
Migrating to JobsAddIndexSourceId (20150610143502)
  [1m[36m (12.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_source_id ON jobs (source_id)[0m
  [1m[35m (9.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143502')
Migrating to JobsAddIndexSourceType (20150610143503)
  [1m[36m (8.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_source_type ON jobs (source_type)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143503')
Migrating to JobsAddIndexType (20150610143504)
  [1m[36m (6.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_type ON jobs (type)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143504')
Migrating to JobsDropIndexOwnerIdAndOwnerTypeAndState (20150610143505)
  [1m[36m (2.4ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_owner_id_and_owner_type_and_state[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143505')
Migrating to JobsDropIndexStateOwnerTypeOwnerId (20150610143506)
  [1m[36m (4.8ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_state_owner_type_owner_id[0m
  [1m[35m (8.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143506')
Migrating to JobsDropIndexTypeAndSourceIdAndSourceType (20150610143507)
  [1m[36m (8.4ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_type_and_owner_id_and_owner_type[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143507')
Migrating to JobsAddIndexState (20150610143508)
  [1m[36m (21.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_state ON jobs (state)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143508')
Migrating to JobsAddIndexQueue (20150610143509)
  [1m[36m (7.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_queue ON jobs (queue)[0m
  [1m[35m (2.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143509')
Migrating to TokensAddIndexUserId (20150610143510)
  [1m[36m (8.2ms)[0m  [1mCREATE INDEX CONCURRENTLY index_tokens_on_user_id ON tokens (user_id)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143510')
Migrating to ReposAddInvalidatedAt (20150629231300)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "invalidated_at" timestamp
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150629231300')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to BroadcastsAddCategory (20150923131400)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "broadcasts" ADD COLUMN "category" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150923131400')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to CreateStars (20151112153500)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (15.0ms)[0m  CREATE TABLE "stars" ("id" serial primary key, "repository_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (18.0ms)[0m  [1mCREATE INDEX "index_stars_on_user_id" ON "stars" ("user_id")[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20151112153500')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Migrating to StarsAddIndexUserIdAndRepositoryId (20151113111400)
  [1m[35m (12.2ms)[0m  CREATE UNIQUE INDEX index_stars_on_user_id_and_repository_id ON stars (user_id, repository_id)
  [1m[36m (8.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20151113111400')[0m
  [1m[35m (0.5ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
  [1m[36m (11.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (17.2ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (1.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateRepositories (20101126174706)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (15.2ms)[0m  [1mCREATE TABLE "repositories" ("id" serial primary key, "name" character varying(255), "url" character varying(255), "last_duration" integer, "last_built_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20101126174706')
  [1m[36m (3.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateBuilds (20101126174715)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (11.6ms)[0m  [1mCREATE TABLE "builds" ("id" serial primary key, "repository_id" integer, "number" integer, "status" integer, "started_at" timestamp, "finished_at" timestamp, "log" text DEFAULT '', "commit" character varying(255), "message" text, "committed_at" timestamp, "committer_name" character varying(255), "committer_email" character varying(255), "author_name" character varying(255), "author_email" character varying(255), "job_id" character varying(255), "agent" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20101126174715')
  [1m[36m (3.4ms)[0m  [1mCOMMIT[0m
Migrating to DeviseCreateUsers (20110109130532)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (12.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying(255), "login" character varying(255), "email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (4.5ms)[0m  CREATE UNIQUE INDEX "index_users_on_login" ON "users" ("login")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110109130532')[0m
  [1m[35m (2.9ms)[0m  COMMIT
Migrating to RepositoriesAddUsername (20110116155100)
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "username" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110116155100')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to CreateTokens (20110130102621)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (13.7ms)[0m  CREATE TABLE "tokens" ("id" serial primary key, "user_id" integer, "token" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110130102621')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to AddBuildParentIdAndConfiguration (20110301071656)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "parent_id" integer
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "config" text[0m
  [1m[35m (28.4ms)[0m  ALTER TABLE "builds" ALTER COLUMN "number" TYPE character varying(255)
  [1m[36m (6.2ms)[0m  [1mCREATE INDEX "index_builds_on_repository_id" ON "builds" ("repository_id")[0m
  [1m[35m (5.2ms)[0m  CREATE INDEX "index_builds_on_parent_id" ON "builds" ("parent_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110301071656')[0m
  [1m[35m (3.9ms)[0m  COMMIT
Migrating to RepositoriesDenormalizeLastBuildAttributes (20110316174721)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_number" character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_status" integer
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_started_at" timestamp[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_finished_at" timestamp
  [1m[36mRepository Load (0.3ms)[0m  [1mSELECT "repositories".* FROM "repositories" [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110316174721')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddOwnerNameAndOwnerEmail (20110321075539)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "owner_name" character varying(255)[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "repositories" ADD COLUMN "owner_email" character varying(255)
  [1m[36mRepository Load (1.1ms)[0m  [1mSELECT "repositories".* FROM "repositories" [0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" DROP "username"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110321075539')[0m
  [1m[35m (8.5ms)[0m  COMMIT
Migrating to RepositoryStripOwnerNameFromName (20110321171101)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mRepository Load (0.3ms)[0m  SELECT "repositories".* FROM "repositories" 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110321171101')[0m
  [1m[35m (8.2ms)[0m  COMMIT
Migrating to CreateHistoriesTable (20110411171936)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (12.9ms)[0m  CREATE TABLE "histories" ("id" serial primary key, "message" character varying(255), "username" character varying(255), "item" integer, "table" character varying(255), "month" smallint, "year" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (5.6ms)[0m  [1mCREATE INDEX "index_histories_on_item_and_table_and_month_and_year" ON "histories" ("item", "table", "month", "year")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110411171936')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to RenameHistoriesToRailsAdminHistories (20110411171937)
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "histories" RENAME TO "rails_admin_histories"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "histories_id_seq" RENAME TO "rails_admin_histories_id_seq"
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110411171937')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to AddAdminFlagToUser (20110411172518)
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (52.0ms)[0m  ALTER TABLE "users" ADD COLUMN "is_admin" boolean DEFAULT 'f'
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110411172518')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddRef (20110413101057)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.6ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "ref" character varying(255)[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "builds" ADD COLUMN "branch" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110413101057')[0m
  [1m[35m (8.2ms)[0m  COMMIT
Migrating to BuildsAddGithubPayload (20110414131100)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "builds" ADD COLUMN "github_payload" text
  [1m[36m (1.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110414131100')[0m
  [1m[35m (8.5ms)[0m  COMMIT
Migrating to AddGithubIdToUsersTable (20110503150504)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD COLUMN "github_id" integer
  [1m[36m (11.5ms)[0m  [1mCREATE INDEX "index_users_on_github_id" ON "users" ("github_id")[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110503150504')
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesChangeOwnerEmailType (20110523012243)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "repositories" ALTER COLUMN "owner_email" TYPE text[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110523012243')
  [1m[36m (12.0ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubOauthTokenToUser (20110611203537)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mALTER TABLE "users" ADD COLUMN "github_oauth_token" character varying(255)[0m
  [1m[35m (16.5ms)[0m  CREATE INDEX "index_users_on_github_oauth_token" ON "users" ("github_oauth_token")
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110611203537')[0m
  [1m[35m (3.3ms)[0m  COMMIT
Migrating to AddCompareUrlToBuild (20110613210252)
  [1m[36m (1.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "builds" ADD COLUMN "compare_url" character varying(255)
  [1m[36m (1.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110613210252')[0m
  [1m[35m (9.4ms)[0m  COMMIT
Migrating to BuildsRemoveJobId (20110615152003)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "builds" DROP "job_id"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110615152003')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to BuildRemoveLastBuiltAt (20110616211744)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "repositories" DROP "last_built_at"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110616211744')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to AddMissingIndexes (20110617114728)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (12.7ms)[0m  CREATE INDEX "index_repositories_on_last_build_started_at" ON "repositories" ("last_build_started_at")
  [1m[36m (10.2ms)[0m  [1mCREATE INDEX "index_repositories_on_owner_name_and_name" ON "repositories" ("owner_name", "name")[0m
  [1m[35m (11.4ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_parent_id_and_started_at" ON "builds" ("repository_id", "parent_id", "started_at")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110617114728')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to AddActiveToRepositories (20110619100906)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "is_active" boolean
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110619100906')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to StoreTokenInBuild (20110729094426)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "token" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110729094426')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreateRequestsCommitsAndTasks (20110801161819)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "commit_id" integer
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "request_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "state" character varying(255)
  [1m[36m (16.7ms)[0m  [1mCREATE TABLE "commits" ("id" serial primary key, "repository_id" integer, "commit" character varying(255), "ref" character varying(255), "branch" character varying(255), "message" text, "compare_url" character varying(255), "committed_at" timestamp, "committer_name" character varying(255), "committer_email" character varying(255), "author_name" character varying(255), "author_email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (16.0ms)[0m  CREATE TABLE "requests" ("id" serial primary key, "repository_id" integer, "commit_id" integer, "state" character varying(255), "source" character varying(255), "payload" text, "token" character varying(255), "config" text, "commit" character varying(255), "started_at" timestamp, "finished_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (18.2ms)[0m  [1mCREATE TABLE "tasks" ("id" serial primary key, "repository_id" integer, "commit_id" integer, "owner_id" integer, "owner_type" character varying(255), "queue" character varying(255), "type" character varying(255), "state" character varying(255), "number" character varying(255), "config" text, "status" integer, "log" text DEFAULT '', "job_id" character varying(255), "worker" character varying(255), "commit" character varying(255), "started_at" timestamp, "finished_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.8ms)[0m  UPDATE "commits" SET "id" = source."id", "repository_id" = source."repository_id", "created_at" = source."created_at", "updated_at" = source."updated_at", "commit" = source."commit", "ref" = source."ref", "branch" = source."branch", "message" = source."message", "compare_url" = source."compare_url", "committed_at" = source."committed_at", "committer_name" = source."committer_name", "committer_email" = source."committer_email", "author_name" = source."author_name", "author_email" = source."author_email" FROM (SELECT "id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email" FROM "builds" WHERE "builds".id IN (SELECT id FROM "commits")) AS source WHERE "commits".id = source.id
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "commits" ("id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email") SELECT "id", "repository_id", "created_at", "updated_at", "commit", "ref", "branch", "message", "compare_url", "committed_at", "committer_name", "committer_email", "author_name", "author_email" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "commits")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "ref"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "branch"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "message"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "compare_url"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "committed_at"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "committer_name"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" DROP COLUMN "committer_email"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "author_name"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "author_email"
  [1m[36m (0.6ms)[0m  [1mUPDATE "requests" SET "id" = source."id", "repository_id" = source."repository_id", "config" = source."config", "created_at" = source."created_at", "updated_at" = source."updated_at", "commit" = source."commit", "started_at" = source."started_at", "finished_at" = source."finished_at" FROM (SELECT "id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at" FROM "builds" WHERE "builds".id IN (SELECT id FROM "requests")) AS source WHERE "requests".id = source.id[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "requests" ("id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at") SELECT "id", "repository_id", "config", "created_at", "updated_at", "commit", "started_at", "finished_at" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "requests")
  [1m[36m (0.3ms)[0m  [1mUPDATE "requests" SET "id" = source."id", "payload" = source."github_payload", "token" = source."token" FROM (SELECT "id", "github_payload", "token" FROM "builds" WHERE "builds".id IN (SELECT id FROM "requests")) AS source WHERE "requests".id = source.id[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "requests" ("id", "payload", "token") SELECT "id", "github_payload" AS "payload", "token" AS "token" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "requests")
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "github_payload"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" DROP COLUMN "token"
  [1m[36m (0.3ms)[0m  [1mUPDATE "requests" SET "state" = 'finished'[0m
  [1m[35m (0.3ms)[0m  UPDATE "requests" SET "source" = 'github'
  [1m[36m (1.0ms)[0m  [1mUPDATE "tasks" SET "id" = source."id", "number" = source."number", "status" = source."status", "started_at" = source."started_at", "finished_at" = source."finished_at", "commit" = source."commit", "config" = source."config", "log" = source."log" FROM (SELECT "id", "number", "status", "started_at", "finished_at", "commit", "config", "log" FROM "builds" WHERE "builds".id IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0) AS source WHERE "tasks".id = source.id[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "tasks" ("id", "number", "status", "started_at", "finished_at", "commit", "config", "log") SELECT "id", "number", "status", "started_at", "finished_at", "commit", "config", "log" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "builds" DROP COLUMN "log"[0m
  [1m[35m (1.9ms)[0m  UPDATE "tasks" SET "id" = source."id", "owner_id" = source."parent_id" FROM (SELECT "id", "parent_id" FROM "builds" WHERE "builds".id IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0) AS source WHERE "tasks".id = source.id
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "tasks" ("id", "owner_id") SELECT "id", "parent_id" AS "owner_id" FROM "builds" WHERE "builds".id NOT IN (SELECT id FROM "tasks") AND parent_id IS NOT NULL OR parent_id IS NULL AND (SELECT COUNT(*) FROM builds AS children WHERE children.id = builds.id) = 0[0m
  [1m[35m (0.2ms)[0m  UPDATE "tasks" SET "owner_type" = 'Build'
  [1m[36m (0.4ms)[0m  [1mUPDATE "tasks" SET "type" = 'Task::Test'[0m
  [1m[35m (1.0ms)[0m  UPDATE "tasks" SET "state" = 'finished'
  [1m[36m (16.5ms)[0m  [1mCREATE INDEX "index_commits_on_commit" ON "commits" ("commit")[0m
  [1m[35m (16.5ms)[0m  CREATE INDEX "index_builds_on_commit" ON "builds" ("commit")
  [1m[36m (9.8ms)[0m  [1mCREATE INDEX "index_requests_on_commit" ON "requests" ("commit")[0m
  [1m[35m (11.0ms)[0m  CREATE INDEX "index_tasks_on_commit" ON "tasks" ("commit")
  [1m[36m (0.7ms)[0m  [1mUPDATE requests SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = requests.commit LIMIT 1)[0m
  [1m[35m (0.8ms)[0m  UPDATE tasks SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = tasks.commit LIMIT 1)
  [1m[36m (0.4ms)[0m  [1mDELETE FROM builds WHERE parent_id IS NOT NULL[0m
  [1m[35m (0.3ms)[0m  UPDATE builds SET request_id = (SELECT requests.id FROM requests WHERE requests.commit = builds.commit LIMIT 1)
  [1m[36m (0.2ms)[0m  [1mUPDATE builds SET commit_id = (SELECT commits.id FROM commits WHERE commits.commit = builds.commit LIMIT 1)[0m
  [1m[35m (0.8ms)[0m  SELECT MAX("builds"."id") AS max_id FROM "builds" 
  [1m[36m (0.5ms)[0m  [1mCREATE SEQUENCE shared_builds_tasks_seq START WITH 1 CACHE 30[0m
  [1m[35m (29.4ms)[0m  ALTER TABLE builds ALTER COLUMN id TYPE BIGINT
  [1m[36m (0.5ms)[0m  [1mALTER TABLE builds ALTER COLUMN id SET DEFAULT nextval('shared_builds_tasks_seq')[0m
  [1m[35m (18.2ms)[0m  ALTER TABLE tasks ALTER COLUMN id TYPE BIGINT
  [1m[36m (1.5ms)[0m  [1mALTER TABLE tasks ALTER COLUMN id SET DEFAULT nextval('shared_builds_tasks_seq')[0m
  [1m[35m (0.4ms)[0m  SELECT max(id) FROM commits
  [1m[36m (0.4ms)[0m  [1mSELECT setval('commits_id_seq', 1)[0m
  [1m[35m (0.3ms)[0m  SELECT max(id) FROM requests
  [1m[36m (0.7ms)[0m  [1mSELECT setval('requests_id_seq', 1)[0m
  [1m[35m (0.7ms)[0m  SELECT max(id) FROM tasks
  [1m[36m (0.3ms)[0m  [1mSELECT setval('tasks_id_seq', 1)[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "builds" DROP "parent_id"
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "builds" DROP "commit"[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "requests" DROP "commit"
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "tasks" DROP "commit"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110801161819')
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
Migrating to RepositoryRenameIsActiveToActive (20110805030147)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" RENAME COLUMN "is_active" TO "active"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110805030147')
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
Migrating to TasksAddTags (20110819232908)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "tasks" ADD COLUMN "tags" text[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110819232908')
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Migrating to CacheOneNumberForSharedBuildsTasksSequence (20110911204538)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER SEQUENCE shared_builds_tasks_seq CACHE 1 NO MAXVALUE NO CYCLE[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110911204538')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to RenameTasksToJobs (20111107134436)
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "tasks" RENAME TO "jobs"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "tasks_id_seq" RENAME TO "jobs_id_seq"
  [1m[36m (0.4ms)[0m  [1mUPDATE jobs SET type = 'Job::Test' WHERE type = 'Task::Test'[0m
  [1m[35m (0.2ms)[0m  UPDATE jobs SET type = 'Job::Configure' WHERE type = 'Task::Configure'
  [1m[36m (1.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134436')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to CreateArtifacts (20111107134437)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (12.1ms)[0m  CREATE TABLE "artifacts" ("id" serial primary key, "content" text, "job_id" integer, "type" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.7ms)[0m  [1mUPDATE "artifacts" SET "id" = source."id", "content" = source."log" FROM (SELECT "id", "log" FROM "jobs" WHERE "jobs".id IN (SELECT id FROM "artifacts")) AS source WHERE "artifacts".id = source.id[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "artifacts" ("id", "content") SELECT "id", "log" AS "content" FROM "jobs" WHERE "jobs".id NOT IN (SELECT id FROM "artifacts")
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "jobs" DROP COLUMN "log"[0m
  [1m[35m (0.7ms)[0m  UPDATE "artifacts" SET "type" = 'Artifact::Log'
  [1m[36m (0.2ms)[0m  [1mUPDATE artifacts SET job_id = id[0m
  [1m[35m (0.4ms)[0m  select setval('artifacts_id_seq', (select max(id) + 1 from artifacts));
  [1m[36m (5.7ms)[0m  [1mCREATE INDEX "index_artifacts_on_type_and_job_id" ON "artifacts" ("type", "job_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111107134437')
  [1m[36m (3.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkers (20111107134438)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (11.3ms)[0m  [1mCREATE TABLE "workers" ("id" serial primary key, "name" character varying(255), "host" character varying(255), "state" character varying(255), "last_seen_at" timestamp) [0m
  [1m[35m (4.5ms)[0m  CREATE INDEX "index_workers_on_name_and_host" ON "workers" ("name", "host")
  [1m[36m (1.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134438')[0m
  [1m[35m (9.1ms)[0m  COMMIT
Migrating to JobsAddRetries (20111107134439)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (15.2ms)[0m  ALTER TABLE "jobs" ADD COLUMN "retries" integer DEFAULT 0
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134439')[0m
  [1m[35m (3.1ms)[0m  COMMIT
Migrating to RemoveRailsAdmin (20111107134440)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (2.8ms)[0m  DROP TABLE "rails_admin_histories"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111107134440')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddIndexesToJobs (20111128235043)
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (11.3ms)[0m  CREATE INDEX "index_jobs_on_queue_and_state" ON "jobs" ("queue", "state")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111128235043')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddRepositoryIdIndexToJobs (20111129014329)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (5.8ms)[0m  CREATE INDEX "index_jobs_on_repository_id" ON "jobs" ("repository_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111129014329')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to AddOwnerAndTypeIndexToJobs (20111129022625)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (11.8ms)[0m  CREATE INDEX "index_jobs_on_type_and_owner_id_and_owner_type" ON "jobs" ("type", "owner_id", "owner_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111129022625')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to WorkersAddPayloadAndLastError (20111201113500)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "workers" ADD COLUMN "payload" text
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "last_error" text[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111201113500')
  [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddDescriptionAndLastLanguage (20111203002341)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "description" text[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_language" character varying(255)
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "language" character varying(255)[0m
  [1m[35m (1.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111203002341')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddArchivedAt (20111203221720)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "archived_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111203221720')
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
Migrating to MimicProductionDb (20111207093700)
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111207093700')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to BuildsAddDuration (20111212103859)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "builds" ADD COLUMN "duration" integer
  [1m[36m (1.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111212103859')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to RepositoriesAddLastBuildDuration (20111212112411)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_duration" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20111212112411')[0m
  [1m[35m (8.7ms)[0m  COMMIT
Migrating to CreateSslKeys (20111214173922)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (18.1ms)[0m  CREATE TABLE "ssl_keys" ("id" serial primary key, "repository_id" integer, "public_key" text, "private_key" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (5.9ms)[0m  [1mCREATE INDEX "index_ssl_key_on_repository_id" ON "ssl_keys" ("repository_id")[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20111214173922')
  [1m[36m (3.2ms)[0m  [1mCOMMIT[0m
Migrating to AddAllowFailureToJobs (20120114125404)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (33.3ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "allow_failure" boolean DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120114125404')
  [1m[36m (9.1ms)[0m  [1mCOMMIT[0m
Migrating to AddPullRequestFieldsToRequest (20120216133223)
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "event_type" character varying(255)[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "requests" ADD COLUMN "comments_url" character varying(255)
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "base_commit" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "requests" ADD COLUMN "head_commit" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120216133223')[0m
  [1m[35m (8.1ms)[0m  COMMIT
Migrating to AddGravatarIdToUsers (20120222082522)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "users" ADD COLUMN "gravatar_id" character varying(255)
  [1m[36m (0.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120222082522')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to OrganizationsCreate (20120301131209)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (29.4ms)[0m  CREATE TABLE "organizations" ("id" serial primary key, "name" character varying(255), "login" character varying(255), "github_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120301131209')[0m
  [1m[35m (7.9ms)[0m  COMMIT
Migrating to JobsRenameOwnerToSource (20120304000502)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "jobs" RENAME COLUMN "owner_id" TO "source_id"
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "jobs" RENAME COLUMN "owner_type" TO "source_type"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000502')
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddOwner (20120304000503)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "owner_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "owner_type" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120304000503')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to BuildsAddOwner (20120304000504)
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "owner_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "owner_type" character varying(255)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000504')
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
Migrating to JobsAddOwner (20120304000505)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "owner_id" integer[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "jobs" ADD COLUMN "owner_type" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120304000505')[0m
  [1m[35m (2.8ms)[0m  COMMIT
Migrating to RequestsAddOwner (20120304000506)
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "requests" ADD COLUMN "owner_id" integer
  [1m[36m (1.4ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "owner_type" character varying(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120304000506')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddLocaleToUser (20120311234933)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "users" ADD COLUMN "locale" character varying(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120311234933')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to CreateMemberships (20120316123726)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (7.7ms)[0m  [1mCREATE TABLE "memberships" ("id" serial primary key, "organization_id" integer, "user_id" integer) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120316123726')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to RepositoriesAddPrivate (20120319170001)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (42.2ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "private" boolean DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120319170001')
  [1m[36m (10.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateUrls (20120324104051)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (24.5ms)[0m  [1mCREATE TABLE "urls" ("id" serial primary key, "url" character varying(255), "code" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120324104051')
  [1m[36m (3.7ms)[0m  [1mCOMMIT[0m
Migrating to CopyStatusToResult (20120505165100)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "builds" ADD COLUMN "result" integer[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "jobs" ADD COLUMN "result" integer
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "last_build_result" integer[0m
  [1m[35m (0.6ms)[0m  UPDATE builds SET result = status;
  [1m[36m (0.4ms)[0m  [1mUPDATE jobs SET result = status;[0m
  [1m[35m (0.3ms)[0m  UPDATE repositories SET last_build_result = last_build_status;
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120505165100')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to RequestsAddIndexOnHeadCommit (20120511171900)
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35m (14.6ms)[0m  CREATE INDEX "index_requests_on_head_commit" ON "requests" ("head_commit")
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120511171900')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to CreatePermissions (20120521174400)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (6.7ms)[0m  CREATE TABLE "permissions" ("id" serial primary key, "user_id" integer, "repository_id" integer, "admin" boolean) 
  [1m[36m (12.4ms)[0m  [1mCREATE INDEX "index_permissions_on_user_id" ON "permissions" ("user_id")[0m
  [1m[35m (11.7ms)[0m  CREATE INDEX "index_permissions_on_repository_id" ON "permissions" ("repository_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120521174400')[0m
  [1m[35m (8.4ms)[0m  COMMIT
Migrating to BuildsAddPreviousResult (20120527235800)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "builds" ADD COLUMN "previous_result" integer
  [1m[36m (0.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120527235800')[0m
  [1m[35m (2.8ms)[0m  COMMIT
Migrating to AddSyncInfoToUser (20120713140816)
  [1m[36m (2.3ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "users" ADD COLUMN "in_sync" boolean
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD COLUMN "synced_at" timestamp[0m
  [1m[35m (2.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120713140816')
  [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
Migrating to RenameInSyncToIsSyncing (20120713153215)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" RENAME COLUMN "in_sync" TO "is_syncing"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120713153215')
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Migrating to AddQueueToWorkers (20120725005300)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "queue" character varying(255)[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120725005300')
  [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
Migrating to AddJobsIndexOnStateOwnerTypeOwnerId (20120727151900)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (4.5ms)[0m  [1mCREATE INDEX "index_jobs_on_state_owner_type_owner_id" ON "jobs" ("state", "owner_id", "owner_type")[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120727151900')
  [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
Migrating to AddQueuedAtToJobs (20120731005301)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.6ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "queued_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120731005301')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to AddPushAndPullToPermissions (20120802001001)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (39.5ms)[0m  [1mALTER TABLE "permissions" ADD COLUMN "push" boolean DEFAULT 'f'[0m
  [1m[35m (25.0ms)[0m  ALTER TABLE "permissions" ADD COLUMN "pull" boolean DEFAULT 'f'
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "permissions" ALTER COLUMN "admin" SET DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120802001001')
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
Migrating to AddBuildsIndexOnRepositoryIdAndState (20120911160000)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mDROP INDEX "index_builds_on_repository_id"[0m
  [1m[35m (6.9ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_state" ON "builds" ("repository_id", "state")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120911160000')[0m
  [1m[35m (4.2ms)[0m  COMMIT
Migrating to ArtifactsAddAggregatedAt (20120911230000)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "aggregated_at" timestamp
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120911230000')[0m
  [1m[35m (2.8ms)[0m  COMMIT
Migrating to AddArtifactParts (20120911230001)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (8.9ms)[0m  CREATE TABLE "artifact_parts" ("id" serial primary key, "artifact_id" integer, "content" character varying(255), "number" integer) 
  [1m[36m (6.4ms)[0m  [1mCREATE INDEX "index_artifact_parts_on_artifact_id_and_number" ON "artifact_parts" ("artifact_id", "number")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120911230001')
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
Migrating to BuildsAddIndexOnFinishedAt (20120915012000)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (6.6ms)[0m  [1mCREATE INDEX "index_builds_on_finished_at" ON "builds" ("finished_at")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915012000')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to CommitsAddIndexOnBranch (20120915012001)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (9.4ms)[0m  [1mCREATE INDEX "index_commits_on_branch" ON "commits" ("branch")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915012001')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to JobsAddIndexOnCreatedAt (20120915150000)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (5.4ms)[0m  [1mCREATE INDEX "index_jobs_on_created_at" ON "jobs" ("created_at")[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20120915150000')
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateEvents (20121015002500)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (13.2ms)[0m  [1mCREATE TABLE "events" ("id" serial primary key, "source_id" integer, "source_type" character varying(255), "repository_id" integer, "event" character varying(255), "data" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121015002500')
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Migrating to RequestsAddResultAndMessage (20121015002501)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "requests" ADD COLUMN "result" character varying(255)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "requests" ADD COLUMN "message" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121015002501')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to CreateBroadcasts (20121017040100)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (12.8ms)[0m  CREATE TABLE "broadcasts" ("id" serial primary key, "recipient_id" integer, "recipient_type" character varying(255), "kind" character varying(255), "message" character varying(255), "expired" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121017040100')[0m
  [1m[35m (3.1ms)[0m  COMMIT
Migrating to EventsChangeDataToText (20121017040200)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "events" ALTER COLUMN "data" TYPE text
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121017040200')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddEventTypeToBuilds (20121018201301)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "event_type" character varying(255)
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018201301')[0m
  [1m[35m (2.9ms)[0m  COMMIT
Migrating to UpdateEventTypeOnBuilds (20121018203728)
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (2.0ms)[0m   UPDATE builds
 SET event_type = requests.event_type
 FROM requests
 WHERE builds.request_id = requests.id

  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018203728')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to AddIndexOnRepositoryIdAndEventTypeToBuilds (20121018210156)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (7.7ms)[0m  CREATE INDEX "index_builds_on_repository_id_and_event_type" ON "builds" ("repository_id", "event_type")
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121018210156')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to RepositoriesAddLastBuildState (20121125122700)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "last_build_state" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121125122700')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to BuildsAddPreviousState (20121125122701)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "previous_state" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20121125122701')[0m
  [1m[35m (8.5ms)[0m  COMMIT
Migrating to ArtifactPartsAddFinal (20121222125200)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "artifact_parts" ADD COLUMN "final" boolean
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "artifact_parts" ADD COLUMN "created_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222125200')
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsChangeContentToText (20121222125300)
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (4.6ms)[0m  [1mALTER TABLE "artifact_parts" ALTER COLUMN "content" TYPE text[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222125300')
  [1m[36m (3.4ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsAddIndexOnArtifactId (20121222140200)
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (12.4ms)[0m  [1mCREATE INDEX "index_artifact_parts_on_artifact_id" ON "artifact_parts" ("artifact_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121222140200')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactPartsRemoveIndexOnArtifactId (20121223162300)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mDROP INDEX "index_artifact_parts_on_artifact_id"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20121223162300')
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubScopesToUser (20130107165057)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "users" ADD COLUMN "github_scopes" text[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130107165057')
  [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
Migrating to AddIndexOnLastSeenAtToWorkers (20130115125836)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (5.9ms)[0m  [1mCREATE INDEX "index_workers_on_last_seen_at" ON "workers" ("last_seen_at")[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130115125836')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to CacheFullNameInWorkers (20130115145728)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "workers" ADD COLUMN "full_name" character varying(255)[0m
  [1m[35m (11.4ms)[0m  CREATE INDEX "index_workers_on_full_name" ON "workers" ("full_name")
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130115145728')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to ArtifactsAddArchivedAt (20130125002600)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "archived_at" timestamp
  [1m[36m (11.0ms)[0m  [1mCREATE INDEX "index_artifacts_on_archived_at" ON "artifacts" ("archived_at")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130125002600')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Migrating to ArtifactsAddArchivingAndVerified (20130125171100)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifacts" ADD COLUMN "archiving" boolean[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "artifacts" ADD COLUMN "archive_verified" boolean
  [1m[36m (5.6ms)[0m  [1mCREATE INDEX "index_artifacts_on_archiving" ON "artifacts" ("archiving")[0m
  [1m[35m (4.3ms)[0m  CREATE INDEX "index_artifacts_on_archive_verified" ON "artifacts" ("archive_verified")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130125171100')[0m
  [1m[35m (2.7ms)[0m  COMMIT
Migrating to CreateEmails (20130129142703)
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (5.4ms)[0m  CREATE TABLE "emails" ("id" serial primary key, "user_id" integer, "email" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (10.0ms)[0m  [1mCREATE INDEX "index_emails_on_user_id" ON "emails" ("user_id")[0m
  [1m[35m (11.5ms)[0m  CREATE INDEX "index_emails_on_email" ON "emails" ("email")
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130129142703')[0m
  [1m[35m (2.5ms)[0m  COMMIT
Migrating to CreateLogs (20130207030700)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (29.5ms)[0m  CREATE TABLE "logs" ("id" serial primary key, "job_id" integer, "content" text, "created_at" timestamp, "updated_at" timestamp, "aggregated_at" timestamp, "archiving" boolean, "archived_at" timestamp, "archive_verified" boolean) 
  [1m[36m (10.9ms)[0m  [1mCREATE INDEX "index_logs_on_job_id" ON "logs" ("job_id")[0m
  [1m[35m (4.5ms)[0m  CREATE INDEX "index_logs_on_archive_verified" ON "logs" ("archive_verified")
  [1m[36m (11.1ms)[0m  [1mCREATE INDEX "index_logs_on_archived_at" ON "logs" ("archived_at")[0m
  [1m[35m (5.9ms)[0m   CREATE FUNCTION insert_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 INSERT INTO logs VALUES (NEW.id, NEW.job_id, NEW.content, NEW.created_at, NEW.updated_at,
 NEW.aggregated_at, NEW.archiving, NEW.archived_at, NEW.archive_verified);
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION update_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 UPDATE logs
 SET job_id=NEW.job_id, content=NEW.content, created_at=NEW.created_at,
 updated_at=NEW.updated_at, aggregated_at=NEW.aggregated_at, archiving=NEW.archiving,
 archived_at=NEW.archived_at, archive_verified=NEW.archive_verified
 WHERE id = NEW.id;
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION delete_log() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 DELETE FROM logs WHERE id = OLD.id;
 RETURN OLD;
 END;
 $$;

 CREATE TRIGGER insert_log AFTER INSERT ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE insert_log();

 CREATE TRIGGER update_log AFTER UPDATE ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE update_log();

 CREATE TRIGGER delete_log AFTER DELETE ON artifacts FOR EACH ROW
 EXECUTE PROCEDURE delete_log();

  [1m[36m (0.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130207030700')[0m
  [1m[35m (10.2ms)[0m  COMMIT
Migrating to CreateLogParts (20130207030701)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (14.0ms)[0m  CREATE TABLE "log_parts" ("id" serial primary key, "log_id" integer, "content" text, "number" integer, "final" boolean, "created_at" timestamp) 
  [1m[36m (11.1ms)[0m  [1mCREATE INDEX "index_log_parts_on_log_id_and_number" ON "log_parts" ("log_id", "number")[0m
  [1m[35m (0.5ms)[0m   INSERT INTO log_parts
 SELECT id, artifact_id, content, number, final, created_at
 FROM artifact_parts
 WHERE artifact_parts.id NOT IN (SELECT id FROM log_parts)

  [1m[36m (1.5ms)[0m  [1m CREATE FUNCTION insert_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 INSERT INTO log_parts VALUES (NEW.id, NEW.artifact_id, NEW.content, NEW.number, NEW.final,
 NEW.created_at);
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION update_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 UPDATE logs
 SET log_id=NEW.artifact_id, content=NEW.content, number=NEW.number, created_at=NEW.created_at
 WHERE id = NEW.id;
 RETURN NEW;
 END;
 $$;

 CREATE FUNCTION delete_log_part() RETURNS trigger LANGUAGE plpgsql AS $$
 BEGIN
 DELETE FROM log_parts WHERE id = OLD.id;
 RETURN OLD;
 END;
 $$;

 CREATE TRIGGER insert_log_part AFTER INSERT ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE insert_log_part();

 CREATE TRIGGER update_log_part AFTER INSERT ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE update_log_part();

 CREATE TRIGGER delete_log_part AFTER DELETE ON artifact_parts FOR EACH ROW
 EXECUTE PROCEDURE delete_log_part();
[0m
  [1m[35m (0.4ms)[0m   INSERT INTO log_parts
 SELECT id, artifact_id, content, number, final, created_at
 FROM artifact_parts
 WHERE artifact_parts.id NOT IN (SELECT id FROM log_parts)

  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130207030701')[0m
  [1m[35m (9.2ms)[0m  COMMIT
Migrating to AddReferenceOnLogPartsLogId (20130208124253)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.7ms)[0m  ALTER TABLE log_parts ADD CONSTRAINT log_parts_log_id_fk FOREIGN KEY (log_id) REFERENCES logs (id);
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208124253')[0m
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to RenameArtifacts (20130208135800)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE "artifacts" RENAME TO "artifacts_backup"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifacts_id_seq" RENAME TO "artifacts_backup_id_seq"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "artifact_parts" RENAME TO "artifact_parts_backup"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "artifact_parts_id_seq" RENAME TO "artifact_parts_backup_id_seq"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130208135800')
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Migrating to DropArtifacts (20130208135801)
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36m (2.1ms)[0m  [1mDROP TABLE "artifacts_backup"[0m
  [1m[35m (1.1ms)[0m  DROP TABLE "artifact_parts_backup"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208135801')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to AddNotNullConstraintOnLogPartsLogId (20130208215252)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE log_parts ALTER COLUMN log_id SET NOT NULL;
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130208215252')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to AddPullRequestTitleToBuilds (20130311211101)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "builds" ADD COLUMN "pull_request_title" text
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130311211101')[0m
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to AddPullRequestNumberToBuilds (20130327100801)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "builds" ADD COLUMN "pull_request_number" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130327100801')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to AddIndexToBuildsRequestId (20130418101437)
  [1m[36m (16.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_request_id ON builds(request_id)[0m
  [1m[35m (9.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130418101437')
Migrating to AddIndexToJobsOnOwnerIdOwnerTypeAndState (20130418103306)
  [1m[36m (34.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_id_and_owner_type_and_state ON jobs(owner_id, owner_type, state)[0m
  [1m[35m (2.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130418103306')
Migrating to AddBranchToBuilds (20130504230850)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" ADD COLUMN "branch" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130504230850')[0m
  [1m[35m (1.9ms)[0m  COMMIT
Migrating to AddMoreIndexesToBuilds (20130505023259)
  [1m[36m (14.2ms)[0m  [1m CREATE INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type_and_state_and_branch
 ON builds(repository_id, event_type, state, branch);
[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130505023259')
Migrating to AddIndexOnBuildState (20130521115725)
  [1m[36m (13.2ms)[0m  [1m CREATE INDEX CONCURRENTLY index_builds_on_state
 ON builds(state);
[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521115725')
Migrating to UpdateFinishedJobs (20130521133050)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.3ms)[0m  UPDATE jobs SET state = 'passed' WHERE state = 'finished' AND result = 0 AND type = 'Job::Test'
  [1m[36m (1.4ms)[0m  [1mUPDATE jobs SET state = 'failed' WHERE state = 'finished' AND result = 1 AND type = 'Job::Test'[0m
  [1m[35m (1.0ms)[0m  UPDATE jobs SET state = 'errored' WHERE state = 'finished' AND result IS NULL AND type = 'Job::Test'
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM jobs WHERE state = 'finished' AND type = 'Job::Test'[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521133050')
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Migrating to UpdateFinishedBuilds (20130521134224)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE builds SET state = 'passed' WHERE state = 'finished' AND result = 0[0m
  [1m[35m (0.4ms)[0m  UPDATE builds SET state = 'failed' WHERE state = 'finished' AND result = 1
  [1m[36m (0.3ms)[0m  [1mUPDATE builds SET state = 'errored' WHERE state = 'finished' AND result IS NULL[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM builds WHERE state = 'finished'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130521134224')[0m
  [1m[35m (2.9ms)[0m  COMMIT
Migrating to RemoveUnusedBuildColumns (20130521134800)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "builds" DROP "result"
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "builds" DROP "status"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "builds" DROP "previous_result"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP "agent"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "builds" DROP "language"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "builds" DROP "archived_at"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521134800')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to RemoveUnusedJobColumns (20130521141357)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" DROP "status"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "jobs" DROP "job_id"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "jobs" DROP "retries"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130521141357')
  [1m[36m (3.0ms)[0m  [1mCOMMIT[0m
Migrating to AddGithubIdToUsers (20130629122945)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.5ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "github_id" integer[0m
  [1m[35m (5.9ms)[0m  CREATE INDEX "index_repositories_on_github_id" ON "repositories" ("github_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629122945')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to AddDefaultBranchToRepositories (20130629133531)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "default_branch" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629133531')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddGithubLanguageToRepositories (20130629174449)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" ADD COLUMN "github_language" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130629174449')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddPurgedAtToLogs (20130701123456)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "logs" ADD COLUMN "purged_at" timestamp
  [1m[36m (1.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130701123456')[0m
  [1m[35m (2.4ms)[0m  COMMIT
Migrating to RemoveUnusedRepositoryColumns (20130702123456)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "repositories" DROP "last_duration"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" DROP "last_build_status"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "repositories" DROP "last_build_result"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "repositories" DROP "last_build_language"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130702123456')
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
Migrating to AddUniqueIndexOnUsersGithubIdAndRemoveUniqueIndexOnUsersLogin (20130702144325)
  [1m[35m (10.0ms)[0m  DROP INDEX index_users_on_login
  [1m[36m (21.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_users_on_login ON users(login)[0m
  [1m[35m (2.3ms)[0m  DROP INDEX index_users_on_github_id
  [1m[36m (7.4ms)[0m  [1mCREATE UNIQUE INDEX CONCURRENTLY index_users_on_github_id ON users(github_id)[0m
  [1m[35m (2.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130702144325')
Migrating to AddExtraColumnsToOrganizations (20130705123456)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "organizations" ADD COLUMN "avatar_url" character varying(255)
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "organizations" ADD COLUMN "location" character varying(255)[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "organizations" ADD COLUMN "email" character varying(255)
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "organizations" ADD COLUMN "company" character varying(255)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "organizations" ADD COLUMN "homepage" character varying(255)
  [1m[36m (1.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130705123456')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddIndexOnGithubIdToOrganizations (20130707164854)
  [1m[36m (7.2ms)[0m  [1mCREATE UNIQUE INDEX CONCURRENTLY index_organizations_on_github_id ON organizations(github_id)[0m
  [1m[35m (2.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130707164854')
Migrating to CreateAnnotations (20130709185200)
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (18.5ms)[0m  CREATE TABLE "annotations" ("id" serial primary key, "job_id" integer NOT NULL, "url" character varying(255), "description" text NOT NULL, "image_url" character varying(255), "image_alt" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130709185200')[0m
  [1m[35m (3.2ms)[0m  COMMIT
Migrating to CreateAnnotationProviders (20130709233500)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (14.0ms)[0m  CREATE TABLE "annotation_providers" ("id" serial primary key, "name" character varying(255), "api_username" character varying(255), "api_key" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130709233500')[0m
  [1m[35m (3.1ms)[0m  COMMIT
Migrating to AddAnnotationProviderIdToAnnotations (20130710000745)
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "annotations" ADD COLUMN "annotation_provider_id" integer NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130710000745')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to AddCanceledAtToJobsAndBuilds (20130726101124)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "builds" ADD COLUMN "canceled_at" timestamp
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "jobs" ADD COLUMN "canceled_at" timestamp[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130726101124')
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to AddIndexOnRepositoryGithubId (20130901183019)
  [1m[35m (4.1ms)[0m  DROP INDEX index_repositories_on_github_id
  [1m[36m (9.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_github_id ON repositories(github_id)[0m
  [1m[35m (2.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130901183019')
Migrating to AddCachedMatrixIdsToBuilds (20130909203321)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE builds ADD COLUMN cached_matrix_ids integer[]
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130909203321')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Migrating to CreateIndexOnBuildsIdDescAndRepositoryIdAndEventType (20130910184823)
  [1m[36m (13.9ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_id_repository_id_and_event_type_desc ON builds (id DESC, repository_id, event_type);[0m
  [1m[35m (3.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130910184823')
Migrating to AddUniqueIndexOnRepositoryGithubId (20130916101056)
  [1m[36m (2.6ms)[0m  [1mDROP INDEX index_repositories_on_github_id[0m
  [1m[35m (10.5ms)[0m  CREATE UNIQUE INDEX CONCURRENTLY index_repositories_on_github_id ON repositories(github_id)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130916101056')[0m
Migrating to AddSettingsToRepositories (20130920135744)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (1.9ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "settings" json[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130920135744')
  [1m[36m (2.9ms)[0m  [1mCOMMIT[0m
Migrating to RemoveWorkersTableAndIndexes (20131104101056)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mDROP TABLE "workers"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131104101056')
  [1m[36m (5.3ms)[0m  [1mCOMMIT[0m
Migrating to RemoveEventsTable (20131109101056)
  [1m[35m (1.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131109101056')
  [1m[36m (9.8ms)[0m  [1mCOMMIT[0m
Migrating to RemoveAnnotationImageInfo (20140120225125)
  [1m[35m (1.4ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "annotations" DROP "image_url"[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "annotations" DROP "image_alt"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140120225125')[0m
  [1m[35m (8.5ms)[0m  COMMIT
Migrating to AddStatusToAnnotations (20140121003026)
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "annotations" ADD COLUMN "status" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140121003026')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddIndicesToRequests (20140204220926)
  [1m[36m (8.5ms)[0m  [1mCREATE INDEX CONCURRENTLY index_requests_on_repository_id ON requests(repository_id)[0m
  [1m[35m (8.7ms)[0m  CREATE INDEX CONCURRENTLY index_requests_on_commit_id ON requests(commit_id)
  [1m[36m (2.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140204220926')[0m
Migrating to AddIndicesToMemberships (20140210003014)
  [1m[35m (9.8ms)[0m  CREATE INDEX CONCURRENTLY index_memberships_on_user_id ON memberships(user_id)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140210003014')[0m
Migrating to RemoveUnusedIndices (20140210012509)
  [1m[35m (4.6ms)[0m  DROP INDEX CONCURRENTLY index_commits_on_commit
  [1m[36m (4.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_state[0m
  [1m[35m (2.9ms)[0m  DROP INDEX CONCURRENTLY index_commits_on_branch
  [1m[36m (2.4ms)[0m  [1mDROP INDEX CONCURRENTLY index_users_on_github_oauth_token[0m
  [1m[35m (5.4ms)[0m  DROP INDEX CONCURRENTLY index_builds_on_finished_at
  [1m[36m (4.0ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_queue_and_state[0m
  [1m[35m (2.2ms)[0m  DROP INDEX CONCURRENTLY index_jobs_on_created_at
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140210012509')[0m
Migrating to AddRemovedInfoToLogs (20140612131826)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "logs" ADD COLUMN "removed_at" timestamp[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "logs" ADD COLUMN "removed_by" integer
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140612131826')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Migrating to AddEducationFieldToUser (20140827121945)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD COLUMN "education" boolean
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20140827121945')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to JobsAddReceivedAt (20150121135400)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "jobs" ADD COLUMN "received_at" timestamp
  [1m[36m (1.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150121135400')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to BuildsAddReceivedAt (20150121135401)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "builds" ADD COLUMN "received_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150121135401')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Migrating to AddIndexOnRepositoryIdToCommits (20150204144312)
  [1m[36m (0.2ms)[0m  [1mDROP INDEX IF EXISTS index_commits_on_repository_id[0m
  [1m[35m (9.3ms)[0m  CREATE INDEX CONCURRENTLY index_commits_on_repository_id ON commits(repository_id)
  [1m[36m (15.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150204144312')[0m
Migrating to IndexRequestsOnCreatedAt (20150210170900)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_requests_on_created_at
  [1m[36m (8.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_requests_on_created_at ON requests(created_at)[0m
  [1m[35m (3.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150210170900')
Migrating to CreateBranches (20150223125700)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (10.8ms)[0m  CREATE TABLE "branches" ("id" serial primary key, "repository_id" integer NOT NULL, "last_build_id" integer, "name" character varying(255) NOT NULL, "exists_on_github" boolean DEFAULT 't' NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (6.2ms)[0m  [1mCREATE UNIQUE INDEX "index_branches_on_repository_id_and_name" ON "branches" ("repository_id", "name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150223125700')
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
Migrating to AddNextBuildNumberToRepository (20150311020321)
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "repositories" ADD COLUMN "next_build_number" integer[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150311020321')
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
Migrating to AddActiveIndexToRepository (20150316020321)
  [1m[35m (0.3ms)[0m  DROP INDEX IF EXISTS index_repositories_on_active
  [1m[36m (13.9ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_active ON repositories(active)[0m
  [1m[35m (8.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150316020321')
Migrating to AddOwnerTypeAndOwnerIdIndexesToBuilds (20150316080321)
  [1m[36m (1.2ms)[0m  [1mDROP INDEX IF EXISTS index_builds_on_owner_type[0m
  [1m[35m (0.8ms)[0m  DROP INDEX IF EXISTS index_builds_on_owner_id
  [1m[36m (7.0ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_owner_type ON builds(owner_type)[0m
  [1m[35m (8.2ms)[0m  CREATE INDEX CONCURRENTLY index_builds_on_owner_id ON builds(owner_id)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150316080321')[0m
Migrating to AddOwnerTypeAndOwnerIdIndexesToRepositories (20150316100321)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_repositories_on_owner_type
  [1m[36m (0.1ms)[0m  [1mDROP INDEX IF EXISTS index_repositories_on_owner_id[0m
  [1m[35m (13.0ms)[0m  CREATE INDEX CONCURRENTLY index_repositories_on_owner_type ON repositories(owner_type)
  [1m[36m (27.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_owner_id ON repositories(owner_id)[0m
  [1m[35m (9.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150316100321')
Migrating to AddSlugIndexToRepositories (20150317004600)
  [1m[36m (31.8ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS pg_trgm[0m
  [1m[35m (6.1ms)[0m  CREATE INDEX CONCURRENTLY index_repositories_on_slug ON repositories USING gin((owner_name || '/' || name) gin_trgm_ops)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150317004600')[0m
Migrating to AddTokenIndexToTokens (20150317020321)
  [1m[35m (0.1ms)[0m  DROP INDEX IF EXISTS index_tokens_on_token
  [1m[36m (12.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_tokens_on_token ON tokens(token)[0m
  [1m[35m (8.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150317020321')
Migrating to AddLoginIndexToOrganizations (20150317080321)
  [1m[36m (0.3ms)[0m  [1mDROP INDEX IF EXISTS index_organizations_on_login[0m
  [1m[35m (20.2ms)[0m  CREATE INDEX CONCURRENTLY index_organizations_on_login ON organizations(login)
  [1m[36m (2.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150317080321')[0m
Migrating to AddLowerCaseIndices (20150414001337)
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_organizations_on_lower_login
  [1m[36m (21.0ms)[0m  [1mCREATE INDEX CONCURRENTLY index_organizations_on_lower_login ON organizations USING btree(lower(login))[0m
  [1m[35m (0.6ms)[0m  DROP INDEX IF EXISTS index_users_on_lower_login
  [1m[36m (15.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_users_on_lower_login ON users USING btree(lower(login))[0m
  [1m[35m (0.6ms)[0m  DROP INDEX IF EXISTS index_repositories_on_lower_name
  [1m[36m (20.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_lower_name ON repositories USING btree(lower(name))[0m
  [1m[35m (0.2ms)[0m  DROP INDEX IF EXISTS index_repositories_on_lower_owner_name
  [1m[36m (13.8ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_lower_owner_name ON repositories USING btree(lower(owner_name))[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150414001337')
Migrating to RepositoriesAddIndexOwnerName (20150528101600)
  [1m[36m (13.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_owner_name ON repositories(owner_name)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101600')
Migrating to RepositoriesAddIndexName (20150528101601)
  [1m[36m (8.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_repositories_on_name ON repositories(name)[0m
  [1m[35m (3.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101601')
Migrating to RepositoriesDropIndexOwnerNameName (20150528101602)
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_repositories_on_owner_name_and_name[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101602')
Migrating to BuildsAddIndexEventType (20150528101603)
  [1m[36m (8.2ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_event_type ON builds (event_type)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101603')
Migrating to BuildsAddIndexRepositoryId (20150528101604)
  [1m[36m (13.7ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_repository_id ON builds (repository_id)[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101604')
Migrating to BuildsAddIndexState (20150528101605)
  [1m[36m (21.6ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_state ON builds (state)[0m
  [1m[35m (7.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101605')
Migrating to BuildsAddIndexBranch (20150528101607)
  [1m[36m (18.0ms)[0m  [1mCREATE INDEX CONCURRENTLY index_builds_on_branch ON builds (branch)[0m
  [1m[35m (2.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101607')
Migrating to BuildsDropIndexRepositoryIdAndState (20150528101608)
  [1m[36m (4.2ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_state[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101608')
Migrating to BuildsDropIndexRepositoryIdAndEventType (20150528101609)
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type[0m
  [1m[35m (8.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101609')
Migrating to BuildsDropIndexIdRepositoryIdAndEventTypeDesc (20150528101610)
  [1m[36m (16.9ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_id_repository_id_and_event_type_desc[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101610')
Migrating to BuildsDropIndexRepositoryIdAndEventTypeAndStateAndBranch (20150528101611)
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_builds_on_repository_id_and_event_type_and_state_and_bran[0m
  [1m[35m (2.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150528101611')
Migrating to JobsAddIndexOwnerId (20150610143500)
  [1m[36m (16.4ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_id ON jobs (owner_id)[0m
  [1m[35m (2.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143500')
Migrating to JobsAddIndexOwnerType (20150610143501)
  [1m[36m (8.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_owner_type ON jobs (owner_type)[0m
  [1m[35m (2.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143501')
Migrating to JobsAddIndexSourceId (20150610143502)
  [1m[36m (8.2ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_source_id ON jobs (source_id)[0m
  [1m[35m (2.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143502')
Migrating to JobsAddIndexSourceType (20150610143503)
  [1m[36m (7.0ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_source_type ON jobs (source_type)[0m
  [1m[35m (2.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143503')
Migrating to JobsAddIndexType (20150610143504)
  [1m[36m (8.1ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_type ON jobs (type)[0m
  [1m[35m (3.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143504')
Migrating to JobsDropIndexOwnerIdAndOwnerTypeAndState (20150610143505)
  [1m[36m (5.6ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_owner_id_and_owner_type_and_state[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143505')
Migrating to JobsDropIndexStateOwnerTypeOwnerId (20150610143506)
  [1m[36m (2.3ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_state_owner_type_owner_id[0m
  [1m[35m (3.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143506')
Migrating to JobsDropIndexTypeAndSourceIdAndSourceType (20150610143507)
  [1m[36m (3.4ms)[0m  [1mDROP INDEX CONCURRENTLY index_jobs_on_type_and_owner_id_and_owner_type[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143507')
Migrating to JobsAddIndexState (20150610143508)
  [1m[36m (9.8ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_state ON jobs (state)[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143508')
Migrating to JobsAddIndexQueue (20150610143509)
  [1m[36m (8.8ms)[0m  [1mCREATE INDEX CONCURRENTLY index_jobs_on_queue ON jobs (queue)[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143509')
Migrating to TokensAddIndexUserId (20150610143510)
  [1m[36m (8.3ms)[0m  [1mCREATE INDEX CONCURRENTLY index_tokens_on_user_id ON tokens (user_id)[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20150610143510')
Migrating to ReposAddInvalidatedAt (20150629231300)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "repositories" ADD COLUMN "invalidated_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150629231300')[0m
  [1m[35m (2.0ms)[0m  COMMIT
Migrating to BroadcastsAddCategory (20150923131400)
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35m (1.6ms)[0m  ALTER TABLE "broadcasts" ADD COLUMN "category" character varying(255)
  [1m[36m (1.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150923131400')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Migrating to CreateStars (20151112153500)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (8.5ms)[0m  CREATE TABLE "stars" ("id" serial primary key, "repository_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (4.5ms)[0m  [1mCREATE INDEX "index_stars_on_user_id" ON "stars" ("user_id")[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20151112153500')
  [1m[36m (4.0ms)[0m  [1mCOMMIT[0m
Migrating to StarsAddIndexUserIdAndRepositoryId (20151113111400)
  [1m[35m (6.9ms)[0m  CREATE UNIQUE INDEX index_stars_on_user_id_and_repository_id ON stars (user_id, repository_id)
  [1m[36m (2.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20151113111400')[0m
Migrating to UsersAddIndexGithubOauthToken (20151127153500)
  [1m[35m (6.6ms)[0m  CREATE UNIQUE INDEX CONCURRENTLY index_users_on_github_oauth_token ON users (github_oauth_token)
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20151127153500')[0m
Migrating to AnnotationsAddIndexJobId (20151127154200)
  [1m[35m (7.2ms)[0m  CREATE INDEX CONCURRENTLY index_annotations_on_job_id ON annotations (job_id)
  [1m[36m (3.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20151127154200')[0m
Migrating to BroadcastsAddIndexRecipientIdAndRecipientType (20151127154600)
  [1m[35m (13.0ms)[0m  CREATE INDEX CONCURRENTLY index_broadcasts_on_recipient_id_and_recipient_type ON broadcasts (recipient_id, recipient_type)
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20151127154600')[0m
Migrating to UsersAddFirstLoggedInAt (20151202122200)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "users" ADD COLUMN "first_logged_in_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20151202122200')
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.6ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
