#!/usr/bin/env ruby

$stdout.sync = true

$LOAD_PATH << 'lib'

require 'bundler/setup'
require 'travis/api/v3/models/user'

option = ARGV[1]

users = if option == '--active'
  User.where('github_oauth_token IS NOT NULL AND suspended=false').order(login: :asc)
elsif option == '--suspended'
  User.where(suspended: true).order(login: :asc)
elsif option == nil
  User.all.order(login: :asc)
else
  Travis.logger.error "Option #{option} not recognised."
end

users.each do |user|
  puts user.login
end
